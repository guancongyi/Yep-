{"code":"!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=29)}([function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i,r,o=n(1),a=n(2),s=n(5),u=n(6),h=((i={})[\"no-app\"]=\"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()\",i[\"bad-app-name\"]=\"Illegal App name: '{$appName}\",i[\"duplicate-app\"]=\"Firebase App named '{$appName}' already exists\",i[\"app-deleted\"]=\"Firebase App named '{$appName}' already deleted\",i[\"invalid-app-argument\"]=\"firebase.{$appName}() takes either no argument or a Firebase App instance.\",i[\"invalid-log-argument\"]=\"First argument to `onLog` must be null or a function.\",i),l=new a.ErrorFactory(\"app\",\"Firebase\",h),c=((r={})[\"@firebase/app\"]=\"fire-core\",r[\"@firebase/analytics\"]=\"fire-analytics\",r[\"@firebase/auth\"]=\"fire-auth\",r[\"@firebase/database\"]=\"fire-rtdb\",r[\"@firebase/functions\"]=\"fire-fn\",r[\"@firebase/installations\"]=\"fire-iid\",r[\"@firebase/messaging\"]=\"fire-fcm\",r[\"@firebase/performance\"]=\"fire-perf\",r[\"@firebase/remote-config\"]=\"fire-rc\",r[\"@firebase/storage\"]=\"fire-gcs\",r[\"@firebase/firestore\"]=\"fire-fst\",r[\"fire-js\"]=\"fire-js\",r[\"firebase-wrapper\"]=\"fire-js-all\",r),p=new u.Logger(\"@firebase/app\"),f=function(){function t(t,e,n){var i,r,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component(\"app\",(function(){return u}),\"PUBLIC\"));try{for(var h=o.__values(this.firebase_.INTERNAL.components.values()),l=h.next();!l.done;l=h.next()){var c=l.value;this._addComponent(c)}}catch(t){i={error:t}}finally{try{l&&!l.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}}return Object.defineProperty(t.prototype,\"automaticDataCollectionEnabled\",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"options\",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=\"[DEFAULT]\"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=\"[DEFAULT]\"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug(\"Component \"+t.name+\" failed to register with FirebaseApp \"+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create(\"app-deleted\",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log(\"dc\");var d=\n/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction t(){var e=\n/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction(t){var e={},n=new Map,i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={});if(\"object\"!=typeof r||null===r){r={name:r}}var o=r;void 0===o.name&&(o.name=\"[DEFAULT]\");var s=o.name;if(\"string\"!=typeof s||!s)throw l.create(\"bad-app-name\",{appName:String(s)});if(a.contains(e,s))throw l.create(\"duplicate-app\",{appName:s});var u=new t(n,o,i);return e[s]=u,u},app:r,registerVersion:function(t,e,n){var i,r=null!==(i=c[t])&&void 0!==i?i:t;n&&(r+=\"-\"+n);var o=r.match(/\\s|\\//),a=e.match(/\\s|\\//);if(o||a){var u=['Unable to register library \"'+r+'\" with version \"'+e+'\":'];return o&&u.push('library name \"'+r+'\" contains illegal characters (whitespace or \"/\")'),o&&a&&u.push(\"and\"),a&&u.push('version name \"'+e+'\" contains illegal characters (whitespace or \"/\")'),void p.warn(u.join(\" \"))}h(new s.Component(r+\"-version\",(function(){return{library:r,version:e}}),\"VERSION\"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&\"function\"!=typeof t)throw l.create(\"invalid-log-argument\",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:\"7.13.2\",INTERNAL:{registerComponent:h,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if(\"serverAuth\"===e)return null;return e}}};function r(t){if(t=t||\"[DEFAULT]\",!a.contains(e,t))throw l.create(\"no-app\",{appName:t});return e[t]}function h(s){var u,h,c=s.name;if(n.has(c))return p.debug(\"There were multiple attempts to register component \"+c+\".\"),\"PUBLIC\"===s.type?i[c]:null;if(n.set(c,s),\"PUBLIC\"===s.type){var f=function(t){if(void 0===t&&(t=r()),\"function\"!=typeof t[c])throw l.create(\"invalid-app-argument\",{appName:c});return t[c]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),i[c]=f,t.prototype[c]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,c);return n.apply(this,s.multipleInstances?t:[])}}try{for(var d=o.__values(Object.keys(e)),v=d.next();!v.done;v=d.next()){var g=v.value;e[g]._addComponent(s)}}catch(t){u={error:t}}finally{try{v&&!v.done&&(h=d.return)&&h.call(d)}finally{if(u)throw u.error}}return\"PUBLIC\"===s.type?i[c]:null}return i.default=i,Object.defineProperty(i,\"apps\",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),r.App=t,i}(f);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return\"VERSION\"===(null==e?void 0:e.type)}\n/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */(t)){var e=t.getImmediate();return e.library+\"/\"+e.version}return null})).filter((function(t){return t})).join(\" \")},t}();\n/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @license\n * Copyright 2017 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nif(a.isBrowser()&&void 0!==self.firebase){p.warn(\"\\n    Warning: Firebase is already defined in the global scope. Please make sure\\n    Firebase library is only loaded once.\\n  \");var g=self.firebase.SDK_VERSION;g&&g.indexOf(\"LITE\")>=0&&p.warn(\"\\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\\n    \")}var y=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&p.warn('\\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\\n      run in a Node environment.  If running in a Node environment, make sure you\\n      are using the bundle specified by the \"main\" field in package.json.\\n      \\n      If you are using Webpack, you can specify \"main\" as the first item in\\n      \"resolve.mainFields\":\\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\\n      \\n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify \"main\"\\n      as the first item in \"mainFields\", e.g. [\\'main\\', \\'module\\'].\\n      https://github.com/rollup/rollup-plugin-node-resolve\\n      '),y.apply(void 0,t)};var _=d;!function(t,e){t.INTERNAL.registerComponent(new s.Component(\"platform-logger\",(function(t){return new v(t)}),\"PRIVATE\")),t.registerVersion(\"@firebase/app\",\"0.6.1\",e),t.registerVersion(\"fire-js\",\"\")}(_),e.default=_,e.firebase=_},function(t,e,n){\"use strict\";n.r(e),n.d(e,\"__extends\",(function(){return r})),n.d(e,\"__assign\",(function(){return o})),n.d(e,\"__rest\",(function(){return a})),n.d(e,\"__decorate\",(function(){return s})),n.d(e,\"__param\",(function(){return u})),n.d(e,\"__metadata\",(function(){return h})),n.d(e,\"__awaiter\",(function(){return l})),n.d(e,\"__generator\",(function(){return c})),n.d(e,\"__exportStar\",(function(){return p})),n.d(e,\"__values\",(function(){return f})),n.d(e,\"__read\",(function(){return d})),n.d(e,\"__spread\",(function(){return v})),n.d(e,\"__spreadArrays\",(function(){return g})),n.d(e,\"__await\",(function(){return y})),n.d(e,\"__asyncGenerator\",(function(){return _})),n.d(e,\"__asyncDelegator\",(function(){return m})),n.d(e,\"__asyncValues\",(function(){return b})),n.d(e,\"__makeTemplateObject\",(function(){return w})),n.d(e,\"__importStar\",(function(){return E})),n.d(e,\"__importDefault\",(function(){return C})),n.d(e,\"__classPrivateFieldGet\",(function(){return T})),n.d(e,\"__classPrivateFieldSet\",(function(){return S}));\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function s(t,e,n,i){var r,o=arguments.length,a=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(a=(o<3?r(a):o>3?r(e,n,a):r(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,i){e(n,i,t)}}function h(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,i){return new(n||(n=Promise))((function(r,o){function a(t){try{u(i.next(t))}catch(t){o(t)}}function s(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((i=i.apply(t,e||[])).next())}))}function c(t,e){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,i=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){a.label=o[1];break}if(6===o[0]&&a.label<r[1]){a.label=r[1],r=o;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(o);break}r[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e=\"function\"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&\"number\"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?\"Object is not iterable.\":\"Symbol.iterator is not defined.\")}function d(t,e){var n=\"function\"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function _(t,e,n){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var i,r=n.apply(t,e||[]),o=[];return i={},a(\"next\"),a(\"throw\"),a(\"return\"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||s(t,e)}))})}function s(t,e){try{(n=r[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,h):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function u(t){s(\"next\",t)}function h(t){s(\"throw\",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function m(t){var e,n;return e={},i(\"next\"),i(\"throw\",(function(t){throw t})),i(\"return\"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:y(t[i](e)),done:\"return\"===i}:r?r(e):e}:r}}function b(t){if(!Symbol.asyncIterator)throw new TypeError(\"Symbol.asyncIterator is not defined.\");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},i(\"next\"),i(\"throw\"),i(\"return\"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,\"raw\",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function T(t,e){if(!e.has(t))throw new TypeError(\"attempted to get private field on non-instance\");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError(\"attempted to set private field on non-instance\");return e.set(t,n),n}},function(t,e,n){\"use strict\";(function(t){Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(1),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:\"${JSCORE_VERSION}\"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error(\"Firebase Database (\"+r.SDK_VERSION+\") INTERNAL ASSERT FAILED: \"+t)},s=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&i+1<t.length&&56320==(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+\"+/=\"},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+\"-_.\"},HAS_NATIVE_SUPPORT:\"function\"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error(\"encodeByteArray takes an array as a parameter\");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<t.length;r+=3){var o=t[r],a=r+1<t.length,s=a?t[r+1]:0,u=r+2<t.length,h=u?t[r+2]:0,l=o>>2,c=(3&o)<<4|s>>4,p=(15&s)<<2|h>>6,f=63&h;u||(f=64,a||(p=64)),i.push(n[l],n[c],n[p],n[f])}return i.join(\"\")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,i=0;n<t.length;){var r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){var o=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&o)}else if(r>239&&r<365){var a=((7&r)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[i++]=String.fromCharCode(55296+(a>>10)),e[i++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&o)<<6|63&s)}}return e.join(\"\")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<t.length;){var o=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0,s=++r<t.length?n[t.charAt(r)]:64,u=++r<t.length?n[t.charAt(r)]:64;if(++r,null==o||null==a||null==s||null==u)throw Error();var h=o<<2|a>>4;if(i.push(h),64!==s){var l=a<<4&240|s>>2;if(i.push(l),64!==u){var c=s<<6&192|u;i.push(c)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},h=function(t){try{return u.decodeString(t,!0)}catch(t){console.error(\"base64Decode failed: \",t)}return null};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,i){n?e.reject(n):e.resolve(i),\"function\"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,i))}},t}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function p(){return\"undefined\"!=typeof navigator&&\"string\"==typeof navigator.userAgent?navigator.userAgent:\"\"}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar f=function(t){function e(n,i){var r=t.call(this,i)||this;return r.code=n,r.name=\"FirebaseError\",Object.setPrototypeOf(r,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(r,d.prototype.create),r}return i.__extends(e,t),e}(Error),d=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var i=e[0]||{},r=this.service+\"/\"+t,o=this.errors[t],a=o?v(o,i):\"Error\",s=this.serviceName+\": \"+a+\" (\"+r+\").\",u=new f(r,s),h=0,l=Object.keys(i);h<l.length;h++){var c=l[h];\"_\"!==c.slice(-1)&&(c in u&&console.warn('Overwriting FirebaseError base field \"'+c+'\" can cause unexpected behavior.'),u[c]=i[c])}return u},t}();function v(t,e){return t.replace(g,(function(t,n){var i=e[n];return null!=i?i.toString():\"<\"+n+\"?>\"}))}var g=/\\{\\$([^}]+)}/g;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function y(t){return JSON.parse(t)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _=function(t){var e={},n={},i={},r=\"\";try{var o=t.split(\".\");e=y(h(o[0])||\"\"),n=y(h(o[1])||\"\"),r=o[2],i=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:i,signature:r}};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar m=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if(\"string\"==typeof t)for(var i=0;i<16;i++)n[i]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(i=0;i<16;i++)n[i]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(i=16;i<80;i++){var r=n[i-3]^n[i-8]^n[i-14]^n[i-16];n[i]=4294967295&(r<<1|r>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],h=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(i=0;i<80;i++){i<40?i<20?(o=l^u&(h^l),a=1518500249):(o=u^h^l,a=1859775393):i<60?(o=u&h|l&(u|h),a=2400959708):(o=u^h^l,a=3395469782);r=(s<<5|s>>>27)+o+c+a+n[i]&4294967295;c=l,l=h,h=4294967295&(u<<30|u>>>2),u=s,s=r}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=0,r=this.buf_,o=this.inbuf_;i<e;){if(0===o)for(;i<=n;)this.compress_(t,i),i+=this.blockSize;if(\"string\"==typeof t){for(;i<e;)if(r[o]=t.charCodeAt(i),++i,++o===this.blockSize){this.compress_(r),o=0;break}}else for(;i<e;)if(r[o]=t[i],++i,++o===this.blockSize){this.compress_(r),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var i=0;for(n=0;n<5;n++)for(var r=24;r>=0;r-=8)t[i]=this.chain_[n]>>r&255,++i;return t},t}();var b=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var i,r=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error(\"Missing Observer.\");void 0===(i=function(t,e){if(\"object\"!=typeof t||null===t)return!1;for(var n=0,i=e;n<i.length;n++){var r=i[n];if(r in t&&\"function\"==typeof t[r])return!0}return!1}(t,[\"next\",\"error\",\"complete\"])?t:{next:t,error:e,complete:n}).next&&(i.next=w),void 0===i.error&&(i.error=w),void 0===i.complete&&(i.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(t){}})),this.observers.push(i),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){\"undefined\"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */function E(t,e,n){var i=\"\";switch(e){case 1:i=n?\"first\":\"First\";break;case 2:i=n?\"second\":\"Second\";break;case 3:i=n?\"third\":\"Third\";break;case 4:i=n?\"fourth\":\"Fourth\";break;default:throw new Error(\"errorPrefix called with argumentNumber > 4.  Need to update it?\")}var r=t+\" failed: \";return r+=i+\" argument \"}e.CONSTANTS=r,e.Deferred=c,e.ErrorFactory=d,e.FirebaseError=f,e.Sha1=m,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=h,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.contains=\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new b(t,e);return n.subscribe.bind(n)},e.decode=_,e.deepCopy=\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=E,e.getUA=p,e.isAdmin=function(t){var e=_(t).claims;return\"object\"==typeof e&&!0===e.admin},e.isBrowser=function(){return\"object\"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t=\"object\"==typeof chrome?chrome.runtime:\"object\"==typeof browser?browser.runtime:void 0;return\"object\"==typeof t&&void 0!==t.id},e.isElectron=function(){return p().indexOf(\"Electron/\")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=p();return t.indexOf(\"MSIE \")>=0||t.indexOf(\"Trident/\")>=0},e.isMobileCordova=function(){return\"undefined\"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNode=function(){try{return\"[object process]\"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},e.isReactNative=function(){return\"object\"==typeof navigator&&\"ReactNative\"===navigator.product},e.isUWP=function(){return p().indexOf(\"MSAppHost/\")>=0},e.isValidFormat=function(t){var e=_(t).claims;return!!e&&\"object\"==typeof e&&e.hasOwnProperty(\"iat\")},e.isValidTimestamp=function(t){var e=_(t).claims,n=Math.floor((new Date).getTime()/1e3),i=0,r=0;return\"object\"==typeof e&&(e.hasOwnProperty(\"nbf\")?i=e.nbf:e.hasOwnProperty(\"iat\")&&(i=e.iat),r=e.hasOwnProperty(\"exp\")?e.exp:i+86400),!!n&&!!i&&!!r&&n>=i&&n<=r},e.issuedAtTime=function(t){var e=_(t).claims;return\"object\"==typeof e&&e.hasOwnProperty(\"iat\")?e.iat:null},e.jsonEval=y,e.map=function(t,e,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+\"=\"+encodeURIComponent(n))},i=0,r=Object.entries(t);i<r.length;i++){var o=r[i];n(o[0],o[1])}return e.length?\"&\"+e.join(\"&\"):\"\"},e.querystringDecode=function(t){var e={};return t.replace(/^\\?/,\"\").split(\"&\").forEach((function(t){if(t){var n=t.split(\"=\");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,i=0;i<t.length;i++){var r=t.charCodeAt(i);if(r>=55296&&r<=56319){var a=r-55296;i++,o(i<t.length,\"Surrogate pair missing trail surrogate.\"),r=65536+(a<<10)+(t.charCodeAt(i)-56320)}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,i){var r;if(i<e?r=\"at least \"+e:i>n&&(r=0===n?\"none\":\"no more than \"+n),r)throw new Error(t+\" failed: Was called with \"+i+(1===i?\" argument.\":\" arguments.\")+\" Expects \"+r+\".\")},e.validateCallback=function(t,e,n,i){if((!i||n)&&\"function\"!=typeof n)throw new Error(E(t,e,i)+\"must be a valid function.\")},e.validateContextObject=function(t,e,n,i){if((!i||n)&&(\"object\"!=typeof n||null===n))throw new Error(E(t,e,i)+\"must be a valid context object.\")}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */,e.validateNamespace=function(t,e,n,i){if((!i||n)&&\"string\"!=typeof n)throw new Error(E(t,e,i)+\"must be a valid firebase namespace.\")}}).call(this,n(4))},function(t,e,n){\"use strict\";var i,r=(i=n(0))&&\"object\"==typeof i&&\"default\"in i?i.default:i;\n/**\n * @license\n * Copyright 2018 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nr.registerVersion(\"firebase\",\"7.13.2\",\"app\"),t.exports=r},function(t,e){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(n=window)}t.exports=n},function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var i=n(1),r=n(2),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode=\"LAZY\"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=\"[DEFAULT]\");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new r.Deferred;this.instancesDeferred.set(e,n);try{var i=this.getOrInitializeService(e);i&&n.resolve(i)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=i.__assign({identifier:\"[DEFAULT]\",optional:!1},t),n=e.identifier,r=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(r)return null;throw Error(\"Service \"+this.name+\" is not available\")}return a}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error(\"Mismatching Component \"+t.name+\" for Provider \"+this.name+\".\");if(this.component)throw Error(\"Component for \"+this.name+\" has already been provided\");if(this.component=t,function(t){return\"EAGER\"===t.instantiationMode}\n/**\n * @license\n * Copyright 2019 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */(t))try{this.getOrInitializeService(\"[DEFAULT]\")}catch(t){}try{for(var r=i.__values(this.instancesDeferred.entries()),o=r.next();!o.done;o=r.next()){var a=i.__read(o.value,2),s=a[0],u=a[1],h=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(h);u.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=\"[DEFAULT]\"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i.__awaiter(this,void 0,void 0,(function(){var t;return i.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return\"INTERNAL\"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return\"[DEFAULT]\"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:\"[DEFAULT]\":t},t}();var s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(\"Component \"+t.name+\" has already been registered with \"+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=s,e.Provider=a},function(t,e,n){\"use strict\";\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nfunction i(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,r++)i[r]=o[a];return i}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var r;n.r(e),n.d(e,\"LogLevel\",(function(){return o})),n.d(e,\"Logger\",(function(){return c})),n.d(e,\"setLogLevel\",(function(){return p})),n.d(e,\"setUserLogHandler\",(function(){return f}));var o,a=[];!function(t){t[t.DEBUG=0]=\"DEBUG\",t[t.VERBOSE=1]=\"VERBOSE\",t[t.INFO=2]=\"INFO\",t[t.WARN=3]=\"WARN\",t[t.ERROR=4]=\"ERROR\",t[t.SILENT=5]=\"SILENT\"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,h=((r={})[o.DEBUG]=\"log\",r[o.VERBOSE]=\"log\",r[o.INFO]=\"info\",r[o.WARN]=\"warn\",r[o.ERROR]=\"error\",r),l=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=h[e];if(!a)throw new Error(\"Attempted to log a message with an invalid logType (value: \"+e+\")\");console[a].apply(console,i([\"[\"+o+\"]  \"+t.name+\":\"],n))}},c=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,\"logLevel\",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError(\"Invalid value assigned to `logLevel`\");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"logHandler\",{get:function(){return this._logHandler},set:function(t){if(\"function\"!=typeof t)throw new TypeError(\"Value assigned to `logHandler` must be a function\");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"userLogHandler\",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.DEBUG],t)),this._logHandler.apply(this,i([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.VERBOSE],t)),this._logHandler.apply(this,i([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.INFO],t)),this._logHandler.apply(this,i([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.WARN],t)),this._logHandler.apply(this,i([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,i([this,o.ERROR],t)),this._logHandler.apply(this,i([this,o.ERROR],t))},t}();function p(t){var e=\"string\"==typeof t?s[t]:t;a.forEach((function(t){t.logLevel=e}))}function f(t,e){for(var n=function(n){var i=null;e&&e.level&&(i=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var s=r.map((function(t){if(null==t)return null;if(\"string\"==typeof t)return t;if(\"number\"==typeof t||\"boolean\"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(\" \");n>=(null!=i?i:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:r,type:e.name})}},i=0,r=a;i<r.length;i++){n(r[i])}}},,,,,,,,,,,,,,,function(t,e,n){\"use strict\";(function(t){var e=n(0),i=n.n(e);(function(){var e,n=\"function\"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(e){e=[\"object\"==typeof window&&window,\"object\"==typeof self&&self,\"object\"==typeof t&&t,e];for(var n=0;n<e.length;++n){var i=e[n];if(i&&i.Math==Math)return i}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e=\"undefined\"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var i=r;t=t.split(\".\");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}(\"Promise\",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=r.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(i){n||(n=!0,t.call(e,i))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError(\"A Promise cannot resolve to itself\"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case\"object\":var n=null!=t;break t;case\"function\":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}\"function\"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error(\"Cannot settle(\"+t+\", \"+e+\"): Promise already settled in state\"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function i(t,e){return\"function\"==typeof t?function(e){try{r(t(e))}catch(t){o(t)}}:e}var r,o,a=new e((function(t,e){r=t,o=e}));return this.Oa(i(t,r),i(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(i.b){case 1:t(i.c);break;case 2:e(i.c);break;default:throw Error(\"Unexpected state: \"+i.b)}}var i=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).Oa(e,n)}))},e.all=function(t){var n=a(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Oa(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},u=this||self,h=/^[\\w+/_-]+[=]{0,2}$/,l=null;function c(){}function p(t){var e=typeof t;if(\"object\"==e){if(!t)return\"null\";if(t instanceof Array)return\"array\";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if(\"[object Window]\"==n)return\"object\";if(\"[object Array]\"==n||\"number\"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable(\"splice\"))return\"array\";if(\"[object Function]\"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable(\"call\"))return\"function\"}else if(\"function\"==e&&void 0===t.call)return\"object\";return e}function f(t){var e=p(t);return\"array\"==e||\"object\"==e&&\"number\"==typeof t.length}function d(t){return\"function\"==p(t)}function v(t){var e=typeof t;return\"object\"==e&&null!=t||\"function\"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++_)}var y=\"closure_uid_\"+(1e9*Math.random()>>>0),_=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?m:b).apply(null,arguments)}function E(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var C=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t,e,n){this.code=P+t,this.message=e||R[t]||\"\",this.a=n||null}function I(t){var e=t&&t.code;return e?new S(e.substring(P.length),t.message,t.serverResponse):null}T(S,Error),S.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},S.prototype.toJSON=function(){return this.v()};var x,P=\"auth/\",R={\"admin-restricted-operation\":\"This operation is restricted to administrators only.\",\"argument-error\":\"\",\"app-not-authorized\":\"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.\",\"app-not-installed\":\"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.\",\"captcha-check-failed\":\"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.\",\"code-expired\":\"The SMS code has expired. Please re-send the verification code to try again.\",\"cordova-not-ready\":\"Cordova framework is not ready.\",\"cors-unsupported\":\"This browser is not supported.\",\"credential-already-in-use\":\"This credential is already associated with a different user account.\",\"custom-token-mismatch\":\"The custom token corresponds to a different audience.\",\"requires-recent-login\":\"This operation is sensitive and requires recent authentication. Log in again before retrying this request.\",\"dynamic-link-not-activated\":\"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.\",\"email-change-needs-verification\":\"Multi-factor users must always have a verified email.\",\"email-already-in-use\":\"The email address is already in use by another account.\",\"expired-action-code\":\"The action code has expired. \",\"cancelled-popup-request\":\"This operation has been cancelled due to another conflicting popup being opened.\",\"internal-error\":\"An internal error has occurred.\",\"invalid-app-credential\":\"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.\",\"invalid-app-id\":\"The mobile app identifier is not registed for the current project.\",\"invalid-user-token\":\"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.\",\"invalid-auth-event\":\"An internal error has occurred.\",\"invalid-verification-code\":\"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.\",\"invalid-continue-uri\":\"The continue URL provided in the request is invalid.\",\"invalid-cordova-configuration\":\"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.\",\"invalid-custom-token\":\"The custom token format is incorrect. Please check the documentation.\",\"invalid-dynamic-link-domain\":\"The provided dynamic link domain is not configured or authorized for the current project.\",\"invalid-email\":\"The email address is badly formatted.\",\"invalid-api-key\":\"Your API key is invalid, please check you have copied it correctly.\",\"invalid-cert-hash\":\"The SHA-1 certificate hash provided is invalid.\",\"invalid-credential\":\"The supplied auth credential is malformed or has expired.\",\"invalid-message-payload\":\"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-multi-factor-session\":\"The request does not contain a valid proof of first factor successful sign-in.\",\"invalid-oauth-provider\":\"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.\",\"invalid-oauth-client-id\":\"The OAuth client ID provided is either invalid or does not match the specified API key.\",\"unauthorized-domain\":\"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.\",\"invalid-action-code\":\"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.\",\"wrong-password\":\"The password is invalid or the user does not have a password.\",\"invalid-persistence-type\":\"The specified persistence type is invalid. It can only be local, session or none.\",\"invalid-phone-number\":\"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].\",\"invalid-provider-id\":\"The specified provider ID is invalid.\",\"invalid-recipient-email\":\"The email corresponding to this action failed to send as the provided recipient email address is invalid.\",\"invalid-sender\":\"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.\",\"invalid-verification-id\":\"The verification ID used to create the phone auth credential is invalid.\",\"invalid-tenant-id\":\"The Auth instance's tenant ID is invalid.\",\"multi-factor-info-not-found\":\"The user does not have a second factor matching the identifier provided.\",\"multi-factor-auth-required\":\"Proof of ownership of a second factor is required to complete sign-in.\",\"missing-android-pkg-name\":\"An Android Package Name must be provided if the Android App is required to be installed.\",\"auth-domain-config-required\":\"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.\",\"missing-app-credential\":\"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.\",\"missing-verification-code\":\"The phone auth credential was created with an empty SMS verification code.\",\"missing-continue-uri\":\"A continue URL must be provided in the request.\",\"missing-iframe-start\":\"An internal error has occurred.\",\"missing-ios-bundle-id\":\"An iOS Bundle ID must be provided if an App Store ID is provided.\",\"missing-multi-factor-info\":\"No second factor identifier is provided.\",\"missing-multi-factor-session\":\"The request is missing proof of first factor successful sign-in.\",\"missing-or-invalid-nonce\":\"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.\",\"missing-phone-number\":\"To send verification codes, provide a phone number for the recipient.\",\"missing-verification-id\":\"The phone auth credential was created with an empty verification ID.\",\"app-deleted\":\"This instance of FirebaseApp has been deleted.\",\"account-exists-with-different-credential\":\"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.\",\"network-request-failed\":\"A network error (such as timeout, interrupted connection or unreachable host) has occurred.\",\"no-auth-event\":\"An internal error has occurred.\",\"no-such-provider\":\"User was not linked to an account with the given provider.\",\"null-user\":\"A null user object was provided as the argument for an operation which requires a non-null user object.\",\"operation-not-allowed\":\"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.\",\"operation-not-supported-in-this-environment\":'This operation is not supported in the environment this application is running on. \"location.protocol\" must be http, https or chrome-extension and web storage must be enabled.',\"popup-blocked\":\"Unable to establish a connection with the popup. It may have been blocked by the browser.\",\"popup-closed-by-user\":\"The popup has been closed by the user before finalizing the operation.\",\"provider-already-linked\":\"User can only be linked to one identity for the given provider.\",\"quota-exceeded\":\"The project's quota for this operation has been exceeded.\",\"redirect-cancelled-by-user\":\"The redirect operation has been cancelled by the user before finalizing.\",\"redirect-operation-pending\":\"A redirect sign-in operation is already pending.\",\"rejected-credential\":\"The request contains malformed or mismatching credentials.\",\"second-factor-already-in-use\":\"The second factor is already enrolled on this account.\",\"maximum-second-factor-count-exceeded\":\"The maximum allowed number of second factors on a user has been exceeded.\",\"tenant-id-mismatch\":\"The provided tenant ID does not match the Auth instance's tenant ID\",timeout:\"The operation has timed out.\",\"user-token-expired\":\"The user's credential is no longer valid. The user must sign in again.\",\"too-many-requests\":\"We have blocked all requests from this device due to unusual activity. Try again later.\",\"unauthorized-continue-uri\":\"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.\",\"unsupported-first-factor\":\"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.\",\"unsupported-persistence-type\":\"The current environment does not support the specified persistence type.\",\"unsupported-tenant-operation\":\"This operation is not supported in a multi-tenant context.\",\"unverified-email\":\"The operation requires a verified email.\",\"user-cancelled\":\"The user did not grant your application the permissions it requested.\",\"user-not-found\":\"There is no user record corresponding to this identifier. The user may have been deleted.\",\"user-disabled\":\"The user account has been disabled by an administrator.\",\"user-mismatch\":\"The supplied credentials do not correspond to the previously signed in user.\",\"user-signed-out\":\"\",\"weak-password\":\"The password must be 6 characters long or more.\",\"web-storage-unsupported\":\"This browser is not supported or 3rd party cookies and data may be disabled.\"},O={hd:{Ra:\"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",Xa:\"https://staging-securetoken.sandbox.googleapis.com/v1/token\",Ua:\"https://staging-identitytoolkit.sandbox.googleapis.com/v2/\",id:\"b\"},pd:{Ra:\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",Xa:\"https://securetoken.googleapis.com/v1/token\",Ua:\"https://identitytoolkit.googleapis.com/v2/\",id:\"p\"},rd:{Ra:\"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/\",Xa:\"https://staging-securetoken.sandbox.googleapis.com/v1/token\",Ua:\"https://staging-identitytoolkit.sandbox.googleapis.com/v2/\",id:\"s\"},sd:{Ra:\"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/\",Xa:\"https://test-securetoken.sandbox.googleapis.com/v1/token\",Ua:\"https://test-identitytoolkit.sandbox.googleapis.com/v2/\",id:\"t\"}};function A(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function N(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function k(t){if(Error.captureStackTrace)Error.captureStackTrace(this,k);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n=\"\",i=(t=t.split(\"%s\")).length-1,r=0;r<i;r++)n+=t[r]+(r<e.length?e[r]:\"%s\");k.call(this,n+t[i])}function L(t,e){throw new D(\"Failure\"+(t?\": \"+t:\"\"),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function M(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}x=A(\"__EID__\")?\"__EID__\":void 0,T(k,Error),k.prototype.name=\"CustomError\",T(D,k),D.prototype.name=\"AssertionError\",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new F((function(){return new W}),(function(t){t.reset()}));function V(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function W(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},W.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},W.prototype.reset=function(){this.next=this.b=this.a=null};var q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(\"string\"==typeof t)return\"string\"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},z=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var i=t.length,r=\"string\"==typeof t?t.split(\"\"):t,o=0;o<i;o++)o in r&&e.call(n,r[o],o,t)};var K=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=[],r=0,o=\"string\"==typeof t?t.split(\"\"):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(i[r++]=s)}return i},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=Array(n),r=\"string\"==typeof t?t.split(\"\"):t,o=0;o<n;o++)o in r&&(i[o]=e.call(void 0,r[o],o,t));return i},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,i=\"string\"==typeof t?t.split(\"\"):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t))return!0;return!1};function B(t,e){return 0<=q(t,e)}function X(t,e){var n;return(n=0<=(e=q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n=\"string\"==typeof t?t.split(\"\"):t,i=t.length-1;0<=i;--i)i in n&&e.call(void 0,n[i],i,t)}(t,(function(n,i){e.call(void 0,n,i,t)&&1==Array.prototype.splice.call(t,i,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),i=0;i<e;i++)n[i]=t[i];return n}return[]}var $,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,it=/\"/g,rt=/'/g,ot=/\\x00/g,at=/[\\x00&<>\"']/;function st(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ht=u.navigator;if(ht){var lt=ht.userAgent;if(lt){$=lt;break t}}$=\"\"}function ct(t){return st($,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ft(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt=\"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");function gt(t,e){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])t[n]=i[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,i=n&&(n.defaultView||n.parentWindow);if((i=i||u).Element&&i.Location){var r=i;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o=\"<object could not be stringified>\"}else o=void 0===t?\"undefined\":null===t?\"null\":typeof t;L(\"Argument is not a %s (or a non-Element, non-Location mock); got: %s\",e,o)}}function _t(t,e){this.a=t===wt&&e||\"\",this.b=bt}function mt(t){return t instanceof _t&&t.constructor===_t&&t.b===bt?t.a:(L(\"expected object of type Const, got '\"+t+\"'\"),\"type_error:Const\")}_t.prototype.ra=!0,_t.prototype.qa=function(){return this.a},_t.prototype.toString=function(){return\"Const{\"+this.a+\"}\"};var bt={},wt={},Et=new _t(wt,\"\");function Ct(t,e){this.a=t===Rt&&e||\"\",this.b=Pt}function Tt(t){return t instanceof Ct&&t.constructor===Ct&&t.b===Pt?t.a:(L(\"expected object of type TrustedResourceUrl, got '\"+t+\"' of type \"+p(t)),\"type_error:TrustedResourceUrl\")}function St(t,e){var n=mt(t);if(!xt.test(n))throw Error(\"Invalid TrustedResourceUrl format: \"+n);return t=n.replace(It,(function(t,i){if(!Object.prototype.hasOwnProperty.call(e,i))throw Error('Found marker, \"'+i+'\", in format string, \"'+n+'\", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[i])instanceof _t?mt(t):encodeURIComponent(String(t))})),new Ct(Rt,t)}Ct.prototype.ra=!0,Ct.prototype.qa=function(){return this.a.toString()},Ct.prototype.toString=function(){return\"TrustedResourceUrl{\"+this.a+\"}\"};var It=/%{(\\w+)}/g,xt=/^((https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|\\/[^/\\\\]|[^:/\\\\%]+\\/|[^:/\\\\%]*[?#]|about:blank#)/i,Pt={},Rt={};function Ot(t,e){this.a=t===Lt&&e||\"\",this.b=Dt}function At(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Dt?t.a:(L(\"expected object of type SafeUrl, got '\"+t+\"' of type \"+p(t)),\"type_error:SafeUrl\")}Ot.prototype.ra=!0,Ot.prototype.qa=function(){return this.a.toString()},Ot.prototype.toString=function(){return\"SafeUrl{\"+this.a+\"}\"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function kt(t){return t instanceof Ot?t:(t=\"object\"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t=\"about:invalid#zClosurez\"),new Ot(Lt,t))}var Dt={},Lt={};function Ft(){this.a=\"\",this.b=jt}function Mt(t){return t instanceof Ft&&t.constructor===Ft&&t.b===jt?t.a:(L(\"expected object of type SafeHtml, got '\"+t+\"' of type \"+p(t)),\"type_error:SafeHtml\")}Ft.prototype.ra=!0,Ft.prototype.qa=function(){return this.a.toString()},Ft.prototype.toString=function(){return\"SafeHtml{\"+this.a+\"}\"};var jt={};function Ut(t){var e=new Ft;return e.a=t,e}Ut(\"<!DOCTYPE html>\");var Vt=Ut(\"\");function Wt(t,e){for(var n=t.split(\"%s\"),i=\"\",r=Array.prototype.slice.call(arguments,1);r.length&&1<n.length;)i+=n.shift()+r.shift();return i+n.join(\"%s\")}function qt(t){return at.test(t)&&(-1!=t.indexOf(\"&\")&&(t=t.replace(tt,\"&amp;\")),-1!=t.indexOf(\"<\")&&(t=t.replace(et,\"&lt;\")),-1!=t.indexOf(\">\")&&(t=t.replace(nt,\"&gt;\")),-1!=t.indexOf('\"')&&(t=t.replace(it,\"&quot;\")),-1!=t.indexOf(\"'\")&&(t=t.replace(rt,\"&#39;\")),-1!=t.indexOf(\"\\0\")&&(t=t.replace(ot,\"&#0;\"))),t}function zt(t){return zt[\" \"](t),t}Ut(\"<br>\"),zt[\" \"]=c;var Kt,Ht,Gt=ct(\"Opera\"),Bt=ct(\"Trident\")||ct(\"MSIE\"),Xt=ct(\"Edge\"),Yt=Xt||Bt,Qt=ct(\"Gecko\")&&!(st($.toLowerCase(),\"webkit\")&&!ct(\"Edge\"))&&!(ct(\"Trident\")||ct(\"MSIE\"))&&!ct(\"Edge\"),Zt=st($.toLowerCase(),\"webkit\")&&!ct(\"Edge\");function $t(){var t=u.document;return t?t.documentMode:void 0}t:{var Jt=\"\",te=(Ht=$,Qt?/rv:([^\\);]+)(\\)|;)/.exec(Ht):Xt?/Edge\\/([\\d\\.]+)/.exec(Ht):Bt?/\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(Ht):Zt?/WebKit\\/(\\S+)/.exec(Ht):Gt?/(?:Version)[ \\/]?(\\S+)/.exec(Ht):void 0);if(te&&(Jt=te?te[1]:\"\"),Bt){var ee=$t();if(null!=ee&&ee>parseFloat(Jt)){Kt=String(ee);break t}}Kt=Jt}var ne,ie={};function re(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=J(String(Kt)).split(\".\"),i=J(String(t)).split(\".\"),r=Math.max(n.length,i.length),o=0;0==e&&o<r;o++){var a=n[o]||\"\",s=i[o]||\"\";do{if(a=/(\\d*)(\\D*)(.*)/.exec(a)||[\"\",\"\",\"\",\"\"],s=/(\\d*)(\\D*)(.*)/.exec(s)||[\"\",\"\",\"\",\"\"],0==a[0].length&&0==s[0].length)break;e=ut(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ut(0==a[2].length,0==s[2].length)||ut(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}ne=u.document&&Bt?$t():void 0;try{new self.OffscreenCanvas(0,0).getContext(\"2d\")}catch(Ht){}var oe=!Bt||9<=Number(ne);function ae(t){var e=document;return\"string\"==typeof t?e.getElementById(t):t}function se(t,e){pt(e,(function(e,n){e&&\"object\"==typeof e&&e.ra&&(e=e.qa()),\"style\"==n?t.style.cssText=e:\"class\"==n?t.className=e:\"for\"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf(\"aria-\",0)||0==n.lastIndexOf(\"data-\",0)?t.setAttribute(n,e):t[n]=e}))}var ue,he,le={cellpadding:\"cellPadding\",cellspacing:\"cellSpacing\",colspan:\"colSpan\",frameborder:\"frameBorder\",height:\"height\",maxlength:\"maxLength\",nonce:\"nonce\",role:\"role\",rowspan:\"rowSpan\",type:\"type\",usemap:\"useMap\",valign:\"vAlign\",width:\"width\"};function ce(t,e,n){function i(n){n&&e.appendChild(\"string\"==typeof n?t.createTextNode(n):n)}for(var r=2;r<n.length;r++){var o=n[r];!f(o)||v(o)&&0<o.nodeType?i(o):z(fe(o)?Z(o):o,i)}}function pe(t,e){return e=String(e),\"application/xhtml+xml\"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function fe(t){if(t&&\"number\"==typeof t.length){if(v(t))return\"function\"==typeof t.item||\"string\"==typeof t.item;if(d(t))return\"function\"==typeof t.item}return!1}function de(t){u.setTimeout((function(){throw t}),0)}function ve(){var t=u.MessageChannel;if(void 0===t&&\"undefined\"!=typeof window&&window.postMessage&&window.addEventListener&&!ct(\"Presto\")&&(t=function(){var t=pe(document,\"IFRAME\");t.style.display=\"none\",function(t){var e=new Ct(Rt,mt(Et));yt(t,\"HTMLIFrameElement\"),t.src=Tt(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Mt(Vt)),t.close();var n=\"callImmediate\"+Math.random(),i=\"file:\"==e.location.protocol?\"*\":e.location.protocol+\"//\"+e.location.host;t=w((function(t){\"*\"!=i&&t.origin!=i||t.data!=n||this.port1.onmessage()}),this),e.addEventListener(\"message\",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,i)}}}),void 0!==t&&!ct(\"Trident\")&&!ct(\"MSIE\")){var e=new t,n={},i=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){i.next={Db:t},i=i.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}function ge(t,e){he||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);he=function(){t.then(me)}}else he=function(){var t=me;!d(u.setImmediate)||u.Window&&u.Window.prototype&&!ct(\"Edge\")&&u.Window.prototype.setImmediate==u.setImmediate?(ue||(ue=ve()),ue(t)):u.setImmediate(t)}}(),ye||(he(),ye=!0),_e.add(t,e)}var ye=!1,_e=new j;function me(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){de(t)}M(U,t)}ye=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=c)try{var n=this;t.call(e,(function(t){ke(n,Ee,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error(\"Promise rejected.\")}catch(t){}ke(n,Ce,t)}))}catch(t){ke(this,Ce,t)}}var we=0,Ee=2,Ce=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new F((function(){return new Te}),(function(t){t.reset()}));function Ie(t,e,n){var i=Se.get();return i.g=t,i.b=e,i.f=n,i}function xe(t){if(t instanceof be)return t;var e=new be(c);return ke(e,Ee,t),e}function Pe(t){return new be((function(e,n){n(t)}))}function Re(t,e,n){De(t,e,n,null)||ge(E(e,t))}function Oe(t){return new be((function(e){var n=t.length,i=[];if(n)for(var r=function(t,r,o){n--,i[t]=r?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(i)},o=0;o<t.length;o++)Re(t[o],E(r,o,!0),E(r,o,!1));else e(i)}))}function Ae(t,e){t.b||t.a!=Ee&&t.a!=Ce||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,e,n,i){var r=Ie(null,null,null);return r.a=new be((function(t,o){r.g=e?function(n){try{var r=e.call(i,n);t(r)}catch(t){o(t)}}:t,r.b=n?function(e){try{var r=n.call(i,e);void 0===r&&e instanceof Ve?o(e):t(r)}catch(t){o(t)}}:o})),r.a.c=t,Ae(t,r),r.a}function ke(t,e,n){t.a==we&&(t===n&&(e=Ce,n=new TypeError(\"Promise cannot resolve to itself\")),t.a=1,De(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ce||n instanceof Ve||function(t,e){t.g=!0,ge((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function De(t,e,n,i){if(t instanceof be)return Ae(t,Ie(e||c,n||null,i)),!0;if(N(t))return t.then(e,n,i),!0;if(v(t))try{var r=t.then;if(d(r))return function(t,e,n,i,r){function o(t){a||(a=!0,i.call(r,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(r,t))}),o)}catch(t){o(t)}}(t,r,e,n,i),!0}catch(t){return n.call(i,t),!0}return!1}function Le(t){t.h||(t.h=!0,ge(t.ec,t))}function Fe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Me(t,e,n,i){if(n==Ce&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,i);else try{e.c?e.g.call(e.f):je(e,n,i)}catch(t){Ue.call(null,t)}M(Se,e)}function je(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Ne(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(e=be.prototype).ma=function(t,e){return(t=Ie(t,t,e)).c=!0,Ae(this,t),this},e.o=function(t,e){return Ne(this,null,t,e)},e.cancel=function(t){if(this.a==we){var e=new Ve(t);ge((function(){!function t(e,n){if(e.a==we)if(e.c){var i=e.c;if(i.b){for(var r=0,o=null,a=null,s=i.b;s&&(s.c||(r++,s.a==e&&(o=s),!(o&&1<r)));s=s.next)o||(a=s);o&&(i.a==we&&1==r?t(i,n):(a?((r=a).next==i.f&&(i.f=r),r.next=r.next.next):Fe(i),Me(i,o,Ce,n)))}e.c=null}else ke(e,Ce,n)}(this,e)}),this)}},e.Yc=function(t){this.a=we,ke(this,Ee,t)},e.Zc=function(t){this.a=we,ke(this,Ce,t)},e.ec=function(){for(var t;t=Fe(this);)Me(this,t,this.a,this.i);this.h=!1};var Ue=de;function Ve(t){k.call(this,t)}function We(){0!=qe&&(ze[g(this)]=this),this.wa=this.wa,this.na=this.na}T(Ve,k),Ve.prototype.name=\"cancel\";var qe=0,ze={};function Ke(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=qe)){var e=g(t);if(0!=qe&&t.na&&0<t.na.length)throw Error(t+\" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.\");delete ze[e]}}We.prototype.wa=!1,We.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var He=Object.freeze||function(t){return t},Ge=!Bt||9<=Number(ne),Be=Bt&&!re(\"9\"),Xe=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},\"passive\",{get:function(){t=!0}});try{u.addEventListener(\"test\",c,e),u.removeEventListener(\"test\",c,e)}catch(t){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Qe(t,e){if(Ye.call(this,t?t.type:\"\"),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key=\"\",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType=\"\",this.a=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{zt(e.nodeName);var r=!0;break t}catch(t){}r=!1}r||(e=null)}}else\"mouseover\"==n?e=t.fromElement:\"mouseout\"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||\"\",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=\"string\"==typeof t.pointerType?t.pointerType:Ze[t.pointerType]||\"\",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},T(Qe,Ye);var Ze=He({2:\"touch\",3:\"pen\",4:\"mouse\"});Qe.prototype.preventDefault=function(){Qe.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Be)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Qe.prototype.f=function(){return this.a};var $e=\"closure_listenable_\"+(1e6*Math.random()|0),Je=0;function tn(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.Ta=r,this.key=++Je,this.ua=this.Na=!1}function en(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&X(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,i){for(var r=0;r<t.length;++r){var o=t[r];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==i)return r}return-1}nn.prototype.add=function(t,e,n,i,r){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,i,r);return-1<a?(e=t[a],n||(e.Na=!1)):((e=new tn(e,this.src,o,!!i,r)).Na=n,t.push(e)),e};var an=\"closure_lm_\"+(1e6*Math.random()|0),sn={};function un(t,e,n,i,r){if(i&&i.once)ln(t,e,n,i,r);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,i,r);else n=mn(n),t&&t[$e]?wn(t,e,n,v(i)?!!i.capture:!!i,r):hn(t,e,n,!1,i,r)}function hn(t,e,n,i,r,o){if(!e)throw Error(\"Invalid event type\");var a=v(r)?!!r.capture:!!r,s=yn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,i,a,o)).proxy){if(i=function(){var t=gn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)Xe||(r=a),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(fn(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error(\"addEventListener and attachEvent are unavailable.\");t.addListener(i)}0}}function ln(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,i,r);else n=mn(n),t&&t[$e]?En(t,e,n,v(i)?!!i.capture:!!i,r):hn(t,e,n,!0,i,r)}function cn(t,e,n,i,r){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,i,r);else i=v(i)?!!i.capture:!!i,n=mn(n),t&&t[$e]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=on(o=t.a[e],n,i,r))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=yn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,i,r)),(n=-1<t?e[t]:null)&&pn(n))}function pn(t){if(\"number\"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[$e])rn(e.u,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(fn(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=yn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function fn(t){return t in sn?sn[t]:sn[t]=\"on\"+t}function dn(t,e,n,i){var r=!0;if((t=yn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=vn(o,i),r=r&&!1!==o)}return r}function vn(t,e){var n=t.listener,i=t.Ta||t.src;return t.Na&&pn(t),n.call(i,e)}function gn(t,e){if(t.ua)return!0;if(!Ge){if(!e)t:{e=[\"window\",\"event\"];for(var n=u,i=0;i<e.length;i++)if(null==(n=n[e[i]])){e=null;break t}e=n}if(e=new Qe(i=e,this),n=!0,!(0>i.keyCode||null!=i.returnValue)){t:{var r=!1;if(0==i.keyCode)try{i.keyCode=-1;break t}catch(t){r=!0}(r||null==i.returnValue)&&(i.returnValue=!0)}for(i=[],r=e.b;r;r=r.parentNode)i.push(r);for(t=t.type,r=i.length-1;0<=r;r--){e.b=i[r];var o=dn(i[r],t,!0,e);n=n&&o}for(r=0;r<i.length;r++)e.b=i[r],o=dn(i[r],t,!1,e),n=n&&o}return n}return vn(t,new Qe(e,this))}function yn(t){return(t=t[an])instanceof nn?t:null}var _n=\"__closure_events_fn_\"+(1e9*Math.random()>>>0);function mn(t){return d(t)?t:(t[_n]||(t[_n]=function(e){return t.handleEvent(e)}),t[_n])}function bn(){We.call(this),this.u=new nn(this),this.Yb=this,this.eb=null}function wn(t,e,n,i,r){t.u.add(String(e),n,!1,i,r)}function En(t,e,n,i,r){t.u.add(String(e),n,!0,i,r)}function Cn(t,e,n,i){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var r=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ua&&a.capture==n){var s=a.listener,u=a.Ta||a.src;a.Na&&rn(t.u,a),r=!1!==s.call(u,i)&&r}}return r&&!i.defaultPrevented}function Tn(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||\"function\"!=typeof t.handleEvent)throw Error(\"Invalid listener argument\");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Sn(t){var e=null;return new be((function(n,i){-1==(e=Tn((function(){n(void 0)}),t))&&i(Error(\"Failed to schedule timer.\"))})).o((function(t){throw u.clearTimeout(e),t}))}function In(t){if(t.V&&\"function\"==typeof t.V)return t.V();if(\"string\"==typeof t)return t.split(\"\");if(f(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function xn(t){if(t.X&&\"function\"==typeof t.X)return t.X();if(!t.V||\"function\"!=typeof t.V){if(f(t)||\"string\"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var i in e=[],n=0,t)e[n++]=i;return e}}function Pn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error(\"Uneven number of arguments\");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(t)if(t instanceof Pn)for(n=t.X(),i=0;i<n.length;i++)this.set(n[i],t.get(n[i]));else for(i in t)this.set(i,t[i])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var i=t.a[e];On(t.b,i)&&(t.a[n++]=i),e++}t.a.length=n}if(t.c!=t.a.length){var r={};for(n=e=0;e<t.a.length;)On(r,i=t.a[e])||(t.a[n++]=i,r[i]=1),e++;t.a.length=n}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(bn,We),bn.prototype[$e]=!0,bn.prototype.addEventListener=function(t,e,n,i){un(this,t,e,n,i)},bn.prototype.removeEventListener=function(t,e,n,i){cn(this,t,e,n,i)},bn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var i=t.type||t;if(\"string\"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var r=t;gt(t=new Ye(i,n),r)}if(r=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];r=Cn(a,i,!0,t)&&r}if(r=Cn(a=t.b=n,i,!0,t)&&r,r=Cn(a,i,!1,t)&&r,e)for(o=0;o<e.length;o++)r=Cn(a=t.b=e[o],i,!1,t)&&r;return r},bn.prototype.Ba=function(){if(bn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],i=0;i<n.length;i++)en(n[i]);delete e.a[t],e.b--}}this.eb=null},(e=Pn.prototype).V=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.X=function(){return Rn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return On(this.b,t)?this.b[t]:e},e.set=function(t,e){On(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.X(),i=0;i<n.length;i++){var r=n[i],o=this.get(r);t.call(e,o,r,this)}};var An=/^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\\\#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;function Nn(t,e){var n;this.b=this.i=this.f=\"\",this.l=null,this.g=this.c=\"\",this.h=!1,t instanceof Nn?(this.h=void 0!==e?e:t.h,kn(this,t.f),this.i=t.i,this.b=t.b,Dn(this,t.l),this.c=t.c,Ln(this,ti(t.a)),this.g=t.g):t&&(n=String(t).match(An))?(this.h=!!e,kn(this,n[1]||\"\",!0),this.i=Vn(n[2]||\"\"),this.b=Vn(n[3]||\"\",!0),Dn(this,n[4]),this.c=Vn(n[5]||\"\",!0),Ln(this,n[6]||\"\",!0),this.g=Vn(n[7]||\"\")):(this.h=!!e,this.a=new Xn(null,this.h))}function kn(t,e,n){t.f=n?Vn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,\"\"))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error(\"Bad port number \"+e);t.l=e}else t.l=null}function Ln(t,e,n){e instanceof Xn?(t.a=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Wn(e,Gn)),t.a=new Xn(e,t.h))}function Fn(t,e,n){t.a.set(e,n)}function Mn(t,e){return t.a.get(e)}function jn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Un(t,e){var n=new Nn(null,void 0);return kn(n,\"https\"),t&&(n.b=t),e&&(n.c=e),n}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,\"%2525\")):decodeURIComponent(t):\"\"}function Wn(t,e,n){return\"string\"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),t):null}function qn(t){return\"%\"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Wn(e,zn,!0),\":\");var n=this.b;return(n||\"file\"==e)&&(t.push(\"//\"),(e=this.i)&&t.push(Wn(e,zn,!0),\"@\"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,\"%$1\")),null!=(n=this.l)&&t.push(\":\",String(n))),(n=this.c)&&(this.b&&\"/\"!=n.charAt(0)&&t.push(\"/\"),t.push(Wn(n,\"/\"==n.charAt(0)?Hn:Kn,!0))),(n=this.a.toString())&&t.push(\"?\",n),(n=this.g)&&t.push(\"#\",Wn(n,Bn)),t.join(\"\")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.f;n?kn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var i=t.c;if(n)Dn(e,t.l);else if(n=!!t.c){if(\"/\"!=i.charAt(0))if(this.b&&!this.c)i=\"/\"+i;else{var r=e.c.lastIndexOf(\"/\");-1!=r&&(i=e.c.substr(0,r+1)+i)}if(\"..\"==(r=i)||\".\"==r)i=\"\";else if(st(r,\"./\")||st(r,\"/.\")){i=0==r.lastIndexOf(\"/\",0),r=r.split(\"/\");for(var o=[],a=0;a<r.length;){var s=r[a++];\".\"==s?i&&a==r.length&&o.push(\"\"):\"..\"==s?((1<o.length||1==o.length&&\"\"!=o[0])&&o.pop(),i&&a==r.length&&o.push(\"\")):(o.push(s),i=!0)}i=o.join(\"/\")}else i=r}return n?e.c=i:n=\"\"!==t.a.toString(),n?Ln(e,ti(t.a)):n=!!t.g,n&&(e.g=t.g),e};var zn=/[#\\/\\?@]/g,Kn=/[#\\?:]/g,Hn=/[#\\?]/g,Gn=/[#\\?@]/g,Bn=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new Pn,t.b=0,t.c&&function(t,e){if(t){t=t.split(\"&\");for(var n=0;n<t.length;n++){var i=t[n].indexOf(\"=\"),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];e(o,r?decodeURIComponent(r.replace(/\\+/g,\" \")):\"\")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\\+/g,\" \")),n)})))}function Qn(t){var e=xn(t);if(void 0===e)throw Error(\"Keys are undefined\");var n=new Xn(null,void 0);t=In(t);for(var i=0;i<e.length;i++){var r=e[i],o=t[i];Array.isArray(o)?Jn(n,r,o):n.add(r,o)}return n}function Zn(t,e){Yn(t),e=ei(t,e),On(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,On((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function $n(t,e){return Yn(t),e=ei(t,e),On(t.a.b,e)}function Jn(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(ei(t,e),Z(n)),t.b+=n.length)}function ti(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new Pn(t.a),e.b=t.b),e}function ei(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ni(t){var e=[];return function t(e,n,i){if(null==n)i.push(\"null\");else{if(\"object\"==typeof n){if(Array.isArray(n)){var r=n;n=r.length,i.push(\"[\");for(var o=\"\",a=0;a<n;a++)i.push(o),t(e,r[a],i),o=\",\";return void i.push(\"]\")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(r in i.push(\"{\"),o=\"\",n)Object.prototype.hasOwnProperty.call(n,r)&&(\"function\"!=typeof(a=n[r])&&(i.push(o),ai(r,i),i.push(\":\"),t(e,a,i),o=\",\"));return void i.push(\"}\")}n=n.valueOf()}switch(typeof n){case\"string\":ai(n,i);break;case\"number\":i.push(isFinite(n)&&!isNaN(n)?String(n):\"null\");break;case\"boolean\":i.push(String(n));break;case\"function\":i.push(\"null\");break;default:throw Error(\"Unknown type: \"+typeof n)}}}(new ii,t,e),e.join(\"\")}function ii(){}(e=Xn.prototype).add=function(t,e){Yn(this),this.c=null,t=ei(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Yn(this),this.a.forEach((function(n,i){z(n,(function(n){t.call(e,n,i,this)}),this)}),this)},e.X=function(){Yn(this);for(var t=this.a.V(),e=this.a.X(),n=[],i=0;i<e.length;i++)for(var r=t[i],o=0;o<r.length;o++)n.push(e[i]);return n},e.V=function(t){Yn(this);var e=[];if(\"string\"==typeof t)$n(this,t)&&(e=Q(e,this.a.get(ei(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},e.set=function(t,e){return Yn(this),this.c=null,$n(this,t=ei(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return\"\";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var i=e[n],r=encodeURIComponent(String(i));i=this.V(i);for(var o=0;o<i.length;o++){var a=r;\"\"!==i[o]&&(a+=\"=\"+encodeURIComponent(String(i[o]))),t.push(a)}}return this.c=t.join(\"&\")};var ri={'\"':'\\\\\"',\"\\\\\":\"\\\\\\\\\",\"/\":\"\\\\/\",\"\\b\":\"\\\\b\",\"\\f\":\"\\\\f\",\"\\n\":\"\\\\n\",\"\\r\":\"\\\\r\",\"\\t\":\"\\\\t\",\"\\v\":\"\\\\u000b\"},oi=/\\uffff/.test(\"￿\")?/[\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g:/[\\\\\"\\x00-\\x1f\\x7f-\\xff]/g;function ai(t,e){e.push('\"',t.replace(oi,(function(t){var e=ri[t];return e||(e=\"\\\\u\"+(65536|t.charCodeAt(0)).toString(16).substr(1),ri[t]=e),e})),'\"')}function si(){var t=Ii();return Bt&&!!ne&&11==ne||/Edge\\/\\d+/.test(t)}function ui(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||\"\"}function hi(t,e){e=e||u.window;var n=\"about:blank\";t&&(n=At(kt(t))),e.location.href=n}function li(t){return!!((t=(t||Ii()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ci(t){t=t||u.window;try{t.close()}catch(t){}}function pi(t,e,n){var i=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var r=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<r?r:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ii().toLowerCase(),i&&(e.target=i,st(n,\"crios/\")&&(e.target=\"_blank\")),Ci(Ii())==wi&&(t=t||\"http://localhost\",e.scrollbars=!0),n=t||\"\",(t=e)||(t={}),i=window,e=n instanceof Ot?n:kt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,r=[],t)switch(a){case\"width\":case\"height\":case\"top\":case\"left\":r.push(a+\"=\"+t[a]);break;case\"target\":case\"noopener\":case\"noreferrer\":break;default:r.push(a+\"=\"+(t[a]?1:0))}var a=r.join(\",\");if((ct(\"iPhone\")&&!ct(\"iPod\")&&!ct(\"iPad\")||ct(\"iPad\")||ct(\"iPod\"))&&i.navigator&&i.navigator.standalone&&n&&\"_self\"!=n?(yt(a=pe(document,\"A\"),\"HTMLAnchorElement\"),e instanceof Ot||e instanceof Ot||(e=\"object\"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e=\"about:invalid#zClosurez\"),e=new Ot(Lt,e)),a.href=At(e),a.setAttribute(\"target\",n),t.noreferrer&&a.setAttribute(\"rel\",\"noreferrer\"),(t=document.createEvent(\"MouseEvent\")).initMouseEvent(\"click\",!0,!0,i,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=i.open(\"\",n,a),t=At(e),a&&(Yt&&st(t,\";\")&&(t=\"'\"+t.replace(/'/g,\"%27\")+\"'\"),a.opener=null,t=Ut('<meta name=\"referrer\" content=\"no-referrer\"><meta http-equiv=\"refresh\" content=\"0; url='+qt(t)+'\">'),i=a.document)&&(i.write(Mt(t)),i.close())):(a=i.open(At(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var fi=/^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/,di=/^[^@]+@[^@]+$/;function vi(){var t=null;return new be((function(e){\"complete\"==u.document.readyState?e():(t=function(){e()},ln(window,\"load\",t))})).o((function(e){throw cn(window,\"load\",t),e}))}function gi(t){return t=t||Ii(),!(\"file:\"!==Ai()&&\"ionic:\"!==Ai()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yi(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function _i(){return void 0!==u.WorkerGlobalScope&&\"function\"==typeof u.importScripts}function mi(){return i.a.INTERNAL.hasOwnProperty(\"reactNative\")?\"ReactNative\":i.a.INTERNAL.hasOwnProperty(\"node\")?\"Node\":_i()?\"Worker\":\"Browser\"}function bi(){var t=mi();return\"ReactNative\"===t||\"Node\"===t}var wi=\"Firefox\",Ei=\"Chrome\";function Ci(t){var e=t.toLowerCase();return st(e,\"opera/\")||st(e,\"opr/\")||st(e,\"opios/\")?\"Opera\":st(e,\"iemobile\")?\"IEMobile\":st(e,\"msie\")||st(e,\"trident/\")?\"IE\":st(e,\"edge/\")?\"Edge\":st(e,\"firefox/\")?wi:st(e,\"silk/\")?\"Silk\":st(e,\"blackberry\")?\"Blackberry\":st(e,\"webos\")?\"Webos\":!st(e,\"safari/\")||st(e,\"chrome/\")||st(e,\"crios/\")||st(e,\"android\")?!st(e,\"chrome/\")&&!st(e,\"crios/\")||st(e,\"edge/\")?st(e,\"android\")?\"Android\":(t=t.match(/([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/))&&2==t.length?t[1]:\"Other\":Ei:\"Safari\"}var Ti={jd:\"FirebaseCore-web\",ld:\"FirebaseUI-web\"};function Si(t,e){e=e||[];var n,i=[],r={};for(n in Ti)r[Ti[n]]=!0;for(n=0;n<e.length;n++)void 0!==r[e[n]]&&(delete r[e[n]],i.push(e[n]));return i.sort(),(e=i).length||(e=[\"FirebaseCore-web\"]),\"Browser\"===(i=mi())?i=Ci(r=Ii()):\"Worker\"===i&&(i=Ci(r=Ii())+\"-\"+i),i+\"/JsCore/\"+t+\"/\"+e.join(\",\")}function Ii(){return u.navigator&&u.navigator.userAgent||\"\"}function xi(t,e){t=t.split(\".\"),e=e||u;for(var n=0;n<t.length&&\"object\"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pi(){try{var t=u.localStorage,e=Fi();if(t)return t.setItem(e,\"1\"),t.removeItem(e),!si()||!!u.indexedDB}catch(t){return _i()&&!!u.indexedDB}return!1}function Ri(){return(Oi()||\"chrome-extension:\"===Ai()||gi())&&!bi()&&Pi()&&!_i()}function Oi(){return\"http:\"===Ai()||\"https:\"===Ai()}function Ai(){return u.location&&u.location.protocol||null}function Ni(t){return!li(t=t||Ii())&&Ci(t)!=wi}function ki(t){return void 0===t?null:ni(t)}function Di(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Li(t){if(null!==t)return JSON.parse(t)}function Fi(t){return t||Math.floor(1e9*Math.random()).toString()}function Mi(t){return\"Safari\"!=Ci(t=t||Ii())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function ji(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ui(t,e){if(t>e)throw Error(\"Short delay should be less than long delay!\");this.a=t,this.c=e,t=Ii(),e=mi(),this.b=li(t)||\"ReactNative\"===e}function Vi(){var t=u.document;return!t||void 0===t.visibilityState||\"visible\"==t.visibilityState}function Wi(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function qi(){return!(!xi(\"fireauth.oauthhelper\",u)&&!xi(\"fireauth.iframe\",u))}Ui.prototype.get=function(){var t=u.navigator;return!t||\"boolean\"!=typeof t.onLine||!Oi()&&\"chrome-extension:\"!==Ai()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zi,Ki={};function Hi(t){Ki[t]||(Ki[t]=!0,\"undefined\"!=typeof console&&\"function\"==typeof console.warn&&console.warn(t))}try{var Gi={};Object.defineProperty(Gi,\"abcd\",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Gi,\"abcd\",{configurable:!0,enumerable:!0,value:2}),zi=2==Gi.abcd}catch(Ht){zi=!1}function Bi(t,e,n){zi?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xi(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Bi(t,n,e[n])}function Yi(t){var e={};return Xi(e,t),e}function Qi(t){var e=t;if(\"object\"==typeof t&&null!=t)for(var n in e=\"length\"in t?[]:{},t)Bi(e,n,Qi(t[n]));return e}function Zi(t){var e=t&&(t[nr]?\"phone\":null);if(!(e&&t&&t[er]))throw new S(\"internal-error\",\"Internal assert: invalid MultiFactorInfo object\");Bi(this,\"uid\",t[er]),Bi(this,\"displayName\",t[Ji]||null);var n=null;t[tr]&&(n=new Date(t[tr]).toUTCString()),Bi(this,\"enrollmentTime\",n),Bi(this,\"factorId\",e)}function $i(t){try{var e=new ir(t)}catch(t){e=null}return e}Zi.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Ji=\"displayName\",tr=\"enrolledAt\",er=\"mfaEnrollmentId\",nr=\"phoneInfo\";function ir(t){Zi.call(this,t),Bi(this,\"phoneNumber\",t[nr])}function rr(t){var e={},n=t[ur],i=t[lr],r=t[cr];if(t=$i(t[hr]),!r||r!=ar&&r!=sr&&!n||r==sr&&!i||r==or&&!t)throw Error(\"Invalid checkActionCode response!\");r==sr?(e[fr]=n||null,e[vr]=n||null,e[pr]=i):(e[fr]=i||null,e[vr]=i||null,e[pr]=n||null),e[dr]=t||null,Bi(this,yr,r),Bi(this,gr,Qi(e))}T(ir,Zi),ir.prototype.v=function(){var t=ir.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var or=\"REVERT_SECOND_FACTOR_ADDITION\",ar=\"EMAIL_SIGNIN\",sr=\"VERIFY_AND_CHANGE_EMAIL\",ur=\"email\",hr=\"mfaInfo\",lr=\"newEmail\",cr=\"requestType\",pr=\"email\",fr=\"fromEmail\",dr=\"multiFactorInfo\",vr=\"previousEmail\",gr=\"data\",yr=\"operation\";function _r(t){var e=Mn(t=jn(t),mr)||null,n=Mn(t,br)||null,i=Mn(t,Cr)||null;if(i=i&&Sr[i]||null,!e||!n||!i)throw new S(\"argument-error\",mr+\", \"+br+\"and \"+Cr+\" are required in a valid action code URL.\");Xi(this,{apiKey:e,operation:i,code:n,continueUrl:Mn(t,wr)||null,languageCode:Mn(t,Er)||null,tenantId:Mn(t,Tr)||null})}var mr=\"apiKey\",br=\"oobCode\",wr=\"continueUrl\",Er=\"languageCode\",Cr=\"mode\",Tr=\"tenantId\",Sr={recoverEmail:\"RECOVER_EMAIL\",resetPassword:\"PASSWORD_RESET\",revertSecondFactorAddition:or,signIn:ar,verifyAndChangeEmail:sr,verifyEmail:\"VERIFY_EMAIL\"};function Ir(t){try{return new _r(t)}catch(t){return null}}function xr(t){var e=t[Nr];if(void 0===e)throw new S(\"missing-continue-uri\");if(\"string\"!=typeof e||\"string\"==typeof e&&!e.length)throw new S(\"invalid-continue-uri\");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Pr];if(n&&\"object\"==typeof n){e=n[Lr];var i=n[kr];if(n=n[Dr],\"string\"==typeof e&&e.length){if(this.a=e,void 0!==i&&\"boolean\"!=typeof i)throw new S(\"argument-error\",kr+\" property must be a boolean when specified.\");if(this.g=!!i,void 0!==n&&(\"string\"!=typeof n||\"string\"==typeof n&&!n.length))throw new S(\"argument-error\",Dr+\" property must be a non empty string when specified.\");this.b=n||null}else{if(void 0!==e)throw new S(\"argument-error\",Lr+\" property must be a non empty string when specified.\");if(void 0!==i||void 0!==n)throw new S(\"missing-android-pkg-name\")}}else if(void 0!==n)throw new S(\"argument-error\",Pr+\" property must be a non null object when specified.\");if(this.f=null,(e=t[Ar])&&\"object\"==typeof e){if(\"string\"==typeof(e=e[Fr])&&e.length)this.f=e;else if(void 0!==e)throw new S(\"argument-error\",Fr+\" property must be a non empty string when specified.\")}else if(void 0!==e)throw new S(\"argument-error\",Ar+\" property must be a non null object when specified.\");if(void 0!==(e=t[Or])&&\"boolean\"!=typeof e)throw new S(\"argument-error\",Or+\" property must be a boolean when specified.\");if(this.c=!!e,void 0!==(t=t[Rr])&&(\"string\"!=typeof t||\"string\"==typeof t&&!t.length))throw new S(\"argument-error\",Rr+\" property must be a non empty string when specified.\");this.i=t||null}var Pr=\"android\",Rr=\"dynamicLinkDomain\",Or=\"handleCodeInApp\",Ar=\"iOS\",Nr=\"url\",kr=\"installApp\",Dr=\"minimumVersion\",Lr=\"packageName\",Fr=\"bundleId\";function Mr(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var jr=null;function Ur(t){var e=\"\";return function(t,e){function n(e){for(;i<t.length;){var n=t.charAt(i++),r=jr[n];if(null!=r)return r;if(!/^[\\s\\xa0]*$/.test(n))throw Error(\"Unknown base64 encoding at char: \"+n)}return e}!function(){if(!jr){jr={};for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\".split(\"\"),e=[\"+/=\",\"+/\",\"-_=\",\"-_.\",\"-_\"],n=0;5>n;n++)for(var i=t.concat(e[n].split(\"\")),r=0;r<i.length;r++){var o=i[r];void 0===jr[o]&&(jr[o]=r)}}}();for(var i=0;;){var r=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===r)break;e(r<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}function Vr(t){var e=qr(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error(\"Invalid JWT\");this.g=t,this.c=e.exp,this.h=e.sub,C(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||\"anonymous\"==this.a}function Wr(t){try{return new Vr(t)}catch(t){return null}}function qr(t){if(!t)return null;if(3!=(t=t.split(\".\")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=\".\";try{return JSON.parse(Ur(t))}catch(t){}return null}Vr.prototype.S=function(){return this.f},Vr.prototype.i=function(){return this.b},Vr.prototype.toString=function(){return this.g};var zr=\"oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version\".split(\" \"),Kr=[\"client_id\",\"response_type\",\"scope\",\"redirect_uri\",\"state\"],Hr={kd:{Ha:\"locale\",ta:700,sa:600,ea:\"facebook.com\",Va:Kr},md:{Ha:null,ta:500,sa:750,ea:\"github.com\",Va:Kr},nd:{Ha:\"hl\",ta:515,sa:680,ea:\"google.com\",Va:Kr},td:{Ha:\"lang\",ta:485,sa:705,ea:\"twitter.com\",Va:zr},gd:{Ha:\"locale\",ta:600,sa:600,ea:\"apple.com\",Va:[]}};function Gr(t){for(var e in Hr)if(Hr[e].ea==t)return Hr[e];return null}function Br(t){var e={};e[\"facebook.com\"]=$r,e[\"google.com\"]=to,e[\"github.com\"]=Jr,e[\"twitter.com\"]=eo;var n=t&&t[Yr];try{if(n)return e[n]?new e[n](t):new Zr(t);if(void 0!==t[Xr])return new Qr(t)}catch(t){}return null}var Xr=\"idToken\",Yr=\"providerId\";function Qr(t){var e=t[Yr];if(!e&&t[Xr]){var n=Wr(t[Xr]);n&&n.a&&(e=n.a)}if(!e)throw Error(\"Invalid additional user info!\");\"anonymous\"!=e&&\"custom\"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:\"identitytoolkit#SignupNewUserResponse\"===t.kind&&(n=!0),Bi(this,\"providerId\",e),Bi(this,\"isNewUser\",n)}function Zr(t){Qr.call(this,t),Bi(this,\"profile\",Qi((t=Li(t.rawUserInfo||\"{}\"))||{}))}function $r(t){if(Zr.call(this,t),\"facebook.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}function Jr(t){if(Zr.call(this,t),\"github.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");Bi(this,\"username\",this.profile&&this.profile.login||null)}function to(t){if(Zr.call(this,t),\"google.com\"!=this.providerId)throw Error(\"Invalid provider ID!\")}function eo(t){if(Zr.call(this,t),\"twitter.com\"!=this.providerId)throw Error(\"Invalid provider ID!\");Bi(this,\"username\",t.screenName||null)}function no(t){var e=jn(t),n=Mn(e,\"link\"),i=Mn(jn(n),\"link\");return e=Mn(e,\"deep_link_id\"),Mn(jn(e),\"link\")||e||i||n||t}function io(t,e){if(!t&&!e)throw new S(\"internal-error\",\"Internal assert: no raw session string available\");if(t&&e)throw new S(\"internal-error\",\"Internal assert: unable to determine the session type\");this.a=t||null,this.b=e||null,this.type=this.a?ro:oo}T(Zr,Qr),T($r,Zr),T(Jr,Zr),T(to,Zr),T(eo,Zr);var ro=\"enroll\",oo=\"signin\";function ao(){}function so(t,e){return t.then((function(t){if(t[Ya]){var n=Wr(t[Ya]);if(!n||e!=n.h)throw new S(\"user-mismatch\");return t}throw new S(\"user-mismatch\")})).o((function(t){throw t&&t.code&&t.code==P+\"user-not-found\"?new S(\"user-mismatch\"):t}))}function uo(t,e){if(!e)throw new S(\"internal-error\",\"failed to construct a credential\");this.a=e,Bi(this,\"providerId\",t),Bi(this,\"signInMethod\",t)}function ho(t){return{pendingToken:t.a,requestUri:\"http://localhost\"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf(\"saml.\")&&t.pendingToken)try{return new uo(t.providerId,t.pendingToken)}catch(t){}return null}function co(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Bi(this,\"idToken\",e.idToken),e.accessToken&&Bi(this,\"accessToken\",e.accessToken),e.nonce&&!e.pendingToken&&Bi(this,\"nonce\",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new S(\"internal-error\",\"failed to construct a credential\");Bi(this,\"accessToken\",e.oauthToken),Bi(this,\"secret\",e.oauthTokenSecret)}Bi(this,\"providerId\",t),Bi(this,\"signInMethod\",n)}function po(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Qn(e).toString(),requestUri:\"http://localhost\"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function fo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new co(t.providerId,e,t.signInMethod)}catch(t){}}return null}function vo(t,e){this.Oc=e||[],Xi(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Gr(t)||{}).Ha||null,this.kb=null}function go(t){if(\"string\"!=typeof t||0!=t.indexOf(\"saml.\"))throw new S(\"argument-error\",'SAML provider IDs must be prefixed with \"saml.\"');vo.call(this,t,[])}function yo(t){vo.call(this,t,Kr),this.a=[]}function _o(){yo.call(this,\"facebook.com\")}function mo(t){if(!t)throw new S(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var e=t;return v(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function bo(){yo.call(this,\"github.com\")}function wo(t){if(!t)throw new S(\"argument-error\",\"credential failed: expected 1 argument (the OAuth access token).\");var e=t;return v(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function Eo(){yo.call(this,\"google.com\"),this.Aa(\"profile\")}function Co(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function To(){vo.call(this,\"twitter.com\",zr)}function So(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new S(\"argument-error\",\"credential failed: expected 2 arguments (the OAuth access token and secret).\");return new co(\"twitter.com\",n,\"twitter.com\")}function Io(t,e,n){this.a=t,this.f=e,Bi(this,\"providerId\",\"password\"),Bi(this,\"signInMethod\",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(t){return t&&t.email&&t.password?new Io(t.email,t.password,t.signInMethod):null}function Po(){Xi(this,{providerId:\"password\",isOAuthProvider:!1})}function Ro(t,e){if(!(e=Oo(e)))throw new S(\"argument-error\",\"Invalid email link!\");return new Io(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Oo(t){return(t=Ir(t=no(t)))&&t.operation===ar?t:null}function Ao(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new S(\"internal-error\");this.a=t,Bi(this,\"providerId\",\"phone\"),this.ea=\"phone\",Bi(this,\"signInMethod\",\"phone\")}function No(t){if(t&&\"phone\"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return z([\"verificationId\",\"verificationCode\",\"temporaryProof\",\"phoneNumber\"],(function(n){t[n]&&(e[n]=t[n])})),new Ao(e)}return null}function ko(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Do(t){try{this.a=t||i.a.auth()}catch(t){throw new S(\"argument-error\",\"Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().\")}Xi(this,{providerId:\"phone\",isOAuthProvider:!1})}function Lo(t,e){if(!t)throw new S(\"missing-verification-id\");if(!e)throw new S(\"missing-verification-code\");return new Ao({bb:t,ab:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Ao({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||\"password\"===e)return null;var n=t&&t.oauthAccessToken,i=t&&t.oauthTokenSecret,r=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case\"google.com\":return Co(o,n);case\"facebook.com\":return mo(n);case\"github.com\":return wo(n);case\"twitter.com\":return So(n,i);default:return n||i||o||a?a?0==e.indexOf(\"saml.\")?new uo(e,a):new co(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:r}):null}}catch(t){return null}}function Mo(t){if(!t.isOAuthProvider)throw new S(\"invalid-oauth-provider\")}function jo(t,e,n,i,r,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=i||null,this.i=o||null,this.h=a||null,this.a=r||null,!this.g&&!this.a)throw new S(\"invalid-auth-event\");if(this.g&&this.a)throw new S(\"invalid-auth-event\");if(this.g&&!this.f)throw new S(\"invalid-auth-event\")}function Uo(t){return(t=t||{}).type?new jo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function Vo(){this.b=null,this.a=[]}io.prototype.Fa=function(){return this.a?xe(this.a):xe(this.b)},io.prototype.v=function(){return this.type==ro?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ao.prototype.ia=function(){},ao.prototype.b=function(){},ao.prototype.c=function(){},ao.prototype.v=function(){},uo.prototype.ia=function(t){return vs(t,ho(this))},uo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,gs(t,n)},uo.prototype.c=function(t,e){return so(ys(t,ho(this)),e)},uo.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},co.prototype.ia=function(t){return vs(t,po(this))},co.prototype.b=function(t,e){var n=po(this);return n.idToken=e,gs(t,n)},co.prototype.c=function(t,e){return so(ys(t,po(this)),e)},co.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ia=function(t){return this.Fb=dt(t),this},T(go,vo),T(yo,vo),yo.prototype.Aa=function(t){return B(this.a,t)||this.a.push(t),this},yo.prototype.Nb=function(){return Z(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new S(\"argument-error\",\"credential failed: must provide the ID token and/or the access token.\");return new co(this.providerId,n,this.providerId)},T(_o,yo),Bi(_o,\"PROVIDER_ID\",\"facebook.com\"),Bi(_o,\"FACEBOOK_SIGN_IN_METHOD\",\"facebook.com\"),T(bo,yo),Bi(bo,\"PROVIDER_ID\",\"github.com\"),Bi(bo,\"GITHUB_SIGN_IN_METHOD\",\"github.com\"),T(Eo,yo),Bi(Eo,\"PROVIDER_ID\",\"google.com\"),Bi(Eo,\"GOOGLE_SIGN_IN_METHOD\",\"google.com\"),T(To,vo),Bi(To,\"PROVIDER_ID\",\"twitter.com\"),Bi(To,\"TWITTER_SIGN_IN_METHOD\",\"twitter.com\"),Io.prototype.ia=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?$s(t,Ss,{email:this.a,oobCode:this.f}):$s(t,Bs,{email:this.a,password:this.f})},Io.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?$s(t,Is,{idToken:e,email:this.a,oobCode:this.f}):$s(t,Us,{idToken:e,email:this.a,password:this.f})},Io.prototype.c=function(t,e){return so(this.ia(t),e)},Io.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xi(Po,{PROVIDER_ID:\"password\"}),Xi(Po,{EMAIL_LINK_SIGN_IN_METHOD:\"emailLink\"}),Xi(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:\"password\"}),Ao.prototype.ia=function(t){return t.cb(ko(this))},Ao.prototype.b=function(t,e){var n=ko(this);return n.idToken=e,$s(t,Ys,n)},Ao.prototype.c=function(t,e){var n=ko(this);return n.operation=\"REAUTH\",so(t=$s(t,Qs,n),e)},Ao.prototype.v=function(){var t={providerId:\"phone\"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Do.prototype.cb=function(t,e){var n=this.a.b;return xe(e.verify()).then((function(i){if(\"string\"!=typeof i)throw new S(\"argument-error\",\"An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.\");switch(e.type){case\"recaptcha\":var r=v(t)?t.session:null,o=v(t)?t.phoneNumber:t;return(r&&r.type==ro?r.Fa().then((function(t){return function(t,e){return $s(t,Ws,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:i}})})):r&&r.type==oo?r.Fa().then((function(e){return function(t,e){return $s(t,qs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:i}})})):function(t,e){return $s(t,Ms,e)}(n,{phoneNumber:o,recaptchaToken:i})).then((function(t){return\"function\"==typeof e.reset&&e.reset(),t}),(function(t){throw\"function\"==typeof e.reset&&e.reset(),t}));default:throw new S(\"argument-error\",'Only firebase.auth.ApplicationVerifiers with type=\"recaptcha\" are currently supported.')}}))},Xi(Do,{PROVIDER_ID:\"phone\"}),Xi(Do,{PHONE_SIGN_IN_METHOD:\"phone\"}),jo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join(\"-\")},jo.prototype.S=function(){return this.h},jo.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Wo,qo=null;function zo(t){var e=\"unauthorized-domain\",n=void 0,i=jn(t);t=i.b,\"chrome-extension\"==(i=i.f)?n=Wt(\"This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",t):\"http\"==i||\"https\"==i?n=Wt(\"This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.\",t):e=\"operation-not-supported-in-this-environment\",S.call(this,e,n)}function Ko(t,e,n){S.call(this,t,n),(t=e||{}).Gb&&Bi(this,\"email\",t.Gb),t.da&&Bi(this,\"phoneNumber\",t.da),t.credential&&Bi(this,\"credential\",t.credential),t.Wb&&Bi(this,\"tenantId\",t.Wb)}function Ho(t){if(t.code){var e=t.code||\"\";0==e.indexOf(P)&&(e=e.substring(P.length));var n={credential:Fo(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new S(e,t.message||void 0);return new Ko(e,n,t.message)}return null}function Go(){}function Bo(t){return t.c||(t.c=t.b())}function Xo(){}function Yo(t){if(!t.f&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var e=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],n=0;n<e.length;n++){var i=e[n];try{return new ActiveXObject(i),t.f=i}catch(t){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\")}return t.f}function Qo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response=\"\",this.status=-1,this.statusText=\"\",this.a.onload=w(this.oc,this),this.a.onerror=w(this.Pb,this),this.a.onprogress=w(this.pc,this),this.a.ontimeout=w(this.tc,this)}function $o(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Jo(t,e,n){this.reset(t,e,n,void 0,void 0)}T(zo,S),T(Ko,S),Ko.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&gt(t,e),t},Ko.prototype.toJSON=function(){return this.v()},Go.prototype.c=null,T(Xo,Go),Xo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Wo=new Xo,T(Qo,Go),Qo.prototype.a=function(){var t=new XMLHttpRequest;if(\"withCredentials\"in t)return t;if(\"undefined\"!=typeof XDomainRequest)return new Zo;throw Error(\"Unsupported browser\")},Qo.prototype.b=function(){return{}},(e=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error(\"Only async requests are supported.\");this.a.open(t,e)},e.send=function(t){if(t){if(\"string\"!=typeof t)throw Error(\"Only string data is supported\");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return\"content-type\"==t.toLowerCase()?this.a.contentType:\"\"},e.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,$o(this,4)},e.Pb=function(){this.status=500,this.response=this.responseText=\"\",$o(this,4)},e.tc=function(){this.Pb()},e.pc=function(){this.status=200,$o(this,1)},e.getAllResponseHeaders=function(){return\"content-type: \"+this.a.contentType},Jo.prototype.a=null;function ta(t){this.f=t,this.b=this.c=this.a=null}function ea(t,e){this.name=t,this.value=e}Jo.prototype.reset=function(t,e,n,i,r){\"number\"==typeof r||0,i||C(),delete this.a},ea.prototype.toString=function(){return this.name};var na=new ea(\"SEVERE\",1e3),ia=new ea(\"WARNING\",900),ra=new ea(\"CONFIG\",700),oa=new ea(\"FINE\",500);ta.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(L(\"Root logger has no level set.\"),null)}(this).value)for(d(e)&&(e=e()),t=new Jo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var aa={},sa=null;function ua(t){var e;if(sa||(sa=new ta(\"\"),aa[\"\"]=sa,sa.c=ra),!(e=aa[t])){e=new ta(t);var n=t.lastIndexOf(\".\"),i=t.substr(n+1);(n=ua(t.substr(0,n))).b||(n.b={}),n.b[i]=e,e.a=n,aa[t]=e}return e}function ha(t,e){t&&t.log(oa,e,void 0)}function la(t){this.f=t}function ca(t){bn.call(this),this.s=t,this.readyState=pa,this.status=0,this.responseType=this.responseText=this.response=this.statusText=\"\",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m=\"GET\",this.g=\"\",this.a=!1,this.h=ua(\"goog.net.FetchXmlHttp\"),this.l=this.c=this.f=null}T(la,Go),la.prototype.a=function(){return new ca(this.f)},la.prototype.b=function(t){return function(){return t}}({}),T(ca,bn);var pa=0;function fa(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function da(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,va(t)}function va(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ga(t){bn.call(this),this.headers=new Pn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l=\"\",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ya,this.w=this.R=!1}(e=ca.prototype).open=function(t,e){if(this.readyState!=pa)throw this.abort(),Error(\"Error reopening a connection\");this.m=t,this.g=e,this.readyState=1,va(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error(\"need to call open() first. \");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},e.abort=function(){this.response=this.responseText=\"\",this.i=new Headers,this.status=0,this.c&&this.c.cancel(\"Request was aborted.\"),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,da(this,!1)),this.readyState=pa},e.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,va(this)),this.a&&(this.readyState=3,va(this),this.a&&(\"arraybuffer\"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==u.ReadableStream&&\"body\"in t?(this.response=this.responseText=\"\",this.c=t.body.getReader(),this.l=new TextDecoder,fa(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},e.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?da(this,!0):va(this),3==this.readyState&&fa(this)}},e.rc=function(t){this.a&&(this.response=this.responseText=t,da(this,!0))},e.qc=function(t){this.a&&(this.response=t,da(this,!0))},e.Sa=function(t){var e=this.h;e&&e.log(ia,\"Failed to fetch url \"+this.g,t instanceof Error?t:Error(t)),this.a&&da(this,!0)},e.setRequestHeader=function(t,e){this.i.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||\"\":((t=this.h)&&t.log(ia,\"Attempting to get response header but no headers have been received for url: \"+this.g,void 0),\"\")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(ia,\"Attempting to get all response headers but no headers have been received for url: \"+this.g,void 0),\"\"}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+\": \"+n[1]),n=e.next();return t.join(\"\\r\\n\")},T(ga,bn);var ya=\"\";ga.prototype.b=ua(\"goog.net.XhrIo\");var _a=/^https?$/i,ma=[\"POST\",\"PUT\"];function ba(t,e,n,i,r){if(t.a)throw Error(\"[goog.net.XhrIo] Object is active with another request=\"+t.l+\"; newUri=\"+e);n=n?n.toUpperCase():\"GET\",t.l=e,t.h=\"\",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Wo.a(),t.B=t.D?Bo(t.D):Bo(Wo),t.a.onreadystatechange=w(t.Sb,t);try{ha(t.b,Ra(t,\"Opening Xhr\")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return ha(t.b,Ra(t,\"Error opening Xhr: \"+e.message)),void Ea(t,e)}e=i||\"\";var o=new Pn(t.headers);r&&function(t,e){if(t.forEach&&\"function\"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||\"string\"==typeof t)z(t,e,void 0);else for(var n=xn(t),i=In(t),r=i.length,o=0;o<r;o++)e.call(void 0,i[o],n&&n[o],t)}(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=wa,n=t.length,i=\"string\"==typeof t?t.split(\"\"):t,r=0;r<n;r++)if(r in i&&e.call(void 0,i[r],r,t)){e=r;break t}e=-1}return 0>e?null:\"string\"==typeof t?t.charAt(e):t[e]}(o.X()),i=u.FormData&&e instanceof u.FormData,!B(ma,n)||r||i||o.set(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),\"withCredentials\"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ia(t),0<t.g&&(t.w=function(t){return Bt&&re(9)&&\"number\"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ha(t.b,Ra(t,\"Will abort after \"+t.g+\"ms if incomplete, xhr2 \"+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ka,t)):t.s=Tn(t.Ka,t.g,t)),ha(t.b,Ra(t,\"Sending request\")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ha(t.b,Ra(t,\"Send error: \"+e.message)),Ea(t,e)}}function wa(t){return\"content-type\"==t.toLowerCase()}function Ea(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ca(t),Sa(t)}function Ca(t){t.N||(t.N=!0,t.dispatchEvent(\"complete\"),t.dispatchEvent(\"error\"))}function Ta(t){if(t.c&&void 0!==s)if(t.B[1]&&4==xa(t)&&2==Pa(t))ha(t.b,Ra(t,\"Local request error detected and ignored\"));else if(t.i&&4==xa(t))Tn(t.Sb,0,t);else if(t.dispatchEvent(\"readystatechange\"),4==xa(t)){ha(t.b,Ra(t,\"Request complete\")),t.c=!1;try{var e,n=Pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break t;default:i=!1}if(!(e=i)){var r;if(r=0===n){var o=String(t.l).match(An)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}r=!_a.test(o?o.toLowerCase():\"\")}e=r}if(e)t.dispatchEvent(\"complete\"),t.dispatchEvent(\"success\");else{try{var h=2<xa(t)?t.a.statusText:\"\"}catch(e){ha(t.b,\"Can not get status: \"+e.message),h=\"\"}t.h=h+\" [\"+Pa(t)+\"]\",Ca(t)}}finally{Sa(t)}}}function Sa(t,e){if(t.a){Ia(t);var n=t.a,i=t.B[0]?c:null;t.a=null,t.B=null,e||t.dispatchEvent(\"ready\");try{n.onreadystatechange=i}catch(e){(t=t.b)&&t.log(na,\"Problem encountered resetting onreadystatechange: \"+e.message,void 0)}}}function Ia(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function xa(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<xa(t)?t.a.status:-1}catch(t){return-1}}function Ra(t,e){return e+\" [\"+t.P+\" \"+t.l+\" \"+Pa(t)+\"]\"}function Oa(t){var e=Wa;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Aa(t,e,n){t.a=!0,t.c=n,t.f=!e,La(t)}function Na(t){if(t.a){if(!t.u)throw new Fa(t);t.u=!1}}function ka(t,e,n,i){t.g.push([e,n,i]),t.a&&La(t)}function Da(t){return G(t.g,(function(t){return d(t[1])}))}function La(t){if(t.h&&t.a&&Da(t)){var e=t.h,n=Ua[e];n&&(u.clearTimeout(n.a),delete Ua[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var i=n=!1;t.g.length&&!t.i;){var r=t.g.shift(),o=r[0],a=r[1];if(r=r[2],o=t.f?a:o)try{var s=o.call(r||t.s,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(N(e)||\"function\"==typeof u.Promise&&e instanceof u.Promise)&&(i=!0,t.i=!0)}catch(i){e=i,t.f=!0,Da(t)||(n=!0)}}t.c=e,i&&(s=w(t.m,t,!0),i=w(t.m,t,!1),e instanceof Oa?(ka(e,s,i),e.B=!0):e.then(s,i)),n&&(e=new ja(e),Ua[e.a]=e,t.h=e.a)}function Fa(){k.call(this)}function Ma(){k.call(this)}function ja(t){this.a=u.setTimeout(w(this.c,this),0),this.b=t}(e=ga.prototype).Ka=function(){void 0!==s&&this.a&&(this.h=\"Timed out after \"+this.g+\"ms, aborting\",ha(this.b,Ra(this,this.h)),this.dispatchEvent(\"timeout\"),this.abort(8))},e.abort=function(){this.a&&this.c&&(ha(this.b,Ra(this,\"Aborting\")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent(\"complete\"),this.dispatchEvent(\"abort\"),Sa(this))},e.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Sa(this,!0)),ga.Za.Ba.call(this)},e.Sb=function(){this.wa||(this.O||this.i||this.f?Ta(this):this.Hc())},e.Hc=function(){Ta(this)},e.getResponse=function(){try{if(!this.a)return null;if(\"response\"in this.a)return this.a.response;switch(this.m){case ya:case\"text\":return this.a.responseText;case\"arraybuffer\":if(\"mozResponseArrayBuffer\"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(na,\"Response type \"+this.m+\" is not supported on this browser\",void 0),null}catch(t){return ha(this.b,\"Can not get response: \"+t.message),null}},Oa.prototype.cancel=function(t){if(this.a)this.c instanceof Oa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ma(this),Na(this),Aa(this,!1,t))}},Oa.prototype.m=function(t,e){this.i=!1,Aa(this,t,e)},Oa.prototype.then=function(t,e,n){var i,r,o=new be((function(t,e){i=t,r=e}));return ka(this,i,(function(t){t instanceof Ma?o.cancel():r(t)})),o.then(t,e,n)},Oa.prototype.$goog_Thenable=!0,T(Fa,k),Fa.prototype.message=\"Deferred has already fired\",Fa.prototype.name=\"AlreadyCalledError\",T(Ma,k),Ma.prototype.message=\"Deferred was canceled\",Ma.prototype.name=\"CanceledError\",ja.prototype.c=function(){throw delete Ua[this.a],this.b};var Ua={};function Va(t){var e={},n=e.document||document,i=Tt(t).toString(),r=pe(document,\"SCRIPT\"),o={Tb:r,Ka:void 0},a=new Oa(o),s=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){qa(r,!0);var t=new Ha(Ka,\"Timeout reached for loading script \"+i);Na(a),Aa(a,!1,t)}),c),o.Ka=s),r.onload=r.onreadystatechange=function(){r.readyState&&\"loaded\"!=r.readyState&&\"complete\"!=r.readyState||(qa(r,e.ud||!1,s),Na(a),Aa(a,!0,null))},r.onerror=function(){qa(r,!0,s);var t=new Ha(za,\"Error while loading script \"+i);Na(a),Aa(a,!1,t)},gt(o=e.attributes||{},{type:\"text/javascript\",charset:\"UTF-8\"}),se(r,o),function(t,e){yt(t,\"HTMLScriptElement\"),t.src=Tt(e),null===l&&(l=(e=(e=u.document).querySelector&&e.querySelector(\"script[nonce]\"))&&(e=e.nonce||e.getAttribute(\"nonce\"))&&h.test(e)?e:\"\"),(e=l)&&t.setAttribute(\"nonce\",e)}(r,t),function(t){var e;return(e=(t||document).getElementsByTagName(\"HEAD\"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(r),a}function Wa(){if(this&&this.Tb){var t=this.Tb;t&&\"SCRIPT\"==t.tagName&&qa(t,!0,this.Ka)}}function qa(t,e,n){null!=n&&u.clearTimeout(n),t.onload=c,t.onerror=c,t.onreadystatechange=c,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var za=0,Ka=1;function Ha(t,e){var n=\"Jsloader error (code #\"+t+\")\";e&&(n+=\": \"+e),k.call(this,n),this.code=t}function Ga(t){this.f=t}function Ba(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||\"https://securetoken.googleapis.com/v1/token\",this.m=t.secureTokenTimeout||Qa,this.g=dt(t.secureTokenHeaders||Za),this.h=t.firebaseEndpoint||\"https://www.googleapis.com/identitytoolkit/v3/relyingparty/\",this.l=t.identityPlatformEndpoint||\"https://identitytoolkit.googleapis.com/v2/\",this.i=t.firebaseTimeout||$a,this.a=dt(t.firebaseHeaders||Ja),n&&(this.a[\"X-Client-Version\"]=n,this.g[\"X-Client-Version\"]=n),n=\"Node\"==mi(),!(n=u.XMLHttpRequest||n&&i.a.INTERNAL.node&&i.a.INTERNAL.node.XMLHttpRequest)&&!_i())throw new S(\"internal-error\",\"The XMLHttpRequest compatibility library was not found.\");this.f=void 0,_i()?this.f=new la(self):bi()?this.f=new Ga(n):this.f=new Qo,this.b=null}T(Ha,k),T(Ga,Go),Ga.prototype.a=function(){return new this.f},Ga.prototype.b=function(){return{}};var Xa,Ya=\"idToken\",Qa=new Ui(3e4,6e4),Za={\"Content-Type\":\"application/x-www-form-urlencoded\"},$a=new Ui(3e4,6e4),Ja={\"Content-Type\":\"application/json\"};function ts(t,e){e?t.a[\"X-Firebase-Locale\"]=e:delete t.a[\"X-Firebase-Locale\"]}function es(t,e){e?(t.a[\"X-Client-Version\"]=e,t.g[\"X-Client-Version\"]=e):(delete t.a[\"X-Client-Version\"],delete t.g[\"X-Client-Version\"])}function ns(t,e,n,i,r,o,a){(function(){var t=Ii();return!((t=Ci(t)!=Ei?null:(t=t.match(/\\sChrome\\/(\\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Bt||!ne||9<ne)})()||_i()?t=w(t.w,t):(Xa||(Xa=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[rs]=function(){((window.gapi||{}).client||{}).request?t():e(Error(\"CORS_UNSUPPORTED\"))},function(t,e){ka(t,null,e,void 0)}(Va(St(is,{onload:rs})),(function(){e(Error(\"CORS_UNSUPPORTED\"))}))}}(t,e)}))),t=w(t.s,t)),t(e,n,i,r,o,a)}Ba.prototype.S=function(){return this.b},Ba.prototype.w=function(t,e,n,i,r,o){if(_i()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new S(\"operation-not-supported-in-this-environment\",\"fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.\");var a=new ga(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent(\"timeout\")}),o)}wn(a,\"complete\",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:\"\"}catch(e){return ha(t.b,\"Can not get responseText: \"+e.message),\"\"}}(this))||null}catch(e){t=null}e&&e(t)})),En(a,\"ready\",(function(){s&&clearTimeout(s),Ke(this)})),En(a,\"timeout\",(function(){s&&clearTimeout(s),Ke(this),e&&e(null)})),ba(a,t,n,i,r)};var is=new _t(wt,\"https://apis.google.com/js/client.js?onload=%{onload}\"),rs=\"__fcb\"+Math.floor(1e6*Math.random()).toString();function os(t,e,n,i,r,o,a){var s=jn(e+n);Fn(s,\"key\",t.c),a&&Fn(s,\"cb\",C().toString());var u=\"GET\"==i;if(u)for(var h in r)r.hasOwnProperty(h)&&Fn(s,h,r[h]);return new be((function(e,n){ns(t,s.toString(),(function(t){t?t.error?n(tu(t,o||{})):e(t):n(new S(\"network-request-failed\"))}),i,u?void 0:ni(Di(r)),t.a,t.i.get())}))}function as(t){if(\"string\"!=typeof(t=t.email)||!di.test(t))throw new S(\"invalid-email\")}function ss(t){\"email\"in t&&as(t)}function us(t){if(!t[Ya]){if(t.mfaPendingCredential)throw new S(\"multi-factor-auth-required\",null,dt(t));throw new S(\"internal-error\")}}function hs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new S(\"internal-error\")}else{if(!t.sessionInfo)throw new S(\"missing-verification-id\");if(!t.code)throw new S(\"missing-verification-code\")}}Ba.prototype.s=function(t,e,n,i,r){var o=this;Xa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:i,headers:r,authType:\"none\",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||\"CORS_UNSUPPORTED\"}})}))},Ba.prototype.vb=function(){return $s(this,Vs,{})},Ba.prototype.xb=function(t,e){return $s(this,js,{idToken:t,email:e})},Ba.prototype.yb=function(t,e){return $s(this,Us,{idToken:t,password:e})};var ls={displayName:\"DISPLAY_NAME\",photoUrl:\"PHOTO_URL\"};function cs(t){if(!t.phoneVerificationInfo)throw new S(\"internal-error\");if(!t.phoneVerificationInfo.sessionInfo)throw new S(\"missing-verification-id\");if(!t.phoneVerificationInfo.code)throw new S(\"missing-verification-code\")}function ps(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new S(\"internal-error\")}function fs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf(\"oidc.\")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&($n(t=new Xn(t.postBody),\"nonce\")&&(e.nonce=t.get(\"nonce\")))),e}function ds(t){var e=null;if(t.needConfirmation?(t.code=\"account-exists-with-different-credential\",e=Ho(t)):\"FEDERATED_USER_ID_ALREADY_LINKED\"==t.errorMessage?(t.code=\"credential-already-in-use\",e=Ho(t)):\"EMAIL_EXISTS\"==t.errorMessage?(t.code=\"email-already-in-use\",e=Ho(t)):t.errorMessage&&(e=Js(t.errorMessage)),e)throw e;us(t)}function vs(t,e){return e.returnIdpCredential=!0,$s(t,zs,e)}function gs(t,e){return e.returnIdpCredential=!0,$s(t,Hs,e)}function ys(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,$s(t,Ks,e)}function _s(t){if(!t.oobCode)throw new S(\"invalid-action-code\")}(e=Ba.prototype).zb=function(t,e){var n={idToken:t},i=[];return pt(ls,(function(t,r){var o=e[r];null===o?i.push(t):r in e&&(n[r]=o)})),i.length&&(n.deleteAttribute=i),$s(this,js,n)},e.rb=function(t,e){return gt(t={requestType:\"PASSWORD_RESET\",email:t},e),$s(this,ks,t)},e.sb=function(t,e){return gt(t={requestType:\"EMAIL_SIGNIN\",email:t},e),$s(this,Os,t)},e.qb=function(t,e){return gt(t={requestType:\"VERIFY_EMAIL\",idToken:t},e),$s(this,As,t)},e.Ab=function(t,e,n){return gt(t={requestType:\"VERIFY_AND_CHANGE_EMAIL\",idToken:t,newEmail:e},n),$s(this,Ns,t)},e.cb=function(t){return $s(this,Xs,t)},e.jb=function(t,e){return $s(this,Fs,{oobCode:t,newPassword:e})},e.Pa=function(t){return $s(this,bs,{oobCode:t})},e.fb=function(t){return $s(this,ms,{oobCode:t})};var ms={endpoint:\"setAccountInfo\",A:_s,Y:\"email\",C:!0},bs={endpoint:\"resetPassword\",A:_s,G:function(t){var e=t.requestType;if(!e||!t.email&&\"EMAIL_SIGNIN\"!=e&&\"VERIFY_AND_CHANGE_EMAIL\"!=e)throw new S(\"internal-error\")},C:!0},ws={endpoint:\"signupNewUser\",A:function(t){if(as(t),!t.password)throw new S(\"weak-password\")},G:us,U:!0,C:!0},Es={endpoint:\"createAuthUri\",C:!0},Cs={endpoint:\"deleteAccount\",M:[\"idToken\"]},Ts={endpoint:\"setAccountInfo\",M:[\"idToken\",\"deleteProvider\"],A:function(t){if(\"array\"!=p(t.deleteProvider))throw new S(\"internal-error\")}},Ss={endpoint:\"emailLinkSignin\",M:[\"email\",\"oobCode\"],A:as,G:us,U:!0,C:!0},Is={endpoint:\"emailLinkSignin\",M:[\"idToken\",\"email\",\"oobCode\"],A:as,G:us,U:!0},xs={endpoint:\"accounts/mfaEnrollment:finalize\",M:[\"idToken\",\"phoneVerificationInfo\"],A:cs,G:us,C:!0,La:!0},Ps={endpoint:\"accounts/mfaSignIn:finalize\",M:[\"mfaPendingCredential\",\"phoneVerificationInfo\"],A:cs,G:us,C:!0,La:!0},Rs={endpoint:\"getAccountInfo\"},Os={endpoint:\"getOobConfirmationCode\",M:[\"requestType\"],A:function(t){if(\"EMAIL_SIGNIN\"!=t.requestType)throw new S(\"internal-error\");as(t)},Y:\"email\",C:!0},As={endpoint:\"getOobConfirmationCode\",M:[\"idToken\",\"requestType\"],A:function(t){if(\"VERIFY_EMAIL\"!=t.requestType)throw new S(\"internal-error\")},Y:\"email\",C:!0},Ns={endpoint:\"getOobConfirmationCode\",M:[\"idToken\",\"newEmail\",\"requestType\"],A:function(t){if(\"VERIFY_AND_CHANGE_EMAIL\"!=t.requestType)throw new S(\"internal-error\")},Y:\"email\",C:!0},ks={endpoint:\"getOobConfirmationCode\",M:[\"requestType\"],A:function(t){if(\"PASSWORD_RESET\"!=t.requestType)throw new S(\"internal-error\");as(t)},Y:\"email\",C:!0},Ds={hb:!0,endpoint:\"getProjectConfig\",Rb:\"GET\"},Ls={hb:!0,endpoint:\"getRecaptchaParam\",Rb:\"GET\",G:function(t){if(!t.recaptchaSiteKey)throw new S(\"internal-error\")}},Fs={endpoint:\"resetPassword\",A:_s,Y:\"email\",C:!0},Ms={endpoint:\"sendVerificationCode\",M:[\"phoneNumber\",\"recaptchaToken\"],Y:\"sessionInfo\",C:!0},js={endpoint:\"setAccountInfo\",M:[\"idToken\"],A:ss,U:!0},Us={endpoint:\"setAccountInfo\",M:[\"idToken\"],A:function(t){if(ss(t),!t.password)throw new S(\"weak-password\")},G:us,U:!0},Vs={endpoint:\"signupNewUser\",G:us,U:!0,C:!0},Ws={endpoint:\"accounts/mfaEnrollment:start\",M:[\"idToken\",\"phoneEnrollmentInfo\"],A:function(t){if(!t.phoneEnrollmentInfo)throw new S(\"internal-error\");if(!t.phoneEnrollmentInfo.phoneNumber)throw new S(\"missing-phone-number\");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new S(\"missing-app-credential\")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new S(\"internal-error\")},C:!0,La:!0},qs={endpoint:\"accounts/mfaSignIn:start\",M:[\"mfaPendingCredential\",\"mfaEnrollmentId\",\"phoneSignInInfo\"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new S(\"missing-app-credential\")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new S(\"internal-error\")},C:!0,La:!0},zs={endpoint:\"verifyAssertion\",A:ps,Wa:fs,G:ds,U:!0,C:!0},Ks={endpoint:\"verifyAssertion\",A:ps,Wa:fs,G:function(t){if(t.errorMessage&&\"USER_NOT_FOUND\"==t.errorMessage)throw new S(\"user-not-found\");if(t.errorMessage)throw Js(t.errorMessage);us(t)},U:!0,C:!0},Hs={endpoint:\"verifyAssertion\",A:function(t){if(ps(t),!t.idToken)throw new S(\"internal-error\")},Wa:fs,G:ds,U:!0},Gs={endpoint:\"verifyCustomToken\",A:function(t){if(!t.token)throw new S(\"invalid-custom-token\")},G:us,U:!0,C:!0},Bs={endpoint:\"verifyPassword\",A:function(t){if(as(t),!t.password)throw new S(\"wrong-password\")},G:us,U:!0,C:!0},Xs={endpoint:\"verifyPhoneNumber\",A:hs,G:us,C:!0},Ys={endpoint:\"verifyPhoneNumber\",A:function(t){if(!t.idToken)throw new S(\"internal-error\");hs(t)},G:function(t){if(t.temporaryProof)throw t.code=\"credential-already-in-use\",Ho(t);us(t)}},Qs={Eb:{USER_NOT_FOUND:\"user-not-found\"},endpoint:\"verifyPhoneNumber\",A:hs,G:us,C:!0},Zs={endpoint:\"accounts/mfaEnrollment:withdraw\",M:[\"idToken\",\"mfaEnrollmentId\"],G:function(t){if(!!t[Ya]^!!t.refreshToken)throw new S(\"internal-error\")},C:!0,La:!0};function $s(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var i=t[e[n]];if(null==i||\"\"===i)return!1}return!0}(n,e.M))return Pe(new S(\"internal-error\"));var i,r=!!e.La,o=e.Rb||\"POST\";return xe(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),os(t,r?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return i=t,e.Wa?e.Wa(n,i):i})).then(e.G).then((function(){if(!e.Y)return i;if(!(e.Y in i))throw new S(\"internal-error\");return i[e.Y]}))}function Js(t){return tu({error:{errors:[{message:t}],code:400,message:t}})}function tu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||\"\",i={keyInvalid:\"invalid-api-key\",ipRefererBlocked:\"app-not-authorized\"};if(n=i[n]?new S(i[n]):null)return n;for(var r in n=t.error&&t.error.message||\"\",gt(i={INVALID_CUSTOM_TOKEN:\"invalid-custom-token\",CREDENTIAL_MISMATCH:\"custom-token-mismatch\",MISSING_CUSTOM_TOKEN:\"internal-error\",INVALID_IDENTIFIER:\"invalid-email\",MISSING_CONTINUE_URI:\"internal-error\",INVALID_EMAIL:\"invalid-email\",INVALID_PASSWORD:\"wrong-password\",USER_DISABLED:\"user-disabled\",MISSING_PASSWORD:\"internal-error\",EMAIL_EXISTS:\"email-already-in-use\",PASSWORD_LOGIN_DISABLED:\"operation-not-allowed\",INVALID_IDP_RESPONSE:\"invalid-credential\",INVALID_PENDING_TOKEN:\"invalid-credential\",FEDERATED_USER_ID_ALREADY_LINKED:\"credential-already-in-use\",MISSING_OR_INVALID_NONCE:\"missing-or-invalid-nonce\",INVALID_MESSAGE_PAYLOAD:\"invalid-message-payload\",INVALID_RECIPIENT_EMAIL:\"invalid-recipient-email\",INVALID_SENDER:\"invalid-sender\",EMAIL_NOT_FOUND:\"user-not-found\",RESET_PASSWORD_EXCEED_LIMIT:\"too-many-requests\",EXPIRED_OOB_CODE:\"expired-action-code\",INVALID_OOB_CODE:\"invalid-action-code\",MISSING_OOB_CODE:\"internal-error\",INVALID_PROVIDER_ID:\"invalid-provider-id\",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:\"requires-recent-login\",INVALID_ID_TOKEN:\"invalid-user-token\",TOKEN_EXPIRED:\"user-token-expired\",USER_NOT_FOUND:\"user-token-expired\",CORS_UNSUPPORTED:\"cors-unsupported\",DYNAMIC_LINK_NOT_ACTIVATED:\"dynamic-link-not-activated\",INVALID_APP_ID:\"invalid-app-id\",TOO_MANY_ATTEMPTS_TRY_LATER:\"too-many-requests\",WEAK_PASSWORD:\"weak-password\",OPERATION_NOT_ALLOWED:\"operation-not-allowed\",USER_CANCELLED:\"user-cancelled\",CAPTCHA_CHECK_FAILED:\"captcha-check-failed\",INVALID_APP_CREDENTIAL:\"invalid-app-credential\",INVALID_CODE:\"invalid-verification-code\",INVALID_PHONE_NUMBER:\"invalid-phone-number\",INVALID_SESSION_INFO:\"invalid-verification-id\",INVALID_TEMPORARY_PROOF:\"invalid-credential\",MISSING_APP_CREDENTIAL:\"missing-app-credential\",MISSING_CODE:\"missing-verification-code\",MISSING_PHONE_NUMBER:\"missing-phone-number\",MISSING_SESSION_INFO:\"missing-verification-id\",QUOTA_EXCEEDED:\"quota-exceeded\",SESSION_EXPIRED:\"code-expired\",REJECTED_CREDENTIAL:\"rejected-credential\",INVALID_CONTINUE_URI:\"invalid-continue-uri\",MISSING_ANDROID_PACKAGE_NAME:\"missing-android-pkg-name\",MISSING_IOS_BUNDLE_ID:\"missing-ios-bundle-id\",UNAUTHORIZED_DOMAIN:\"unauthorized-continue-uri\",INVALID_DYNAMIC_LINK_DOMAIN:\"invalid-dynamic-link-domain\",INVALID_OAUTH_CLIENT_ID:\"invalid-oauth-client-id\",INVALID_CERT_HASH:\"invalid-cert-hash\",UNSUPPORTED_TENANT_OPERATION:\"unsupported-tenant-operation\",INVALID_TENANT_ID:\"invalid-tenant-id\",TENANT_ID_MISMATCH:\"tenant-id-mismatch\",ADMIN_ONLY_OPERATION:\"admin-restricted-operation\",INVALID_MFA_PENDING_CREDENTIAL:\"invalid-multi-factor-session\",MFA_ENROLLMENT_NOT_FOUND:\"multi-factor-info-not-found\",MISSING_MFA_PENDING_CREDENTIAL:\"missing-multi-factor-session\",MISSING_MFA_ENROLLMENT_ID:\"missing-multi-factor-info\",EMAIL_CHANGE_NEEDS_VERIFICATION:\"email-change-needs-verification\",SECOND_FACTOR_EXISTS:\"second-factor-already-in-use\",SECOND_FACTOR_LIMIT_EXCEEDED:\"maximum-second-factor-count-exceeded\",UNSUPPORTED_FIRST_FACTOR:\"unsupported-first-factor\",UNVERIFIED_EMAIL:\"unverified-email\"},e||{}),e=(e=n.match(/^[^\\s]+\\s*:\\s*([\\s\\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===n.indexOf(r))return new S(i[r],e);return!e&&t&&(e=ki(t)),new S(\"internal-error\",e)}function eu(t){this.b=t,this.a=null,this.nb=function(t){return(ou||(ou=new be((function(t,e){function n(){ji(),xi(\"gapi.load\")(\"gapi.iframes\",{callback:t,ontimeout:function(){ji(),e(Error(\"Network Error\"))},timeout:iu.get()})}if(xi(\"gapi.iframes.Iframe\"))t();else if(xi(\"gapi.load\"))n();else{var i=\"__iframefcb\"+Math.floor(1e6*Math.random()).toString();u[i]=function(){xi(\"gapi.load\")?n():e(Error(\"Network Error\"))},xe(Va(i=St(nu,{onload:i}))).o((function(){e(Error(\"Network Error\"))}))}})).o((function(t){throw ou=null,t})))).then((function(){return new be((function(e,n){xi(\"gapi.iframes.getContext\")().open({where:document.body,url:t.b,messageHandlersFilter:xi(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"),attributes:{style:{position:\"absolute\",top:\"-100px\",width:\"1px\",height:\"1px\"}},dontclear:!0},(function(i){function r(){clearTimeout(o),e()}t.a=i,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error(\"Network Error\"))}),ru.get());i.ping(r).then(r,(function(){n(Error(\"Network Error\"))}))}))}))}))}(this)}var nu=new _t(wt,\"https://apis.google.com/js/api.js?onload=%{onload}\"),iu=new Ui(3e4,6e4),ru=new Ui(5e3,15e3),ou=null;function au(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Un(this.i,\"/__/auth/iframe\"),Fn(this.a,\"apiKey\",this.g),Fn(this.a,\"appName\",this.h),this.b=null,this.c=[]}function su(t,e,n,i,r){this.s=t,this.m=e,this.c=n,this.u=i,this.i=this.g=this.l=null,this.a=r,this.h=this.f=null}function uu(t){try{return i.a.app(t).auth().Ea()}catch(t){return[]}}function hu(t,e,n,i,r){this.u=t,this.f=e,this.b=n,this.c=i||null,this.h=r||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function lu(t){var e=ui();return function(t){return $s(t,Ds,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),i=n.f;n=n.b;for(var r=0;r<t.length;r++){var o=t[r],a=n,s=i;if(0==o.indexOf(\"chrome-extension://\")?a=jn(o).b==a&&\"chrome-extension\"==s:\"http\"!=s&&\"https\"!=s?a=!1:fi.test(o)?a=a==o:(o=o.split(\".\").join(\"\\\\.\"),a=new RegExp(\"^(.+\\\\.\"+o+\"|\"+o+\")$\",\"i\").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new zo(ui())}))}function cu(t){return t.l||(t.l=vi().then((function(){if(!t.s){var e=t.c,n=t.h,i=uu(t.b),r=new au(t.u,t.f,t.b);r.f=e,r.b=n,r.c=Z(i||[]),t.s=r.toString()}t.i=new eu(t.s),function(t){if(!t.i)throw Error(\"IfcHandler must be initialized!\");!function(t,e){t.nb.then((function(){t.a.register(\"authEvent\",e,xi(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var i=!1;for(e=Uo(e.authEvent),n=0;n<t.g.length;n++)i=t.g[n](e)||i;return(n={}).status=i?\"ACK\":\"ERROR\",xe(n)}return n.status=\"ERROR\",xe(n)}))}(t)}))),t.l}function pu(t){return t.m||(t.w=t.c?Si(t.c,uu(t.b)):null,t.m=new Ba(t.f,A(t.h),t.w)),t.m}function fu(t,e,n,i,r,o,a,s,u,h,l){return(t=new su(t,e,n,i,r)).l=o,t.g=a,t.i=s,t.b=dt(u||null),t.f=h,t.ub(l).toString()}function du(t){if(this.a=t||i.a.INTERNAL.reactNative&&i.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new S(\"internal-error\",\"The React Native compatibility library was not found.\");this.type=\"asyncStorage\"}function vu(t){this.b=t,this.a={},this.f=w(this.c,this)}au.prototype.toString=function(){return this.f?Fn(this.a,\"v\",this.f):Zn(this.a.a,\"v\"),this.b?Fn(this.a,\"eid\",this.b):Zn(this.a.a,\"eid\"),this.c.length?Fn(this.a,\"fw\",this.c.join(\",\")):Zn(this.a.a,\"fw\"),this.a.toString()},su.prototype.ub=function(t){return this.h=t,this},su.prototype.toString=function(){var t=Un(this.s,\"/__/auth/handler\");if(Fn(t,\"apiKey\",this.m),Fn(t,\"appName\",this.c),Fn(t,\"authType\",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=i.a.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,Fn(t,\"providerId\",this.a.providerId),n=Di((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=dt(n);for(var o=0;o<r.length;o++){var a=r[o];a in n&&delete n[a]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ft(n)||Fn(t,\"customParameters\",ki(n))}if(\"function\"==typeof this.a.Nb&&((e=this.a.Nb()).length&&Fn(t,\"scopes\",e.join(\",\"))),this.l?Fn(t,\"redirectUrl\",this.l):Zn(t.a,\"redirectUrl\"),this.g?Fn(t,\"eventId\",this.g):Zn(t.a,\"eventId\"),this.i?Fn(t,\"v\",this.i):Zn(t.a,\"v\"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Fn(t,s,this.b[s]);return this.h?Fn(t,\"tid\",this.h):Zn(t.a,\"tid\"),this.f?Fn(t,\"eid\",this.f):Zn(t.a,\"eid\"),(s=uu(this.c)).length&&Fn(t,\"fw\",s.join(\",\")),t.toString()},(e=hu.prototype).Lb=function(t,e,n){var i=new S(\"popup-closed-by-user\"),r=new S(\"web-storage-unsupported\"),o=this,a=!1;return this.ka().then((function(){(function(t){var e={type:\"webStorageSupport\"};return cu(t).then((function(){return function(t,e){return t.nb.then((function(){return new be((function(n){t.a.send(e.type,e,n,xi(\"gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER\"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&ci(t),e(r),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new be((function(e){return function n(){Sn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Sn(n).then((function(){e(i)}))}))},e.Ub=function(){var t=Ii();return!Ni(t)&&!Mi(t)},e.Qb=function(){return!1},e.Jb=function(t,e,n,i,r,o,a,s){if(!t)return Pe(new S(\"popup-blocked\"));if(a&&!Ni())return this.ka().o((function(e){ci(t),r(e)})),i(),xe();this.a||(this.a=lu(pu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw ci(t),r(e),e}));return i(),e})).then((function(){(Mo(n),a)||hi(fu(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)})).o((function(t){throw\"auth/network-request-failed\"==t.code&&(u.a=null),t}))},e.Kb=function(t,e,n,i){this.a||(this.a=lu(pu(this)));var r=this;return this.a.then((function(){Mo(e),hi(fu(r.u,r.f,r.b,t,e,ui(),n,r.c,void 0,r.h,i))})).o((function(t){throw\"auth/network-request-failed\"==t.code&&(r.a=null),t}))},e.ka=function(){var t=this;return cu(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new S(\"network-request-failed\")}))},e.Xb=function(){return!0},e.Ca=function(t){this.g.push(t)},e.Qa=function(t){Y(this.g,(function(e){return e==t}))},(e=du.prototype).get=function(t){return xe(this.a.getItem(t)).then((function(t){return t&&Li(t)}))},e.set=function(t,e){return xe(this.a.setItem(t,ki(e)))},e.T=function(t){return xe(this.a.removeItem(t))},e.ba=function(){},e.ha=function(){};var gu,yu=[];function _u(t,e,n){ft(t.a)&&t.b.addEventListener(\"message\",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function mu(t){this.a=t}function bu(t){this.c=t,this.b=!1,this.a=[]}function wu(t,e,n,i){var r,o,a,s,u=n||{},h=null;if(t.b)return Pe(Error(\"connection_unavailable\"));var l=i?800:50,c=\"undefined\"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,i){c?(r=Math.floor(Math.random()*Math.pow(10,20)).toString(),c.port1.start(),a=setTimeout((function(){i(Error(\"unsupported_event\"))}),l),h={messageChannel:c,onMessage:o=function(t){t.data.eventId===r&&(\"ack\"===t.data.status?(clearTimeout(a),s=setTimeout((function(){i(Error(\"timeout\"))}),3e3)):\"done\"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):i(Error(\"unknown_error\"))):(clearTimeout(a),clearTimeout(s),i(Error(\"invalid_response\"))))}},t.a.push(h),c.port1.addEventListener(\"message\",o),t.c.postMessage({eventType:e,eventId:r,data:u},[c.port2])):i(Error(\"connection_unavailable\"))})).then((function(e){return Eu(t,h),e})).o((function(e){throw Eu(t,h),e}))}function Eu(t,e){if(e){var n=e.messageChannel,i=e.onMessage;n&&(n.port1.removeEventListener(\"message\",i),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function Cu(){if(!Iu())throw new S(\"web-storage-unsupported\");this.c={},this.a=[],this.b=0,this.u=u.indexedDB,this.type=\"indexedDB\",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;_i()&&self?(this.l=function(){var t=_i()?self:null;if(z(yu,(function(n){n.b==t&&(e=n)})),!e){var e=new vu(t);yu.push(e)}return e}(),_u(this.l,\"keyChanged\",(function(e,n){return Au(t).then((function(e){return 0<e.length&&z(t.a,(function(t){t(e)})),{keyProcessed:B(e,n.key)}}))})),_u(this.l,\"ping\",(function(){return xe([\"keyChanged\"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?xe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):xe(null)}().then((function(e){(t.h=e)&&(t.g=new bu(new mu(e)),wu(t.g,\"ping\",null,!0).then((function(e){e[0].fulfilled&&B(e[0].value,\"keyChanged\")&&(t.s=!0)})).o((function(){})))}))}function Tu(t){return new be((function(e,n){var i=t.u.open(\"firebaseLocalStorageDb\",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore(\"firebaseLocalStorage\",{keyPath:\"fbase_key\"})}catch(t){n(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains(\"firebaseLocalStorage\")?e(i):function(t){return new be((function(e,n){var i=t.u.deleteDatabase(\"firebaseLocalStorageDb\");i.onsuccess=function(){e()},i.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Tu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Su(t){return t.m||(t.m=Tu(t)),t.m}function Iu(){try{return!!u.indexedDB}catch(t){return!1}}function xu(t){return t.objectStore(\"firebaseLocalStorage\")}function Pu(t,e){return t.transaction([\"firebaseLocalStorage\"],e?\"readwrite\":\"readonly\")}function Ru(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Ou(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?wu(t.g,\"keyChanged\",{key:e},t.s).then((function(){})).o((function(){})):xe()}function Au(t){return Su(t).then((function(t){var e=xu(Pu(t,!1));return e.getAll?Ru(e.getAll()):new be((function(t,n){var i=[],r=e.openCursor();r.onsuccess=function(e){(e=e.target.result)?(i.push(e.value),e.continue()):t(i)},r.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},i=[];if(0==t.b){for(i=0;i<e.length;i++)n[e[i].fbase_key]=e[i].value;i=function t(e,n){var i,r=[];for(i in e)i in n?typeof e[i]!=typeof n[i]?r.push(i):\"object\"==typeof e[i]&&null!=e[i]&&null!=n[i]?0<t(e[i],n[i]).length&&r.push(i):e[i]!==n[i]&&r.push(i):r.push(i);for(i in n)i in e||r.push(i);return r}(t.c,n),t.c=n}return i}))}function Nu(t){t.i&&t.i.cancel(\"STOP_EVENT\"),t.f&&(clearTimeout(t.f),t.f=null)}function ku(t){var e=this,n=null;this.a=[],this.type=\"indexedDB\",this.c=t,this.b=xe().then((function(){if(Iu()){var t=Fi(),i=\"__sak\"+t;return gu||(gu=new Cu),(n=gu).set(i,t).then((function(){return n.get(i)})).then((function(e){if(e!==t)throw Error(\"indexedDB not supported!\");return n.T(i)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){z(e.a,(function(e){e(t)}))})),t}))}function Du(){this.a={},this.type=\"inMemory\"}function Lu(){if(!function(){var t=\"Node\"==mi();if(!(t=Fu()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.localStorage))return!1;try{return t.setItem(\"__sak\",\"1\"),t.removeItem(\"__sak\"),!0}catch(t){return!1}}()){if(\"Node\"==mi())throw new S(\"internal-error\",\"The LocalStorage compatibility library was not found.\");throw new S(\"web-storage-unsupported\")}this.a=Fu()||i.a.INTERNAL.node.localStorage,this.type=\"localStorage\"}function Fu(){try{var t=u.localStorage,e=Fi();return t&&(t.setItem(e,\"1\"),t.removeItem(e)),t}catch(t){return null}}function Mu(){this.type=\"nullStorage\"}function ju(){if(!function(){var t=\"Node\"==mi();if(!(t=Uu()||t&&i.a.INTERNAL.node&&i.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem(\"__sak\",\"1\"),t.removeItem(\"__sak\"),!0}catch(t){return!1}}()){if(\"Node\"==mi())throw new S(\"internal-error\",\"The SessionStorage compatibility library was not found.\");throw new S(\"web-storage-unsupported\")}this.a=Uu()||i.a.INTERNAL.node.sessionStorage,this.type=\"sessionStorage\"}function Uu(){try{var t=u.sessionStorage,e=Fi();return t&&(t.setItem(e,\"1\"),t.removeItem(e)),t}catch(t){return null}}function Vu(){var t={};t.Browser=zu,t.Node=Ku,t.ReactNative=Hu,t.Worker=Gu,this.a=t[mi()]}vu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,i=this.a[e];if(i&&0<i.length){t.ports[0].postMessage({status:\"ack\",eventId:n,eventType:e,response:null});var r=[];z(i,(function(e){r.push(xe().then((function(){return e(t.origin,t.data.data)})))})),Oe(r).then((function(i){var r=[];z(i,(function(t){r.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),z(r,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:\"done\",eventId:n,eventType:e,response:r})}))}},mu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},bu.prototype.close=function(){for(;0<this.a.length;)Eu(this,this.a[0]);this.b=!0},(e=Cu.prototype).set=function(t,e){var n,i=!1,r=this;return Su(this).then((function(e){return Ru((e=xu(Pu(n=e,!0))).get(t))})).then((function(o){var a=xu(Pu(n,!0));return o?(o.value=e,Ru(a.put(o))):(r.b++,i=!0,(o={}).fbase_key=t,o.value=e,Ru(a.add(o)))})).then((function(){return r.c[t]=e,Ou(r,t)})).ma((function(){i&&r.b--}))},e.get=function(t){return Su(this).then((function(e){return Ru(xu(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.T=function(t){var e=!1,n=this;return Su(this).then((function(i){return e=!0,n.b++,Ru(xu(Pu(i,!0)).delete(t))})).then((function(){return delete n.c[t],Ou(n,t)})).ma((function(){e&&n.b--}))},e.ba=function(t){0==this.a.length&&function(t){Nu(t),function e(){t.f=setTimeout((function(){t.i=Au(t).then((function(e){0<e.length&&z(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){\"STOP_EVENT\"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},e.ha=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Nu(this)},(e=ku.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.T=function(t){return this.b.then((function(e){return e.T(t)}))},e.ba=function(t){this.a.push(t)},e.ha=function(t){Y(this.a,(function(e){return e==t}))},(e=Du.prototype).get=function(t){return xe(this.a[t])},e.set=function(t,e){return this.a[t]=e,xe()},e.T=function(t){return delete this.a[t],xe()},e.ba=function(){},e.ha=function(){},(e=Lu.prototype).get=function(t){var e=this;return xe().then((function(){return Li(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return xe().then((function(){var i=ki(e);null===i?n.T(t):n.a.setItem(t,i)}))},e.T=function(t){var e=this;return xe().then((function(){e.a.removeItem(t)}))},e.ba=function(t){u.window&&un(u.window,\"storage\",t)},e.ha=function(t){u.window&&cn(u.window,\"storage\",t)},(e=Mu.prototype).get=function(){return xe(null)},e.set=function(){return xe()},e.T=function(){return xe()},e.ba=function(){},e.ha=function(){},(e=ju.prototype).get=function(t){var e=this;return xe().then((function(){return Li(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return xe().then((function(){var i=ki(e);null===i?n.T(t):n.a.setItem(t,i)}))},e.T=function(t){var e=this;return xe().then((function(){e.a.removeItem(t)}))},e.ba=function(){},e.ha=function(){};var Wu,qu,zu={F:Lu,$a:ju},Ku={F:Lu,$a:ju},Hu={F:du,$a:Mu},Gu={F:Lu,$a:Mu},Bu={od:\"local\",NONE:\"none\",qd:\"session\"};function Xu(){var t=!(Mi(Ii())||!yi()),e=Ni(),n=Pi();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new Vu),t=Wu;try{this.g=!si()&&qi()||!u.indexedDB?new t.a.F:new ku(_i()?new Du:new t.a.F)}catch(t){this.g=new Du,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new Du}this.u=new Du,this.f=w(this.Vb,this),this.b={}}function Yu(){return qu||(qu=new Xu),qu}function Qu(t,e){switch(e){case\"session\":return t.i;case\"none\":return t.u;default:return t.g}}function Zu(t,e){return\"firebase:\"+t.name+(e?\":\"+e:\"\")}function $u(t,e,n){return n=Zu(e,n),\"local\"==e.F&&(t.b[n]=null),Qu(t,e.F).T(n)}function Ju(t){t.c&&(clearInterval(t.c),t.c=null)}function th(t){this.a=t,this.b=Yu()}(e=Xu.prototype).get=function(t,e){return Qu(this,t.F).get(Zu(t,e))},e.set=function(t,e,n){var i=Zu(t,n),r=this,o=Qu(this,t.F);return o.set(i,e).then((function(){return o.get(i)})).then((function(e){\"local\"==t.F&&(r.b[i]=e)}))},e.addListener=function(t,e,n){t=Zu(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),ft(this.a)&&(Qu(this,\"local\").ba(this.f),this.h||(si()||!qi())&&u.indexedDB||!this.l||function(t){Ju(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),i=t.b[e];n!=i&&(t.b[e]=n,n=new Qe({type:\"storage\",key:e,target:window,oldValue:i,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=Zu(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ft(this.a)&&(Qu(this,\"local\").ha(this.f),Ju(this))},e.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var i=this.b[n];void 0===i&&(i=null);var r=u.localStorage.getItem(n);r!==i&&(this.b[n]=r,this.ib(n))}else if(0==e.indexOf(\"firebase:\")&&this.a[e]){if(void 0!==t.a.a?Qu(this,\"local\").ha(this.f):Ju(this),this.m)if(n=u.localStorage.getItem(e),(i=t.a.newValue)!==n)null!==i?u.localStorage.setItem(e,i):u.localStorage.removeItem(e);else if(this.b[e]===i&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.ib(e))},Bt&&ne&&10==ne&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else z(t,w(this.ib,this))},e.ib=function(t){this.a[t]&&z(this.a[t],(function(t){t()}))};var eh,nh={name:\"authEvent\",F:\"local\"};function ih(){this.a=Yu()}function rh(t,e){this.b=oh,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===eh&&(eh=u.Int32Array?new Int32Array(ph):ph),this.reset()}T(rh,(function(){this.b=-1}));for(var oh=64,ah=oh-1,sh=[],uh=0;uh<ah;uh++)sh[uh]=0;var hh=Q(128,sh);function lh(t){for(var e=t.f,n=t.l,i=0,r=0;r<e.length;)n[i++]=e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3],r=4*i;for(e=16;64>e;e++){r=0|n[e-15],i=0|n[e-2];var o=(0|n[e-16])+((r>>>7|r<<25)^(r>>>18|r<<14)^r>>>3)|0,a=(0|n[e-7])+((i>>>17|i<<15)^(i>>>19|i<<13)^i>>>10)|0;n[e]=o+a|0}i=0|t.a[0],r=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],h=0|t.a[4],l=0|t.a[5],c=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var p=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&r^i&s^r&s)|0;a=(o=o+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))|0)+((a=(a=h&l^~h&c)+(0|eh[e])|0)+(0|n[e])|0)|0,o=c,c=l,l=h,h=u+a|0,u=s,s=r,r=i,i=a+p|0}t.a[0]=t.a[0]+i|0,t.a[1]=t.a[1]+r|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+h|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+c|0,t.a[7]=t.a[7]+o|0}function ch(t,e,n){void 0===n&&(n=e.length);var i=0,r=t.c;if(\"string\"==typeof e)for(;i<n;)t.f[r++]=e.charCodeAt(i++),r==t.b&&(lh(t),r=0);else{if(!f(e))throw Error(\"message must be string or array\");for(;i<n;){var o=e[i++];if(!(\"number\"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error(\"message must be a byte array\");t.f[r++]=o,r==t.b&&(lh(t),r=0)}}t.c=r,t.g+=n}rh.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var ph=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function fh(){rh.call(this,8,dh)}T(fh,rh);var dh=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function vh(t,e,n,i,r){this.u=t,this.i=e,this.l=n,this.m=i||null,this.s=r||null,this.h=e+\":\"+n,this.w=new ih,this.g=new th(this.h),this.f=null,this.b=[],this.a=this.c=null}function gh(t){return new S(\"invalid-cordova-configuration\",t)}function yh(t){var e=new fh;ch(e,t),t=[];var n=8*e.g;56>e.c?ch(e,hh,56-e.c):ch(e,hh,e.b-(e.c-56));for(var i=63;56<=i;i--)e.f[i]=255&n,n/=256;for(lh(e),i=n=0;i<e.i;i++)for(var r=24;0<=r;r-=8)t[n++]=e.a[i]>>r&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:\"0\"+t})).join(\"\")}(t)}function _h(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function mh(t){return t.f||(t.f=t.ka().then((function(){return new be((function(e){t.Ca((function n(i){return e(i),t.Qa(n),!1})),function(t){function e(e){i=!0,r&&r.cancel(),bh(t).then((function(i){var r=n;if(i&&e&&e.url){var o=null;-1!=(r=no(e.url)).indexOf(\"/__/auth/callback\")&&(o=(o=\"object\"==typeof(o=Li(Mn(o=jn(r),\"firebaseError\")||null))?I(o):null)?new jo(i.c,i.b,null,null,o,null,i.S()):new jo(i.c,i.b,r,i.f,null,null,i.S())),r=o||n}_h(t,r)}))}var n=new jo(\"unknown\",null,null,null,new S(\"no-auth-event\")),i=!1,r=Sn(500).then((function(){return bh(t).then((function(){i||_h(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(xi(\"BuildInfo.packageName\",u).toLowerCase()+\"://\")&&e({url:t}),\"function\"==typeof o)try{o(t)}catch(t){console.error(t)}},qo||(qo=new Vo),function(t){var e=qo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},\"function\"==typeof(t=xi(\"universalLinks.subscribe\",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function bh(t){var e=null;return function(t){return t.b.get(nh,t.a).then((function(t){return Uo(t)}))}(t.g).then((function(n){return e=n,$u((n=t.g).b,nh,n.a)})).then((function(){return e}))}function wh(t){this.a=t,this.b=Yu()}(e=vh.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(gi(void 0)?vi().then((function(){return new be((function(t,e){var n=u.document,i=setTimeout((function(){e(Error(\"Cordova framework is not ready.\"))}),1e3);n.addEventListener(\"deviceready\",(function(){clearTimeout(i),t()}),!1)}))})):Pe(Error(\"Cordova must run in an Android or iOS file scheme.\"))).then((function(){if(\"function\"!=typeof xi(\"universalLinks.subscribe\",u))throw gh(\"cordova-universal-links-plugin-fix is not installed\");if(void 0===xi(\"BuildInfo.packageName\",u))throw gh(\"cordova-plugin-buildinfo is not installed\");if(\"function\"!=typeof xi(\"cordova.plugins.browsertab.openUrl\",u))throw gh(\"cordova-plugin-browsertab is not installed\");if(\"function\"!=typeof xi(\"cordova.InAppBrowser.open\",u))throw gh(\"cordova-plugin-inappbrowser is not installed\")}),(function(){throw new S(\"cordova-not-ready\")}))},e.Lb=function(t,e){return e(new S(\"operation-not-supported-in-this-environment\")),xe()},e.Jb=function(){return Pe(new S(\"operation-not-supported-in-this-environment\"))},e.Xb=function(){return!1},e.Ub=function(){return!0},e.Qb=function(){return!0},e.Kb=function(t,e,n,i){if(this.c)return Pe(new S(\"redirect-operation-pending\"));var r=this,o=u.document,a=null,s=null,h=null,l=null;return this.c=xe().then((function(){return Mo(e),mh(r)})).then((function(){return function(t,e,n,i,r){var o=function(){for(var t=20,e=[];0<t;)e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),t--;return e.join(\"\")}(),a=new jo(e,i,null,o,new S(\"no-auth-event\"),null,r),s=xi(\"BuildInfo.packageName\",u);if(\"string\"!=typeof s)throw new S(\"invalid-cordova-configuration\");var h=xi(\"BuildInfo.displayName\",u),l={};if(Ii().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Ii().toLowerCase().match(/android/))return Pe(new S(\"operation-not-supported-in-this-environment\"));l.apn=s}h&&(l.appDisplayName=h),o=yh(o),l.sessionId=o;var c=fu(t.u,t.i,t.l,e,n,null,i,t.m,l,t.s,r);return t.ka().then((function(){var e=t.h;return t.w.a.set(nh,a.v(),e)})).then((function(){var e=xi(\"cordova.plugins.browsertab.isAvailable\",u);if(\"function\"!=typeof e)throw new S(\"invalid-cordova-configuration\");var n=null;e((function(e){if(e){if(\"function\"!=typeof(n=xi(\"cordova.plugins.browsertab.openUrl\",u)))throw new S(\"invalid-cordova-configuration\");n(c)}else{if(\"function\"!=typeof(n=xi(\"cordova.InAppBrowser.open\",u)))throw new S(\"invalid-cordova-configuration\");e=Ii(),t.a=n(c,e.match(/(iPad|iPhone|iPod).*OS 7_\\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\\d/i)?\"_blank\":\"_system\",\"location=yes\")}}))}))}(r,t,e,n,i)})).then((function(){return new be((function(t,e){s=function(){var e=xi(\"cordova.plugins.browsertab.close\",u);return t(),\"function\"==typeof e&&e(),r.a&&\"function\"==typeof r.a.close&&(r.a.close(),r.a=null),!1},r.Ca(s),h=function(){a||(a=Sn(2e3).then((function(){e(new S(\"redirect-cancelled-by-user\"))})))},l=function(){Vi()&&h()},o.addEventListener(\"resume\",h,!1),Ii().toLowerCase().match(/android/)||o.addEventListener(\"visibilitychange\",l,!1)})).o((function(t){return bh(r).then((function(){throw t}))}))})).ma((function(){h&&o.removeEventListener(\"resume\",h,!1),l&&o.removeEventListener(\"visibilitychange\",l,!1),a&&a.cancel(),s&&r.Qa(s),r.c=null}))},e.Ca=function(t){this.b.push(t),mh(this).o((function(e){\"auth/invalid-cordova-configuration\"===e.code&&(e=new jo(\"unknown\",null,null,null,new S(\"no-auth-event\")),t(e))}))},e.Qa=function(t){Y(this.b,(function(e){return e==t}))};var Eh={name:\"pendingRedirect\",F:\"session\"};function Ch(t){return $u(t.b,Eh,t.a)}function Th(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new jh,this.B=new zh,this.g=new wh(this.u+\":\"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Sh(this.D,this.u,this.m,x)}function Sh(t,e,n,r){var o=i.a.SDK_VERSION||null;return gi()?new vh(t,e,n,o,r):new hu(t,e,n,o,r)}function Ih(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function xh(t){t.a.Ub()&&Ih(t).o((function(e){var n=new jo(\"unknown\",null,null,null,new S(\"operation-not-supported-in-this-environment\"));kh(e)&&t.s(n)})),t.a.Qb()||Uh(t.b)}function Ph(t,e){B(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Eh,t.a).then((function(t){return\"pending\"==t}))}(t.g).then((function(e){e?Ch(t.g).then((function(){Ih(t).o((function(e){var n=new jo(\"unknown\",null,null,null,new S(\"operation-not-supported-in-this-environment\"));kh(e)&&t.s(n)}))})):xh(t)})).o((function(){xh(t)}))}function Rh(t,e){Y(t.h,(function(t){return t==e}))}Th.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Sh(this.D,this.u,this.m),this.i={}},Th.prototype.s=function(t){if(!t)throw new S(\"invalid-auth-event\");if(6e5<=C()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var i=this.h[n];if(i.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,i),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=C())),e=!0;break}}return Uh(this.b),e};var Oh=new Ui(2e3,1e4),Ah=new Ui(3e4,6e4);function Nh(t,e,n,i,r,o,a){return t.a.Jb(e,n,i,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),r,o,a)}function kh(t){return!(!t||\"auth/cordova-not-ready\"!=t.code)}function Dh(t,e,n,i,r){var o;return function(t){return t.b.set(Eh,\"pending\",t.a)}(t.g).then((function(){return t.a.Kb(e,n,i,r).o((function(e){if(kh(e))throw new S(\"operation-not-supported-in-this-environment\");return o=e,Ch(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new be((function(){})):Ch(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Lh(t,e,n,i,r){return t.a.Lb(i,(function(t){e.la(n,null,t,r)}),Oh.get())}Th.prototype.pa=function(){return this.b.pa()};var Fh={};function Mh(t,e,n){var i=e+\":\"+n;return Fh[i]||(Fh[i]=new Th(t,e,n)),Fh[i]}function jh(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Uh(t){t.g||(t.g=!0,qh(t,!1,null,null))}function Vh(t){t.g&&!t.i&&qh(t,!1,null,null)}function Wh(t,e){if(t.b=function(){return xe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function qh(t,e,n,i){e?i?function(t,e){if(t.b=function(){return Pe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,i):Wh(t,n):Wh(t,{user:null}),t.f=[],t.c=[]}function zh(){}function Kh(){this.Bb=!1,Object.defineProperty(this,\"appVerificationDisabled\",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Hh(t,e){this.a=e,Bi(this,\"verificationId\",t)}function Gh(t,e,n,i){return new Do(t).cb(e,n).then((function(t){return new Hh(t,i)}))}function Bh(t){var e=qr(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new S(\"internal-error\",\"An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.\");Xi(this,{token:t,expirationTime:Wi(1e3*e.exp),authTime:Wi(1e3*e.auth_time),issuedAtTime:Wi(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Xh(t,e,n){var i=e&&e[Qh];if(!i)throw new S(\"argument-error\",\"Internal assert: Invalid MultiFactorResolver\");this.a=t,this.f=dt(e),this.g=n,this.c=new io(null,i),this.b=[];var r=this;z(e[Yh]||[],(function(t){(t=$i(t))&&r.b.push(t)})),Bi(this,\"auth\",this.a),Bi(this,\"session\",this.c),Bi(this,\"hints\",this.b)}jh.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},jh.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,i=t.b,r=t.a&&\"auth/web-storage-unsupported\"==t.a.code,o=t.a&&\"auth/operation-not-supported-in-this-environment\"==t.a.code;this.i=!(!r&&!o),\"unknown\"!=n||r||o?t.a?(qh(this,!0,null,t.a),xe()):e.Da(n,i)?function(t,e,n){n=n.Da(e.c,e.b);var i=e.g,r=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(i,r,a,o).then((function(e){qh(t,s,e,null)})).o((function(e){qh(t,s,null,e)}))}(this,t,e):Pe(new S(\"invalid-auth-event\")):(qh(this,!1,null,null),xe())}else Pe(new S(\"invalid-auth-event\"))},jh.prototype.pa=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new S(\"timeout\");t.a&&t.a.cancel(),t.a=Sn(Ah.get()).then((function(){t.b||(t.g=!0,qh(t,!0,null,e))}))}(t))}))},zh.prototype.h=function(t,e){if(t){var n=t.c,i=t.b;t.a?(e.la(t.c,null,t.a,t.b),xe()):e.Da(n,i)?function(t,e){var n=t.b,i=t.c;e.Da(i,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(i,t,null,n)})).o((function(t){e.la(i,null,t,n)}))}(t,e):Pe(new S(\"invalid-auth-event\"))}else Pe(new S(\"invalid-auth-event\"))},Hh.prototype.confirm=function(t){return t=Lo(this.verificationId,t),this.a(t)};var Yh=\"mfaInfo\",Qh=\"mfaPendingCredential\";function Zh(t,e,n,i){S.call(this,\"multi-factor-auth-required\",i,e),this.b=new Xh(t,e,n),Bi(this,\"resolver\",this.b)}function $h(t,e,n){if(t&&v(t.serverResponse)&&\"auth/multi-factor-auth-required\"===t.code)try{return new Zh(e,t.serverResponse,n,t.message)}catch(t){}return null}function Jh(){}function tl(t){Bi(this,\"factorId\",t.ea),this.a=t}function el(t){if(tl.call(this,t),this.a.ea!=Do.PROVIDER_ID)throw new S(\"argument-error\",\"firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential\")}function nl(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function il(t,e){this.a=t,this.b=[],this.c=w(this.wc,this),un(this.a,\"userReloaded\",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&z(e.multiFactor.enrolledFactors,(function(t){var e=null,i={};if(t){t.uid&&(i[er]=t.uid),t.displayName&&(i[Ji]=t.displayName),t.enrollmentTime&&(i[tr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(i[nr]=t.phoneNumber);try{e=new ir(i)}catch(t){}t=e}else t=null;t&&n.push(t)})),rl(this,n)}function rl(t,e){t.b=e,Bi(t,\"enrolledFactors\",e)}function ol(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error(\"Proactive refresh lower bound greater than upper bound!\")}function al(t){this.c=t,this.b=this.a=null}function sl(t){return t.b&&1e3*t.b.c||0}function ul(t,e){var n=e.refreshToken;t.b=Wr(e[Ya]||\"\"),t.a=n}function hl(t,e){return function(t,e){return new be((function(n,i){\"refresh_token\"==e.grant_type&&e.refresh_token||\"authorization_code\"==e.grant_type&&e.code?ns(t,t.u+\"?key=\"+encodeURIComponent(t.c),(function(t){t?t.error?i(tu(t)):t.access_token&&t.refresh_token?n(t):i(new S(\"internal-error\")):i(new S(\"network-request-failed\"))}),\"POST\",Qn(e).toString(),t.g,t.m.get()):i(new S(\"internal-error\"))}))}(t.c,e).then((function(e){return t.b=Wr(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw\"auth/user-token-expired\"==e.code&&(t.a=null),e}))}function ll(t,e){this.a=t||null,this.b=e||null,Xi(this,{lastSignInTime:Wi(e||null),creationTime:Wi(t||null)})}function cl(t,e,n,i,r,o){Xi(this,{uid:t,displayName:i||null,photoURL:r||null,email:n||null,phoneNumber:o||null,providerId:e})}function pl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=i.a.SDK_VERSION?Si(i.a.SDK_VERSION):null,this.a=new Ba(this.l,A(x),t),this.b=new al(this.a),ml(this,e[Ya]),ul(this.b,e),Bi(this,\"refreshToken\",this.b.a),El(this,n||{}),bn.call(this),this.P=!1,this.s&&Ri()&&(this.i=Mh(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new ol((function(){return t.I(!0)}),(function(t){return!(!t||\"auth/network-request-failed\"!=t.code)}),(function(){var e=sl(t.b)-C()-3e5;return 0<e?e:0}))}(this),this.Z=w(this.Ma,this);var r=this;this.oa=null,this.za=function(t){r.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){dl(r,t.c)},this.$=null,this.O=new il(this,n),Bi(this,\"multiFactor\",this.O)}function fl(t,e){t.aa&&cn(t.aa,\"languageCodeChanged\",t.za),(t.aa=e)&&un(e,\"languageCodeChanged\",t.za)}function dl(t,e){t.W=e,es(t.a,i.a.SDK_VERSION?Si(i.a.SDK_VERSION,t.W):null)}function vl(t,e){t.$&&cn(t.$,\"frameworkChanged\",t.ya),(t.$=e)&&un(e,\"frameworkChanged\",t.ya)}function gl(t){try{return i.a.app(t.m).auth()}catch(e){throw new S(\"internal-error\",\"No firebase.auth.Auth instance is available for the Firebase App '\"+t.m+\"'!\")}}function yl(t){t.D||t.B.b||(t.B.start(),cn(t,\"tokenChanged\",t.Z),un(t,\"tokenChanged\",t.Z))}function _l(t){cn(t,\"tokenChanged\",t.Z),t.B.stop()}function ml(t,e){t.xa=e,Bi(t,\"_lat\",e)}function bl(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Oe(e).then((function(){return t}))}function wl(t){t.i&&!t.P&&(t.P=!0,Ph(t.i,t))}function El(t,e){Xi(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ll(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Cl(){}function Tl(t){return xe().then((function(){if(t.D)throw new S(\"app-deleted\")}))}function Sl(t){return H(t.providerData,(function(t){return t.providerId}))}function Il(t,e){e&&(xl(t,e.providerId),t.providerData.push(e))}function xl(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Pl(t,e,n){(\"uid\"!=e||n)&&t.hasOwnProperty(e)&&Bi(t,e,n)}function Rl(t,e){t!=e&&(Xi(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Bi(t,\"metadata\",function(t){return new ll(t.a,t.b)}(e.metadata)):Bi(t,\"metadata\",new ll),z(e.providerData,(function(e){Il(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Bi(t,\"refreshToken\",t.b.a),rl(t.O,e.O.b))}function Ol(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return $s(t.a,Rs,{idToken:e}).then(w(t.Ic,t))}(t,e).then((function(){return n||Pl(t,\"isAnonymous\",!1),e}))}))}function Al(t,e){e[Ya]&&t.xa!=e[Ya]&&(ul(t.b,e),t.dispatchEvent(new nl(\"tokenChanged\")),ml(t,e[Ya]),Pl(t,\"refreshToken\",t.b.a))}function Nl(t,e){return Ol(t).then((function(){if(B(Sl(t),e))return bl(t).then((function(){throw new S(\"provider-already-linked\")}))}))}function kl(t,e,n){return Yi({user:t,credential:Fo(e),additionalUserInfo:e=Br(e),operationType:n})}function Dl(t,e){return Al(t,e),t.reload().then((function(){return t}))}function Ll(t,e,n,r,o){if(!Ri())return Pe(new S(\"operation-not-supported-in-this-environment\"));if(t.h&&!o)return Pe(t.h);var a=Gr(n.providerId),s=Fi(t.uid+\":::\"),u=null;(!Ni()||yi())&&t.s&&n.isOAuthProvider&&(u=fu(t.s,t.l,t.m,e,n,null,s,i.a.SDK_VERSION||null,null,null,t.tenantId));var h=pi(u,a&&a.ta,a&&a.sa);return r=r().then((function(){if(Ml(t),!o)return t.I().then((function(){}))})).then((function(){return Nh(t.i,h,e,n,s,!!u,t.tenantId)})).then((function(){return new be((function(n,i){t.la(e,null,new S(\"cancelled-popup-request\"),t.g||null),t.f=n,t.w=i,t.g=s,t.c=Lh(t.i,t,e,h,s)}))})).then((function(t){return h&&ci(h),t?Yi(t):null})).o((function(t){throw h&&ci(h),t})),jl(t,r,o)}function Fl(t,e,n,i,r){if(!Ri())return Pe(new S(\"operation-not-supported-in-this-environment\"));if(t.h&&!r)return Pe(t.h);var o=null,a=Fi(t.uid+\":::\");return i=i().then((function(){if(Ml(t),!r)return t.I().then((function(){}))})).then((function(){return t.fa=a,bl(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(Wl,t.v(),e.a)),e})).then((function(){return Dh(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ga)return ql(t.ga);throw o})).then((function(){if(o)throw o})),jl(t,i,r)}function Ml(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new S(\"internal-error\");throw new S(\"auth-domain-config-required\")}}function jl(t,e,n){var i=function(t,e,n){return t.h&&!n?(e.cancel(),Pe(t.h)):e.o((function(e){throw!e||\"auth/user-disabled\"!=e.code&&\"auth/user-token-expired\"!=e.code||(t.h||t.dispatchEvent(new nl(\"userInvalidated\")),t.h=e),e}))}(t,e,n);return t.N.push(i),i.ma((function(){X(t.N,i)})),i.o((function(e){var n=null;throw e&&\"auth/multi-factor-auth-required\"===e.code&&(n=$h(e.v(),gl(t),w(t.hc,t))),n||e}))}function Ul(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ya]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var i=new pl(e,n,t);return t.providerData&&z(t.providerData,(function(t){t&&Il(i,Yi(t))})),t.redirectEventId&&(i.fa=t.redirectEventId),i}function Vl(t){this.a=t,this.b=Yu()}Xh.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=dt(e.f);return delete n[Yh],delete n[Qh],gt(n,t),e.g(n)}))},T(Zh,S),Jh.prototype.ob=function(t,e,n){return e.type==ro?function(t,e,n,i){return n.Fa().then((function(n){return n={idToken:n},void 0!==i&&(n.displayName=i),gt(n,{phoneVerificationInfo:ko(t.a)}),$s(e,xs,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:ko(t.a)}),$s(e,Ps,n)}))}(this,t,e)},T(tl,Jh),T(el,tl),T(nl,Ye),(e=il.prototype).wc=function(t){rl(this,function(t){var e=[];return z(t.mfaInfo||[],(function(t){(t=$i(t))&&e.push(t)})),e}(t.ed))},e.Ob=function(){return this.a.I().then((function(t){return new io(t,null)}))},e.dc=function(t,e){var n=this,i=this.a.a;return this.Ob().then((function(n){return t.ob(i,n,e)})).then((function(t){return Al(n.a,t),n.a.reload()}))},e.$c=function(t){var e=this,n=\"string\"==typeof t?t:t.uid,i=this.a.a;return this.a.I().then((function(t){return $s(i,Zs,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var i=K(e.b,(function(t){return t.uid!=n}));return rl(e,i),Al(e.a,t),e.a.reload().o((function(t){if(\"auth/user-token-expired\"!=t.code)throw t}))}))},e.v=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.v()}))}}},ol.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Sn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=u.document,e=null;return Vi()||!t?xe():new be((function(n){e=function(){Vi()&&(t.removeEventListener(\"visibilitychange\",e,!1),n())},t.addEventListener(\"visibilitychange\",e,!1)})).o((function(n){throw t.removeEventListener(\"visibilitychange\",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},ol.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},al.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:sl(this)}},al.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Pe(new S(\"user-token-expired\")):t||!this.b||C()>sl(this)-3e4?this.a?hl(this,{grant_type:\"refresh_token\",refresh_token:this.a}):xe(null):xe({accessToken:this.b.toString(),refreshToken:this.a})},ll.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(pl,bn),pl.prototype.va=function(t){this.oa=t,ts(this.a,t)},pl.prototype.ja=function(){return this.oa},pl.prototype.Ea=function(){return Z(this.W)},pl.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Bi(pl.prototype,\"providerId\",\"firebase\"),(e=pl.prototype).reload=function(){var t=this;return jl(this,Tl(this).then((function(){return Ol(t).then((function(){return bl(t)})).then(Cl)})))},e.mc=function(t){return this.I(t).then((function(t){return new Bh(t)}))},e.I=function(t){var e=this;return jl(this,Tl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new S(\"internal-error\");return t.accessToken!=e.xa&&(ml(e,t.accessToken),e.dispatchEvent(new nl(\"tokenChanged\"))),Pl(e,\"refreshToken\",t.refreshToken),t.accessToken})))},e.Ic=function(t){if(!(t=t.users)||!t.length)throw new S(\"internal-error\");El(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new cl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Il(this,e[n]);Pl(this,\"isAnonymous\",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new nl(\"userReloaded\",{ed:t}))},e.Jc=function(t){return Hi(\"firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead.\"),this.pb(t)},e.pb=function(t){var e=this,n=null;return jl(this,t.c(this.a,this.uid).then((function(t){return Al(e,t),n=kl(e,t,\"reauthenticate\"),e.h=null,e.reload()})).then((function(){return n})),!0)},e.Ac=function(t){return Hi(\"firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead.\"),this.mb(t)},e.mb=function(t){var e=this,n=null;return jl(this,Nl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=kl(e,t,\"link\"),Dl(e,t)})).then((function(){return n})))},e.Bc=function(t,e){var n=this;return jl(this,Nl(this,\"phone\").then((function(){return Gh(gl(n),t,e,w(n.mb,n))})))},e.Kc=function(t,e){var n=this;return jl(this,xe().then((function(){return Gh(gl(n),t,e,w(n.pb,n))})),!0)},e.xb=function(t){var e=this;return jl(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return Al(e,t),e.reload()})))},e.cd=function(t){var e=this;return jl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Al(e,t),e.reload()})))},e.yb=function(t){var e=this;return jl(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return Al(e,t),e.reload()})))},e.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Tl(this);var e=this;return jl(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Al(e,t),Pl(e,\"displayName\",t.displayName||null),Pl(e,\"photoURL\",t.photoUrl||null),z(e.providerData,(function(t){\"password\"===t.providerId&&(Bi(t,\"displayName\",e.displayName),Bi(t,\"photoURL\",e.photoURL))})),bl(e)})).then(Cl))},e.ad=function(t){var e=this;return jl(this,Ol(this).then((function(n){return B(Sl(e),t)?function(t,e,n){return $s(t,Ts,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return z(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),z(Sl(e),(function(t){n[t]||xl(e,t)})),n[Do.PROVIDER_ID]||Bi(e,\"phoneNumber\",null),bl(e)})):bl(e).then((function(){throw new S(\"no-such-provider\")}))})))},e.delete=function(){var t=this;return jl(this,this.I().then((function(e){return $s(t.a,Cs,{idToken:e})})).then((function(){t.dispatchEvent(new nl(\"userDeleted\"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel(\"app-deleted\");fl(t,null),vl(t,null),t.N=[],t.D=!0,_l(t),Bi(t,\"refreshToken\",null),t.i&&Rh(t.i,t)}))},e.Cb=function(t,e){return!!(\"linkViaPopup\"==t&&(this.g||null)==e&&this.f||\"reauthViaPopup\"==t&&(this.g||null)==e&&this.f||\"linkViaRedirect\"==t&&(this.fa||null)==e||\"reauthViaRedirect\"==t&&(this.fa||null)==e)},e.la=function(t,e,n,i){\"linkViaPopup\"!=t&&\"reauthViaPopup\"!=t||i!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return\"linkViaPopup\"==t&&e==(this.g||null)?w(this.Hb,this):\"reauthViaPopup\"==t&&e==(this.g||null)?w(this.Ib,this):\"linkViaRedirect\"==t&&(this.fa||null)==e?w(this.Hb,this):\"reauthViaRedirect\"==t&&(this.fa||null)==e?w(this.Ib,this):null},e.Cc=function(t){var e=this;return Ll(this,\"linkViaPopup\",t,(function(){return Nl(e,t.providerId).then((function(){return bl(e)}))}),!1)},e.Lc=function(t){return Ll(this,\"reauthViaPopup\",t,(function(){return xe()}),!0)},e.Dc=function(t){var e=this;return Fl(this,\"linkViaRedirect\",t,(function(){return Nl(e,t.providerId)}),!1)},e.Mc=function(t){return Fl(this,\"reauthViaRedirect\",t,(function(){return xe()}),!0)},e.Hb=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jl(this,this.I().then((function(n){return gs(r.a,{requestUri:t,postBody:i,sessionId:e,idToken:n})})).then((function(t){return o=kl(r,t,\"link\"),Dl(r,t)})).then((function(){return o})))},e.Ib=function(t,e,n,i){var r=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jl(this,xe().then((function(){return so(ys(r.a,{requestUri:t,sessionId:e,postBody:i,tenantId:n}),r.uid)})).then((function(t){return o=kl(r,t,\"reauthenticate\"),Al(r,t),r.h=null,r.reload()})).then((function(){return o})),!0)},e.qb=function(t){var e=this,n=null;return jl(this,this.I().then((function(e){return n=e,void 0===t||ft(t)?{}:Mr(new xr(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Ab=function(t,e){var n=this,i=null;return jl(this,this.I().then((function(t){return i=t,void 0===e||ft(e)?{}:Mr(new xr(e))})).then((function(e){return n.a.Ab(i,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.hc=function(t){var e=null,n=this;return jl(this,t=so(xe(t),n.uid).then((function(t){return e=kl(n,t,\"reauthenticate\"),Al(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.v()},e.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&gt(t,this.metadata.v()),z(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.O.v()),t};var Wl={name:\"redirectUser\",F:\"session\"};function ql(t){return $u(t.b,Wl,t.a)}function zl(t){this.a=t,this.b=Yu(),this.c=null,this.f=function(t){var e=Gl(\"local\"),n=Gl(\"session\"),i=Gl(\"none\");return function(t,e,n){var i=Zu(e,n),r=Qu(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Li(u.localStorage.getItem(i))}catch(t){}if(a&&!o)return u.localStorage.removeItem(i),t.set(e,a,n);a&&o&&\"localStorage\"!=r.type&&u.localStorage.removeItem(i)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(r){return r?n:t.b.get(i,t.a).then((function(n){return n?i:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Hl,t.a).then((function(t){return t?Gl(t):e}))}))}))})).then((function(e){return t.c=e,Kl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Gl(\"local\"),this.a,w(this.g,this))}function Kl(t,e){var n,i=[];for(n in Bu)Bu[n]!==e&&i.push($u(t.b,Gl(Bu[n]),t.a));return i.push($u(t.b,Hl,t.a)),function(t){return new be((function(e,n){var i=t.length,r=[];if(i)for(var o=function(t,n){i--,r[t]=n,0==i&&e(r)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],E(o,s),a);else e(r)}))}(i)}zl.prototype.g=function(){var t=this,e=Gl(\"local\");Ql(this,(function(){return xe().then((function(){return t.c&&\"local\"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Kl(t,\"local\").then((function(){t.c=e}))}))}))};var Hl={name:\"persistence\",F:\"session\"};function Gl(t){return{name:\"authUser\",F:t}}function Bl(t,e){return Ql(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Xl(t){return Ql(t,(function(){return $u(t.b,t.c,t.a)}))}function Yl(t,e){return Ql(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ul(t||{})}))}))}function Ql(t,e){return t.f=t.f.then(e,e),t.f}function Zl(t){if(this.l=!1,Bi(this,\"settings\",new Kh),Bi(this,\"app\",t),!oc(this).options||!oc(this).options.apiKey)throw new S(\"invalid-api-key\");t=i.a.SDK_VERSION?Si(i.a.SDK_VERSION):null,this.b=new Ba(oc(this).options&&oc(this).options.apiKey,A(x),t),this.P=[],this.m=[],this.O=[],this.$b=i.a.INTERNAL.createSubscribe(w(this.xc,this)),this.W=void 0,this.ac=i.a.INTERNAL.createSubscribe(w(this.yc,this)),ic(this,null),this.i=new zl(oc(this).options.apiKey+\":\"+oc(this).name),this.B=new Vl(oc(this).options.apiKey+\":\"+oc(this).name),this.Z=hc(this,function(t){var e=oc(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Wl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ul(t||{})}))}(t.B,oc(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),ql(t.B)}));return hc(t,e)}(t).then((function(){return Yl(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Bl(t.i,e).then((function(){return e}))})).o((function(n){return\"auth/network-request-failed\"==n.code?e:Xl(t.i)}))):null})).then((function(e){ic(t,e||null)}));return hc(t,n)}(this)),this.h=hc(this,function(t){return t.Z.then((function(){return ec(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Gl(\"local\"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=w(this.Xc,this),this.Ma=w(this.ca,this),this.xa=w(this.jc,this),this.ya=w(this.uc,this),this.za=w(this.vc,this),this.a=null,function(t){var e=oc(t).options.authDomain,n=oc(t).options.apiKey;e&&Ri()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Mh(e,n,oc(t).name),Ph(t.a,t),ac(t)&&wl(ac(t)),t.D){wl(t.D);var i=t.D;i.va(t.ja()),fl(i,t),dl(i=t.D,t.N),vl(i,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Ec,this),this.s=0,bn.call(this),function(t){Object.defineProperty(t,\"lc\",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,\"ti\",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function $l(t){Ye.call(this,\"languageCodeChanged\"),this.g=t}function Jl(t){Ye.call(this,\"frameworkChanged\"),this.c=t}function tc(t){return t.Zb||Pe(new S(\"auth-domain-config-required\"))}function ec(t){if(!Ri())return Pe(new S(\"operation-not-supported-in-this-environment\"));var e=tc(t).then((function(){return t.a.pa()})).then((function(t){return t?Yi(t):null}));return hc(t,e)}function nc(t,e){var n={};return n.apiKey=oc(t).options.apiKey,n.authDomain=oc(t).options.authDomain,n.appName=oc(t).name,t.Z.then((function(){return function(t,e,n,i){var r=new pl(t,e);return n&&(r.ga=n),i&&dl(r,i),r.reload().then((function(){return r}))}(n,e,t.B,t.Ea())})).then((function(e){return ac(t)&&e.uid==ac(t).uid?(Rl(ac(t),e),t.ca(e)):(ic(t,e),wl(e),t.ca(e))})).then((function(){uc(t)}))}function ic(t,e){ac(t)&&(function(t,e){Y(t.R,(function(t){return t==e}))}(ac(t),t.Ma),cn(ac(t),\"tokenChanged\",t.xa),cn(ac(t),\"userDeleted\",t.ya),cn(ac(t),\"userInvalidated\",t.za),_l(ac(t))),e&&(e.R.push(t.Ma),un(e,\"tokenChanged\",t.xa),un(e,\"userDeleted\",t.ya),un(e,\"userInvalidated\",t.za),0<t.s&&yl(e)),Bi(t,\"currentUser\",e),e&&(e.va(t.ja()),fl(e,t),dl(e,t.N),vl(e,t))}function rc(t,e){var n=null,i=null;return hc(t,e.then((function(e){return n=Fo(e),i=Br(e),nc(t,e)}),(function(e){var n=null;throw e&&\"auth/multi-factor-auth-required\"===e.code&&(n=$h(e.v(),t,w(t.ic,t))),n||e})).then((function(){return Yi({user:ac(t),credential:n,additionalUserInfo:i,operationType:\"signIn\"})})))}function oc(t){return t.app}function ac(t){return t.currentUser}function sc(t){return ac(t)&&ac(t)._lat||null}function uc(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](sc(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](sc(t))}}function hc(t,e){return t.P.push(e),e.ma((function(){X(t.P,e)})),e}function lc(){}function cc(){this.a={},this.b=1e12}zl.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new S(\"invalid-persistence-type\"),n=new S(\"unsupported-persistence-type\");t:{for(i in Bu)if(Bu[i]==t){var i=!0;break t}i=!1}if(!i||\"string\"!=typeof t)throw e;switch(mi()){case\"ReactNative\":if(\"session\"===t)throw n;break;case\"Node\":if(\"none\"!==t)throw n;break;default:if(!Pi()&&\"none\"!==t)throw n}}(t),Ql(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(i){return e=i,Kl(n,t)})).then((function(){if(n.c=Gl(t),e)return n.b.set(n.c,e,n.a)})):xe()}))},T(Zl,bn),T($l,Ye),T(Jl,Ye),(e=Zl.prototype).tb=function(t){return hc(this,t=this.i.tb(t))},e.va=function(t){this.$===t||this.l||(this.$=t,ts(this.b,this.$),this.dispatchEvent(new $l(this.ja())))},e.ja=function(){return this.$},e.dd=function(){var t=u.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.Ec=function(t){this.N.push(t),es(this.b,i.a.SDK_VERSION?Si(i.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Jl(this.N))},e.Ea=function(){return Z(this.N)},e.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},e.S=function(){return this.R},e.toJSON=function(){return{apiKey:oc(this).options.apiKey,authDomain:oc(this).options.authDomain,appName:oc(this).name,currentUser:ac(this)&&ac(this).v()}},e.Cb=function(t,e){switch(t){case\"unknown\":case\"signInViaRedirect\":return!0;case\"signInViaPopup\":return this.g==e&&!!this.f;default:return!1}},e.la=function(t,e,n,i){\"signInViaPopup\"==t&&this.g==i&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},e.Da=function(t,e){return\"signInViaRedirect\"==t||\"signInViaPopup\"==t&&this.g==e&&this.f?w(this.gc,this):null},e.gc=function(t,e,n,i){var r=this,o={requestUri:t,postBody:i,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),r.Z.then((function(){return rc(r,vs(r.b,o))}))},e.Vc=function(t){if(!Ri())return Pe(new S(\"operation-not-supported-in-this-environment\"));var e=this,n=Gr(t.providerId),r=Fi(),o=null;(!Ni()||yi())&&oc(this).options.authDomain&&t.isOAuthProvider&&(o=fu(oc(this).options.authDomain,oc(this).options.apiKey,oc(this).name,\"signInViaPopup\",t,null,r,i.a.SDK_VERSION||null,null,null,this.S()));var a=pi(o,n&&n.ta,n&&n.sa);return hc(this,n=tc(this).then((function(n){return Nh(n,a,\"signInViaPopup\",t,r,!!o,e.S())})).then((function(){return new be((function(t,n){e.la(\"signInViaPopup\",null,new S(\"cancelled-popup-request\"),e.g),e.f=t,e.w=n,e.g=r,e.c=Lh(e.a,e,\"signInViaPopup\",a,r)}))})).then((function(t){return a&&ci(a),t?Yi(t):null})).o((function(t){throw a&&ci(a),t})))},e.Wc=function(t){if(!Ri())return Pe(new S(\"operation-not-supported-in-this-environment\"));var e=this;return hc(this,tc(this).then((function(){return function(t){return Ql(t,(function(){return t.b.set(Hl,t.c.F,t.a)}))}(e.i)})).then((function(){return Dh(e.a,\"signInViaRedirect\",t,void 0,e.S())})))},e.pa=function(){var t=this;return ec(this).then((function(e){return t.a&&Vh(t.a.b),e})).o((function(e){throw t.a&&Vh(t.a.b),e}))},e.bd=function(t){if(!t)return Pe(new S(\"null-user\"));if(this.R!=t.tenantId)return Pe(new S(\"tenant-id-mismatch\"));var e=this,n={};n.apiKey=oc(this).options.apiKey,n.authDomain=oc(this).options.authDomain,n.appName=oc(this).name;var i=function(t,e,n,i){var r=t.b,o={};return o[Ya]=r.b&&r.b.toString(),o.refreshToken=r.a,e=new pl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),i&&dl(e,i),Rl(e,t),e}(t,n,e.B,e.Ea());return hc(this,this.h.then((function(){if(oc(e).options.apiKey!=t.l)return i.reload()})).then((function(){return ac(e)&&t.uid==ac(e).uid?(Rl(ac(e),t),e.ca(t)):(ic(e,i),wl(i),e.ca(i))})).then((function(){uc(e)})))},e.wb=function(){var t=this;return hc(this,this.h.then((function(){return t.a&&Vh(t.a.b),ac(t)?(ic(t,null),Xl(t.i).then((function(){uc(t)}))):xe()})))},e.Xc=function(){var t=this;return Yl(this.i,oc(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ac(t)&&e){n=ac(t).uid;var i=e.uid;n=null!=n&&\"\"!==n&&null!=i&&\"\"!==i&&n==i}if(n)return Rl(ac(t),e),ac(t).I();(ac(t)||e)&&(ic(t,e),e&&(wl(e),e.ga=t.B),t.a&&Ph(t.a,t),uc(t))}}))},e.ca=function(t){return Bl(this.i,t)},e.jc=function(){uc(this),this.ca(ac(this))},e.uc=function(){this.wb()},e.vc=function(){this.wb()},e.ic=function(t){var e=this;return this.h.then((function(){return rc(e,xe(t))}))},e.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ac(e))}))},e.yc=function(t){var e=this;!function(t,e){t.O.push(e),hc(t,t.h.then((function(){!t.l&&B(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(sc(t)))})))}(this,(function(){t.next(ac(e))}))},e.Gc=function(t,e,n){var i=this;return this.aa&&Promise.resolve().then((function(){d(t)?t(ac(i)):d(t.next)&&t.next(ac(i))})),this.$b(t,e,n)},e.Fc=function(t,e,n){var i=this;return this.aa&&Promise.resolve().then((function(){i.W=i.getUid(),d(t)?t(ac(i)):d(t.next)&&t.next(ac(i))})),this.ac(t,e,n)},e.kc=function(t){var e=this;return hc(this,this.h.then((function(){return ac(e)?ac(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Rc=function(t){var e=this;return this.h.then((function(){return rc(e,$s(e.b,Gs,{token:t}))})).then((function(t){var n=t.user;return Pl(n,\"isAnonymous\",!1),e.ca(n),t}))},e.Sc=function(t,e){var n=this;return this.h.then((function(){return rc(n,$s(n.b,Bs,{email:t,password:e}))}))},e.cc=function(t,e){var n=this;return this.h.then((function(){return rc(n,$s(n.b,ws,{email:t,password:e}))}))},e.Ya=function(t){var e=this;return this.h.then((function(){return rc(e,t.ia(e.b))}))},e.Qc=function(t){return Hi(\"firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead.\"),this.Ya(t)},e.vb=function(){var t=this;return this.h.then((function(){var e=ac(t);if(e&&e.isAnonymous){var n=Yi({providerId:null,isNewUser:!1});return Yi({user:e,credential:null,additionalUserInfo:n,operationType:\"signIn\"})}return rc(t,t.b.vb()).then((function(e){var n=e.user;return Pl(n,\"isAnonymous\",!0),t.ca(n),e}))}))},e.getUid=function(){return ac(this)&&ac(this).uid||null},e.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&ac(this)&&yl(ac(this))},e.Nc=function(t){var e=this;z(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&ac(this)&&_l(ac(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.m.push(t),hc(this,this.h.then((function(){e.l||B(e.m,t)&&t(sc(e))})))},e.removeAuthTokenListener=function(t){Y(this.m,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel(\"app-deleted\");return this.P=[],this.i&&(t=this.i).b.removeListener(Gl(\"local\"),t.a,this.oa),this.a&&(Rh(this.a,this),Vh(this.a.b)),Promise.resolve()},e.fc=function(t){return hc(this,function(t,e){return $s(t,Es,{identifier:e,continueUri:Oi()?ui():\"http://localhost\"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},e.zc=function(t){return!!Oo(t)},e.sb=function(t,e){var n=this;return hc(this,xe().then((function(){var t=new xr(e);if(!t.c)throw new S(\"argument-error\",Or+\" must be true when sending sign in link to email\");return Mr(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},e.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},e.jb=function(t,e){return hc(this,this.b.jb(t,e).then((function(){})))},e.Pa=function(t){return hc(this,this.b.Pa(t).then((function(t){return new rr(t)})))},e.fb=function(t){return hc(this,this.b.fb(t).then((function(){})))},e.rb=function(t,e){var n=this;return hc(this,xe().then((function(){return void 0===e||ft(e)?{}:Mr(new xr(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},e.Uc=function(t,e){return hc(this,Gh(this,t,e,w(this.Ya,this)))},e.Tc=function(t,e){var n=this;return hc(this,xe().then((function(){var i=e||ui(),r=Ro(t,i);if(!(i=Oo(i)))throw new S(\"argument-error\",\"Invalid email link!\");if(i.tenantId!==n.S())throw new S(\"tenant-id-mismatch\");return n.Ya(r)})))},lc.prototype.render=function(){},lc.prototype.reset=function(){},lc.prototype.getResponse=function(){},lc.prototype.execute=function(){};var pc=null;function fc(t,e){return(e=dc(e))&&t.a[e]||null}function dc(t){return(t=void 0===t?1e12:t)?t.toString():null}function vc(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h=\"invisible\"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,\"click\",this.i)}function gc(t){if(t.g)throw Error(\"reCAPTCHA mock was already deleted!\")}function yc(){}function _c(){}cc.prototype.render=function(t,e){return this.a[this.b.toString()]=new vc(t,e),this.b++},cc.prototype.reset=function(t){var e=fc(this,t);t=dc(t),e&&t&&(e.delete(),delete this.a[t])},cc.prototype.getResponse=function(t){return(t=fc(this,t))?t.getResponse():null},cc.prototype.execute=function(t){(t=fc(this,t))&&t.execute()},vc.prototype.getResponse=function(){return gc(this),this.b},vc.prototype.execute=function(){gc(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push(\"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\".charAt(Math.floor(62*Math.random()))),t--;return e.join(\"\")}();var e=t.c.callback,n=t.c[\"expired-callback\"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},vc.prototype.delete=function(){gc(this),this.g=!0,clearTimeout(this.a),this.a=null,cn(this.f,\"click\",this.i)},Bi(yc,\"FACTOR_ID\",\"phone\"),_c.prototype.g=function(){return pc||(pc=new cc),xe(pc)},_c.prototype.c=function(){};var mc=null;function bc(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a=\"__rcb\"+Math.floor(1e6*Math.random()).toString()}var wc=new _t(wt,\"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}\"),Ec=new Ui(3e4,6e4);bc.prototype.g=function(t){var e=this;return new be((function(n,i){var r=setTimeout((function(){i(new S(\"network-request-failed\"))}),Ec.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(r),n(u.grecaptcha)}else clearTimeout(r),i(new S(\"internal-error\"));delete u[e.a]},xe(Va(St(wc,{onload:e.a,hl:t||\"\"}))).o((function(){clearTimeout(r),i(new S(\"internal-error\",\"Unable to load external reCAPTCHA dependencies!\"))}))):(clearTimeout(r),n(u.grecaptcha))}))},bc.prototype.c=function(){this.b--};var Cc=null;function Tc(t,e,n,i,r,o,a){if(Bi(this,\"type\",\"recaptcha\"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,a?(mc||(mc=new _c),a=mc):(Cc||(Cc=new bc),a=Cc),this.m=a,this.a=n||{theme:\"light\",type:\"image\"},this.h=[],this.a[xc])throw new S(\"argument-error\",\"sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.\");if(this.i=\"invisible\"===this.a[Pc],!u.document)throw new S(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.\");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new S(\"argument-error\",\"reCAPTCHA container is either not found or already contains inner elements!\");this.s=new Ba(t,o||null,r||null),this.w=i||function(){return null};var s=this;this.l=[];var h=this.a[Sc];this.a[Sc]=function(t){if(Rc(s,t),\"function\"==typeof h)h(t);else if(\"string\"==typeof h){var e=xi(h,u);\"function\"==typeof e&&e(t)}};var l=this.a[Ic];this.a[Ic]=function(){if(Rc(s,null),\"function\"==typeof l)l();else if(\"string\"==typeof l){var t=xi(l,u);\"function\"==typeof t&&t()}}}var Sc=\"callback\",Ic=\"expired-callback\",xc=\"sitekey\",Pc=\"size\";function Rc(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Oc(t,e){return t.h.push(e),e.ma((function(){X(t.h,e)})),e}function Ac(t){if(t.D)throw new S(\"internal-error\",\"RecaptchaVerifier instance has been destroyed.\")}function Nc(t,e,n){var r=!1;try{this.b=n||i.a.app()}catch(t){throw new S(\"argument-error\",\"No firebase.app.App instance is currently initialized.\")}if(!this.b.options||!this.b.options.apiKey)throw new S(\"invalid-api-key\");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=i.a.SDK_VERSION?Si(i.a.SDK_VERSION,a):null,Tc.call(this,n,t,e,(function(){try{var t=o.b.auth().ja()}catch(e){t=null}return t}),a,A(x),r)}function kc(t,e,n,i){t:{n=Array.prototype.slice.call(n);for(var r=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new S(\"internal-error\",\"Argument validator encountered a required argument after an optional argument.\");r++}if(o=e.length,n.length<r||o<n.length)i=\"Expected \"+(r==o?1==r?\"1 argument\":r+\" arguments\":r+\"-\"+o+\" arguments\")+\" but got \"+n.length+\".\";else{for(r=0;r<n.length;r++)if(o=e[r].optional&&void 0===n[r],!e[r].K(n[r])&&!o){if(e=e[r],0>r||r>=Dc.length)throw new S(\"internal-error\",\"Argument validator received an unsupported number of arguments.\");n=Dc[r],i=(i?\"\":n+\" argument \")+(e.name?'\"'+e.name+'\" ':\"\")+\"must be \"+e.J+\".\";break t}i=null}}if(i)throw new S(\"argument-error\",t+\" failed: \"+i)}(e=Tc.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=Oc(this,xe().then((function(){if(Oi()&&!_i())return vi();throw new S(\"operation-not-supported-in-this-environment\",\"RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.\")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,$s(t.s,Ls,{})})).then((function(e){t.a[xc]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Ac(this);var t=this;return Oc(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=ae(e);e=function(t,e,n){var i=arguments,r=document,o=String(i[0]),a=i[1];if(!oe&&a&&(a.name||a.type)){if(o=[\"<\",o],a.name&&o.push(' name=\"',qt(a.name),'\"'),a.type){o.push(' type=\"',qt(a.type),'\"');var s={};gt(s,a),delete s.type,a=s}o.push(\">\"),o=o.join(\"\")}return o=pe(r,o),a&&(\"string\"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(\" \"):se(o,a)),2<i.length&&ce(r,o,i),o}(\"DIV\"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Ac(this);var t=this;return Oc(this,this.render().then((function(e){return new be((function(n){var i=t.g.getResponse(e);if(i)n(i);else{var r=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,r),n(e))};t.l.push(r),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Ac(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Ac(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel(\"RecaptchaVerifier instance has been destroyed.\");if(!this.i){t=ae(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Nc,Tc);var Dc=\"First Second Third Fourth Fifth Sixth Seventh Eighth Ninth\".split(\" \");function Lc(t,e){return{name:t||\"\",J:\"a valid string\",optional:!!e,K:function(t){return\"string\"==typeof t}}}function Fc(t,e){return{name:t||\"\",J:\"a boolean\",optional:!!e,K:function(t){return\"boolean\"==typeof t}}}function Mc(t,e){return{name:t||\"\",J:\"a valid object\",optional:!!e,K:v}}function jc(t,e){return{name:t||\"\",J:\"a function\",optional:!!e,K:d}}function Uc(t,e){return{name:t||\"\",J:\"null\",optional:!!e,K:function(t){return null===t}}}function Vc(t){return{name:t?t+\"Credential\":\"credential\",J:t?\"a valid \"+t+\" credential\":\"a valid credential\",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ia||!n)}}}function Wc(t,e){return v(t)&&\"string\"==typeof t.type&&t.type===e&&d(t.Fa)}function qc(t){return v(t)&&\"string\"==typeof t.uid}function zc(){return{name:\"applicationVerifier\",J:\"an implementation of firebase.auth.ApplicationVerifier\",optional:!1,K:function(t){return!(!t||\"string\"!=typeof t.type||!d(t.verify))}}}function Kc(t,e,n,i){return{name:n||\"\",J:t.J+\" or \"+e.J,optional:!!i,K:function(n){return t.K(n)||e.K(n)}}}function Hc(t,e){for(var n in e){var i=e[n].name;t[i]=Xc(i,t[n],e[n].j)}}function Gc(t,e){for(var n in e){var i=e[n].name;i!==n&&Object.defineProperty(t,i,{get:E((function(t){return this[t]}),n),set:E((function(t,e,n,i){kc(t,[n],[i],!0),this[e]=i}),i,n,e[n].gb),enumerable:!0})}}function Bc(t,e,n,i){t[e]=Xc(e,n,i)}function Xc(t,e,n){function i(){var t=Array.prototype.slice.call(arguments);return kc(o,n,t),e.apply(this,t)}if(!n)return e;var r,o=function(t){return(t=t.split(\".\"))[t.length-1]}(t);for(r in e)i[r]=e[r];for(r in e.prototype)i.prototype[r]=e.prototype[r];return i}Hc(Zl.prototype,{fb:{name:\"applyActionCode\",j:[Lc(\"code\")]},Pa:{name:\"checkActionCode\",j:[Lc(\"code\")]},jb:{name:\"confirmPasswordReset\",j:[Lc(\"code\"),Lc(\"newPassword\")]},cc:{name:\"createUserWithEmailAndPassword\",j:[Lc(\"email\"),Lc(\"password\")]},fc:{name:\"fetchSignInMethodsForEmail\",j:[Lc(\"email\")]},pa:{name:\"getRedirectResult\",j:[]},zc:{name:\"isSignInWithEmailLink\",j:[Lc(\"emailLink\")]},Fc:{name:\"onAuthStateChanged\",j:[Kc(Mc(),jc(),\"nextOrObserver\"),jc(\"opt_error\",!0),jc(\"opt_completed\",!0)]},Gc:{name:\"onIdTokenChanged\",j:[Kc(Mc(),jc(),\"nextOrObserver\"),jc(\"opt_error\",!0),jc(\"opt_completed\",!0)]},rb:{name:\"sendPasswordResetEmail\",j:[Lc(\"email\"),Kc(Mc(\"opt_actionCodeSettings\",!0),Uc(null,!0),\"opt_actionCodeSettings\",!0)]},sb:{name:\"sendSignInLinkToEmail\",j:[Lc(\"email\"),Mc(\"actionCodeSettings\")]},tb:{name:\"setPersistence\",j:[Lc(\"persistence\")]},Qc:{name:\"signInAndRetrieveDataWithCredential\",j:[Vc()]},vb:{name:\"signInAnonymously\",j:[]},Ya:{name:\"signInWithCredential\",j:[Vc()]},Rc:{name:\"signInWithCustomToken\",j:[Lc(\"token\")]},Sc:{name:\"signInWithEmailAndPassword\",j:[Lc(\"email\"),Lc(\"password\")]},Tc:{name:\"signInWithEmailLink\",j:[Lc(\"email\"),Lc(\"emailLink\",!0)]},Uc:{name:\"signInWithPhoneNumber\",j:[Lc(\"phoneNumber\"),zc()]},Vc:{name:\"signInWithPopup\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Wc:{name:\"signInWithRedirect\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},bd:{name:\"updateCurrentUser\",j:[Kc({name:\"user\",J:\"an instance of Firebase User\",optional:!1,K:function(t){return!!(t&&t instanceof pl)}},Uc(),\"user\")]},wb:{name:\"signOut\",j:[]},toJSON:{name:\"toJSON\",j:[Lc(null,!0)]},dd:{name:\"useDeviceLanguage\",j:[]},fd:{name:\"verifyPasswordResetCode\",j:[Lc(\"code\")]}}),Gc(Zl.prototype,{lc:{name:\"languageCode\",gb:Kc(Lc(),Uc(),\"languageCode\")},ti:{name:\"tenantId\",gb:Kc(Lc(),Uc(),\"tenantId\")}}),Zl.Persistence=Bu,Zl.Persistence.LOCAL=\"local\",Zl.Persistence.SESSION=\"session\",Zl.Persistence.NONE=\"none\",Hc(pl.prototype,{delete:{name:\"delete\",j:[]},mc:{name:\"getIdTokenResult\",j:[Fc(\"opt_forceRefresh\",!0)]},I:{name:\"getIdToken\",j:[Fc(\"opt_forceRefresh\",!0)]},Ac:{name:\"linkAndRetrieveDataWithCredential\",j:[Vc()]},mb:{name:\"linkWithCredential\",j:[Vc()]},Bc:{name:\"linkWithPhoneNumber\",j:[Lc(\"phoneNumber\"),zc()]},Cc:{name:\"linkWithPopup\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Dc:{name:\"linkWithRedirect\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Jc:{name:\"reauthenticateAndRetrieveDataWithCredential\",j:[Vc()]},pb:{name:\"reauthenticateWithCredential\",j:[Vc()]},Kc:{name:\"reauthenticateWithPhoneNumber\",j:[Lc(\"phoneNumber\"),zc()]},Lc:{name:\"reauthenticateWithPopup\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},Mc:{name:\"reauthenticateWithRedirect\",j:[{name:\"authProvider\",J:\"a valid Auth provider\",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty(\"isOAuthProvider\"))}}]},reload:{name:\"reload\",j:[]},qb:{name:\"sendEmailVerification\",j:[Kc(Mc(\"opt_actionCodeSettings\",!0),Uc(null,!0),\"opt_actionCodeSettings\",!0)]},toJSON:{name:\"toJSON\",j:[Lc(null,!0)]},ad:{name:\"unlink\",j:[Lc(\"provider\")]},xb:{name:\"updateEmail\",j:[Lc(\"email\")]},yb:{name:\"updatePassword\",j:[Lc(\"password\")]},cd:{name:\"updatePhoneNumber\",j:[Vc(\"phone\")]},zb:{name:\"updateProfile\",j:[Mc(\"profile\")]},Ab:{name:\"verifyBeforeUpdateEmail\",j:[Lc(\"email\"),Kc(Mc(\"opt_actionCodeSettings\",!0),Uc(null,!0),\"opt_actionCodeSettings\",!0)]}}),Hc(cc.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}}),Hc(lc.prototype,{execute:{name:\"execute\"},render:{name:\"render\"},reset:{name:\"reset\"},getResponse:{name:\"getResponse\"}}),Hc(be.prototype,{ma:{name:\"finally\"},o:{name:\"catch\"},then:{name:\"then\"}}),Gc(Kh.prototype,{appVerificationDisabled:{name:\"appVerificationDisabledForTesting\",gb:Fc(\"appVerificationDisabledForTesting\")}}),Hc(Hh.prototype,{confirm:{name:\"confirm\",j:[Lc(\"verificationCode\")]}}),Bc(ao,\"fromJSON\",(function(t){t=\"string\"==typeof t?JSON.parse(t):t;for(var e,n=[fo,xo,No,lo],i=0;i<n.length;i++)if(e=n[i](t))return e;return null}),[Kc(Lc(),Mc(),\"json\")]),Bc(Po,\"credential\",(function(t,e){return new Io(t,e)}),[Lc(\"email\"),Lc(\"password\")]),Hc(Io.prototype,{v:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(_o.prototype,{Aa:{name:\"addScope\",j:[Lc(\"scope\")]},Ia:{name:\"setCustomParameters\",j:[Mc(\"customOAuthParameters\")]}}),Bc(_o,\"credential\",mo,[Kc(Lc(),Mc(),\"token\")]),Bc(Po,\"credentialWithLink\",Ro,[Lc(\"email\"),Lc(\"emailLink\")]),Hc(bo.prototype,{Aa:{name:\"addScope\",j:[Lc(\"scope\")]},Ia:{name:\"setCustomParameters\",j:[Mc(\"customOAuthParameters\")]}}),Bc(bo,\"credential\",wo,[Kc(Lc(),Mc(),\"token\")]),Hc(Eo.prototype,{Aa:{name:\"addScope\",j:[Lc(\"scope\")]},Ia:{name:\"setCustomParameters\",j:[Mc(\"customOAuthParameters\")]}}),Bc(Eo,\"credential\",Co,[Kc(Lc(),Kc(Mc(),Uc()),\"idToken\"),Kc(Lc(),Uc(),\"accessToken\",!0)]),Hc(To.prototype,{Ia:{name:\"setCustomParameters\",j:[Mc(\"customOAuthParameters\")]}}),Bc(To,\"credential\",So,[Kc(Lc(),Mc(),\"token\"),Lc(\"secret\",!0)]),Hc(yo.prototype,{Aa:{name:\"addScope\",j:[Lc(\"scope\")]},credential:{name:\"credential\",j:[Kc(Lc(),Kc(Mc(),Uc()),\"optionsOrIdToken\"),Kc(Lc(),Uc(),\"accessToken\",!0)]},Ia:{name:\"setCustomParameters\",j:[Mc(\"customOAuthParameters\")]}}),Hc(co.prototype,{v:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(uo.prototype,{v:{name:\"toJSON\",j:[Lc(null,!0)]}}),Bc(Do,\"credential\",Lo,[Lc(\"verificationId\"),Lc(\"verificationCode\")]),Hc(Do.prototype,{cb:{name:\"verifyPhoneNumber\",j:[Kc(Lc(),{name:\"phoneInfoOptions\",J:\"valid phone info options\",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Wc(t.session,ro)&&\"string\"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wc(t.session,oo)&&qc(t.multiFactorHint):t.session&&t.multiFactorUid?Wc(t.session,oo)&&\"string\"==typeof t.multiFactorUid:!!t.phoneNumber&&\"string\"==typeof t.phoneNumber)}},\"phoneInfoOptions\"),zc()]}}),Hc(Ao.prototype,{v:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(S.prototype,{toJSON:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(Ko.prototype,{toJSON:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(zo.prototype,{toJSON:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(Zh.prototype,{toJSON:{name:\"toJSON\",j:[Lc(null,!0)]}}),Hc(Xh.prototype,{Pc:{name:\"resolveSignIn\",j:[{name:\"multiFactorAssertion\",J:\"a valid multiFactorAssertion\",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Hc(il.prototype,{Ob:{name:\"getSession\",j:[]},dc:{name:\"enroll\",j:[{name:\"multiFactorAssertion\",J:\"a valid multiFactorAssertion\",optional:!1,K:function(t){return!!t&&!!t.ob}},Lc(\"displayName\",!0)]},$c:{name:\"unenroll\",j:[Kc({name:\"multiFactorInfo\",J:\"a valid multiFactorInfo\",optional:!1,K:qc},Lc(),\"multiFactorInfoIdentifier\")]}}),Hc(Nc.prototype,{clear:{name:\"clear\",j:[]},render:{name:\"render\",j:[]},verify:{name:\"verify\",j:[]}}),Bc(_r,\"parseLink\",Ir,[Lc(\"link\")]),Bc(yc,\"assertion\",(function(t){return new el(t)}),[Vc(\"phone\")]),function(){if(void 0===i.a||!i.a.INTERNAL||!i.a.INTERNAL.registerComponent)throw Error(\"Cannot find the firebase namespace; be sure to include firebase-app.js before this library.\");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ar,PASSWORD_RESET:\"PASSWORD_RESET\",RECOVER_EMAIL:\"RECOVER_EMAIL\",REVERT_SECOND_FACTOR_ADDITION:or,VERIFY_AND_CHANGE_EMAIL:sr,VERIFY_EMAIL:\"VERIFY_EMAIL\"}},Auth:Zl,AuthCredential:ao,Error:S};Bc(t,\"EmailAuthProvider\",Po,[]),Bc(t,\"FacebookAuthProvider\",_o,[]),Bc(t,\"GithubAuthProvider\",bo,[]),Bc(t,\"GoogleAuthProvider\",Eo,[]),Bc(t,\"TwitterAuthProvider\",To,[]),Bc(t,\"OAuthProvider\",yo,[Lc(\"providerId\")]),Bc(t,\"SAMLAuthProvider\",go,[Lc(\"providerId\")]),Bc(t,\"PhoneAuthProvider\",Do,[{name:\"auth\",J:\"an instance of Firebase Auth\",optional:!0,K:function(t){return!!(t&&t instanceof Zl)}}]),Bc(t,\"RecaptchaVerifier\",Nc,[Kc(Lc(),{name:\"\",J:\"an HTML element\",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},\"recaptchaContainer\"),Mc(\"recaptchaParameters\",!0),{name:\"app\",J:\"an instance of Firebase App\",optional:!0,K:function(t){return!!(t&&t instanceof i.a.app.App)}}]),Bc(t,\"ActionCodeURL\",_r,[]),Bc(t,\"PhoneMultiFactorGenerator\",yc,[]),i.a.INTERNAL.registerComponent({name:\"auth\",instanceFactory:function(t){return new Zl(t=t.getProvider(\"app\").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:\"LAZY\",type:\"PUBLIC\"}),i.a.INTERNAL.registerComponent({name:\"auth-internal\",instanceFactory:function(t){return{getUid:w((t=t.getProvider(\"auth\").getImmediate()).getUid,t),getToken:w(t.kc,t),addAuthTokenListener:w(t.bc,t),removeAuthTokenListener:w(t.Nc,t)}},multipleInstances:!1,instantiationMode:\"LAZY\",type:\"PRIVATE\"}),i.a.registerVersion(\"@firebase/auth\",\"0.14.2\"),i.a.INTERNAL.extendNamespace({User:pl})}()}).apply(void 0!==t?t:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})}).call(this,n(4))},function(t,e,n){\"use strict\";(function(i){Object.defineProperty(e,\"__esModule\",{value:!0});var r,o,a=(r=n(0))&&\"object\"==typeof r&&\"default\"in r?r.default:r,s=n(1),u=n(2),h=n(6),l=n(5),c=function(){function t(t){this.domStorage_=t,this.prefix_=\"firebase:\"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),u.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:u.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),p=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return u.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if(\"undefined\"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem(\"firebase:sentinel\",\"cache\"),e.removeItem(\"firebase:sentinel\"),new c(e)}}catch(t){}return new p},d=f(\"localStorage\"),v=f(\"sessionStorage\"),g=new h.Logger(\"@firebase/database\"),y=(o=1,function(){return o++}),_=function(t){var e=u.stringToByteArray(t),n=new u.Sha1;n.update(e);var i=n.digest();return u.base64.encodeByteArray(i)},m=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=\"\",i=0;i<t.length;i++){var r=t[i];Array.isArray(r)||r&&\"object\"==typeof r&&\"number\"==typeof r.length?n+=m.apply(null,r):n+=\"object\"==typeof r?u.stringify(r):r,n+=\" \"}return n},b=null,w=!0,E=function(t,e){u.assert(!e||!0===t||!1===t,\"Can't turn on custom loggers persistently.\"),!0===t?(g.logLevel=h.LogLevel.VERBOSE,b=g.log.bind(g),e&&v.set(\"logging_enabled\",!0)):\"function\"==typeof t?b=t:(b=null,v.remove(\"logging_enabled\"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===v.get(\"logging_enabled\")&&E(!0)),b){var n=m.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,s.__spread([t],e))}},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"FIREBASE INTERNAL ERROR: \"+m.apply(void 0,s.__spread(t));g.error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"FIREBASE FATAL ERROR: \"+m.apply(void 0,s.__spread(t));throw g.error(n),new Error(n)},x=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"FIREBASE WARNING: \"+m.apply(void 0,s.__spread(t));g.warn(n)},P=function(t){return\"number\"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},R=\"[MIN_NAME]\",O=\"[MAX_NAME]\",A=function(t,e){if(t===e)return 0;if(t===R||e===O)return-1;if(e===R||t===O)return 1;var n=U(t),i=U(e);return null!==n?null!==i?n-i==0?t.length-e.length:n-i:-1:null!==i?1:t<e?-1:1},N=function(t,e){return t===e?0:t<e?-1:1},k=function(t,e){if(e&&t in e)return e[t];throw new Error(\"Missing required key (\"+t+\") in object: \"+u.stringify(e))},D=function(t){if(\"object\"!=typeof t||null===t)return u.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var i=\"{\",r=0;r<e.length;r++)0!==r&&(i+=\",\"),i+=u.stringify(e[r]),i+=\":\",i+=D(t[e[r]]);return i+=\"}\"},L=function(t,e){var n=t.length;if(n<=e)return[t];for(var i=[],r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function F(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){u.assert(!P(t),\"Invalid JSON number\");var e,n,i,r,o;0===t?(n=0,i=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,i=Math.round(t*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(t/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var s=a.join(\"\"),h=\"\";for(o=0;o<64;o+=8){var l=parseInt(s.substr(o,8),2).toString(16);1===l.length&&(l=\"0\"+l),h+=l}return h.toLowerCase()},j=new RegExp(\"^-?(0*)\\\\d{1,10}$\"),U=function(t){if(j.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},V=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||\"\";throw x(\"Exception was thrown by user callback.\",e),t}),Math.floor(0))}},W=function(t,e){var n=setTimeout(t,e);return\"object\"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){if(void 0===e){this.pieces_=t.split(\"/\");for(var n=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[n]=this.pieces_[i],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,\"Empty\",{get:function(){return new t(\"\")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t=\"\",e=this.pieceNum_;e<this.pieces_.length;e++)\"\"!==this.pieces_[e]&&(t+=\"/\"+this.pieces_[e]);return t||\"/\"},t.prototype.toUrlEncodedString=function(){for(var t=\"\",e=this.pieceNum_;e<this.pieces_.length;e++)\"\"!==this.pieces_[e]&&(t+=\"/\"+encodeURIComponent(String(this.pieces_[e])));return t||\"/\"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],i=this.pieceNum_;i<this.pieces_.length;i++)n.push(this.pieces_[i]);if(e instanceof t)for(i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{var r=e.split(\"/\");for(i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var i=e.getFront(),r=n.getFront();if(null===i)return n;if(i===r)return t.relativePath(e.popFront(),n.popFront());throw new Error(\"INTERNAL ERROR: innerPath (\"+n+\") is not within outerPath (\"+e+\")\")},t.comparePaths=function(t,e){for(var n=t.slice(),i=e.slice(),r=0;r<n.length&&r<i.length;r++){var o=A(n[r],i[r]);if(0!==o)return o}return n.length===i.length?0:n.length<i.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),z=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=u.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,\"MAX_PATH_DEPTH\",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"MAX_PATH_LENGTH_BYTES\",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=u.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=u.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+\"has a key path longer than \"+t.MAX_PATH_LENGTH_BYTES+\" bytes (\"+this.byteLength_+\").\");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+\"path specified exceeds the maximum depth that can be written (\"+t.MAX_PATH_DEPTH+\") or object contains a cycle \"+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?\"\":\"in property '\"+this.parts_.join(\".\")+\"'\"},t}(),K=function(){function t(t,e,n,i,r,o){void 0===r&&(r=\"\"),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=i,this.persistenceKey=r,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(\".\")+1),this.internalHost=d.get(\"host:\"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return\"s-\"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return\"firebaseio-demo.com\"===this.domain},t.prototype.isCustomHost=function(){return\"firebaseio.com\"!==this.domain&&\"firebaseio-demo.com\"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set(\"host:\"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(u.assert(\"string\"==typeof t,\"typeof type must == string\"),u.assert(\"object\"==typeof e,\"typeof params must == object\"),\"websocket\"===t)n=(this.secure?\"wss://\":\"ws://\")+this.internalHost+\"/.ws?\";else{if(\"long_polling\"!==t)throw new Error(\"Unknown connection type: \"+t);n=(this.secure?\"https://\":\"http://\")+this.internalHost+\"/.lp?\"}this.needsQueryParam()&&(e.ns=this.namespace);var i=[];return F(e,(function(t,e){i.push(t+\"=\"+e)})),n+i.join(\"&\")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+=\"<\"+this.persistenceKey+\">\"),t},t.prototype.toURLString=function(){return(this.secure?\"https://\":\"http://\")+this.host},t}();var H,G,B,X,Y,Q=function(t){var e=Z(t),n=e.namespace;\"firebase\"===e.domain&&I(e.host+\" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead\"),n&&\"undefined\"!==n||\"localhost\"===e.domain||I(\"Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com\"),e.secure||\"undefined\"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf(\"https:\")&&x(\"Insecure Firebase access from a secure page. Please use https in calls to new Firebase().\");var i=\"ws\"===e.scheme||\"wss\"===e.scheme;return{repoInfo:new K(e.host,e.secure,n,i,\"\",n!==e.subdomain),path:new q(e.pathString)}},Z=function(t){var e=\"\",n=\"\",i=\"\",r=\"\",o=\"\",a=!0,u=\"https\",h=443;if(\"string\"==typeof t){var l=t.indexOf(\"//\");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var c=t.indexOf(\"/\");-1===c&&(c=t.length);var p=t.indexOf(\"?\");-1===p&&(p=t.length),e=t.substring(0,Math.min(c,p)),c<p&&(r=\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction(t){for(var e=\"\",n=t.split(\"/\"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\\+/g,\" \"))}catch(t){}e+=\"/\"+r}return e}(t.substring(c,p)));var f=function(t){var e,n,i={};\"?\"===t.charAt(0)&&(t=t.substring(1));try{for(var r=s.__values(t.split(\"&\")),o=r.next();!o.done;o=r.next()){var a=o.value;if(0!==a.length){var u=a.split(\"=\");2===u.length?i[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):x(\"Invalid query segment '\"+a+\"' in query '\"+t+\"'\")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i}(t.substring(Math.min(t.length,p)));(l=e.indexOf(\":\"))>=0?(a=\"https\"===u||\"wss\"===u,h=parseInt(e.substring(l+1),10)):l=t.length;var d=e.split(\".\");3===d.length?(n=d[1],o=i=d[0].toLowerCase()):2===d.length?n=d[0]:\"localhost\"===d[0].slice(0,l).toLowerCase()&&(n=\"localhost\"),\"ns\"in f&&(o=f.ns)}return{host:e,port:h,domain:n,subdomain:i,secure:a,scheme:u,pathString:r,namespace:o}},$=/[\\[\\].#$\\/\\u0000-\\u001F\\u007F]/,J=/[\\[\\].#$\\u0000-\\u001F\\u007F]/,tt=function(t){return\"string\"==typeof t&&0!==t.length&&!$.test(t)},et=function(t){return\"string\"==typeof t&&0!==t.length&&!J.test(t)},nt=function(t){return null===t||\"string\"==typeof t||\"number\"==typeof t&&!P(t)||t&&\"object\"==typeof t&&u.contains(t,\".sv\")},it=function(t,e,n,i,r){r&&void 0===n||rt(u.errorPrefix(t,e,r),n,i)},rt=function(t,e,n){var i=n instanceof q?new z(n,t):n;if(void 0===e)throw new Error(t+\"contains undefined \"+i.toErrorString());if(\"function\"==typeof e)throw new Error(t+\"contains a function \"+i.toErrorString()+\" with contents = \"+e.toString());if(P(e))throw new Error(t+\"contains \"+e.toString()+\" \"+i.toErrorString());if(\"string\"==typeof e&&e.length>10485760/3&&u.stringLength(e)>10485760)throw new Error(t+\"contains a string greater than 10485760 utf8 bytes \"+i.toErrorString()+\" ('\"+e.substring(0,50)+\"...')\");if(e&&\"object\"==typeof e){var r=!1,o=!1;if(F(e,(function(e,n){if(\".value\"===e)r=!0;else if(\".priority\"!==e&&\".sv\"!==e&&(o=!0,!tt(e)))throw new Error(t+\" contains an invalid key (\"+e+\") \"+i.toErrorString()+'.  Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');i.push(e),rt(t,n,i),i.pop()})),r&&o)throw new Error(t+' contains \".value\" child '+i.toErrorString()+\" in addition to actual children.\")}},ot=function(t,e,n,i,r){if(!r||void 0!==n){var o=u.errorPrefix(t,e,r);if(!n||\"object\"!=typeof n||Array.isArray(n))throw new Error(o+\" must be an object containing the children to replace.\");var a=[];F(n,(function(t,e){var n=new q(t);if(rt(o,e,i.child(n)),\".priority\"===n.getBack()&&!nt(e))throw new Error(o+\"contains an invalid value for '\"+n.toString()+\"', which must be a valid Firebase priority (a string, finite number, server value, or null).\");a.push(n)})),function(t,e){var n,i;for(n=0;n<e.length;n++)for(var r=(i=e[n]).slice(),o=0;o<r.length;o++)if(\".priority\"===r[o]&&o===r.length-1);else if(!tt(r[o]))throw new Error(t+\"contains an invalid key (\"+r[o]+\") in path \"+i.toString()+'. Keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\"');e.sort(q.comparePaths);var a=null;for(n=0;n<e.length;n++){if(i=e[n],null!==a&&a.contains(i))throw new Error(t+\"contains a path \"+a.toString()+\" that is ancestor of another path \"+i.toString());a=i}}(o,a)}},at=function(t,e,n,i){if(!i||void 0!==n){if(P(n))throw new Error(u.errorPrefix(t,e,i)+\"is \"+n.toString()+\", but must be a valid Firebase priority (a string, finite number, server value, or null).\");if(!nt(n))throw new Error(u.errorPrefix(t,e,i)+\"must be a valid Firebase priority (a string, finite number, server value, or null).\")}},st=function(t,e,n,i){if(!i||void 0!==n)switch(n){case\"value\":case\"child_added\":case\"child_removed\":case\"child_changed\":case\"child_moved\":break;default:throw new Error(u.errorPrefix(t,e,i)+'must be a valid event type = \"value\", \"child_added\", \"child_removed\", \"child_changed\", or \"child_moved\".')}},ut=function(t,e,n,i){if(!(i&&void 0===n||tt(n)))throw new Error(u.errorPrefix(t,e,i)+'was an invalid key = \"'+n+'\".  Firebase keys must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"/\", \"[\", or \"]\").')},ht=function(t,e,n,i){if(!(i&&void 0===n||et(n)))throw new Error(u.errorPrefix(t,e,i)+'was an invalid path = \"'+n+'\". Paths must be non-empty strings and can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\"')},lt=function(t,e,n,i){n&&(n=n.replace(/^\\/*\\.info(\\/|$)/,\"/\")),ht(t,e,n,i)},ct=function(t,e){if(\".info\"===e.getFront())throw new Error(t+\" failed = Can't modify data under /.info/\")},pt=function(t,e,n){var i=n.path.toString();if(\"string\"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!tt(n.repoInfo.namespace)&&\"localhost\"!==n.repoInfo.host.split(\":\")[0]||0!==i.length&&!function(t){return t&&(t=t.replace(/^\\/*\\.info(\\/|$)/,\"/\")),et(t)}(i))throw new Error(u.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\\'t contain \".\", \"#\", \"$\", \"[\", or \"]\".')},ft=function(t,e,n,i){if((!i||void 0!==n)&&\"boolean\"!=typeof n)throw new Error(u.errorPrefix(t,e,i)+\"must be a boolean.\")},dt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){u.validateArgCount(\"OnDisconnect.cancel\",0,1,arguments.length),u.validateCallback(\"OnDisconnect.cancel\",1,t,!0);var e=new u.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){u.validateArgCount(\"OnDisconnect.remove\",0,1,arguments.length),ct(\"OnDisconnect.remove\",this.path_),u.validateCallback(\"OnDisconnect.remove\",1,t,!0);var e=new u.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){u.validateArgCount(\"OnDisconnect.set\",1,2,arguments.length),ct(\"OnDisconnect.set\",this.path_),it(\"OnDisconnect.set\",1,t,this.path_,!1),u.validateCallback(\"OnDisconnect.set\",2,e,!0);var n=new u.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){u.validateArgCount(\"OnDisconnect.setWithPriority\",2,3,arguments.length),ct(\"OnDisconnect.setWithPriority\",this.path_),it(\"OnDisconnect.setWithPriority\",1,t,this.path_,!1),at(\"OnDisconnect.setWithPriority\",2,e,!1),u.validateCallback(\"OnDisconnect.setWithPriority\",3,n,!0);var i=new u.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,i.wrapCallback(n)),i.promise},t.prototype.update=function(t,e){if(u.validateArgCount(\"OnDisconnect.update\",1,2,arguments.length),ct(\"OnDisconnect.update\",this.path_),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[\"\"+i]=t[i];t=n,x(\"Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}ot(\"OnDisconnect.update\",1,t,this.path_,!1),u.validateCallback(\"OnDisconnect.update\",2,e,!0);var r=new u.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,r.wrapCallback(e)),r.promise},t}(),vt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return u.validateArgCount(\"TransactionResult.toJSON\",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),gt=(H=\"-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz\",G=0,B=[],function(t){var e,n=t===G;G=t;var i=new Array(8);for(e=7;e>=0;e--)i[e]=H.charAt(t%64),t=Math.floor(t/64);u.assert(0===t,\"Cannot push at time == 0\");var r=i.join(\"\");if(n){for(e=11;e>=0&&63===B[e];e--)B[e]=0;B[e]++}else for(e=0;e<12;e++)B[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)r+=H.charAt(B[e]);return u.assert(20===r.length,\"nextPushId: Length should be 20.\"),r}),yt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),_t=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new yt(R,t),i=new yt(R,e);return 0!==this.compare(n,i)},t.prototype.minPost=function(){return yt.MIN},t}(),mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),Object.defineProperty(e,\"__EMPTY_NODE\",{get:function(){return X},set:function(t){X=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw u.assertionError(\"KeyIndex.isDefinedOn not expected to be called.\")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return yt.MIN},e.prototype.maxPost=function(){return new yt(O,X)},e.prototype.makePost=function(t,e){return u.assert(\"string\"==typeof t,\"KeyIndex indexValue must always be a string.\"),new yt(t,X)},e.prototype.toString=function(){return\".key\"},e}(_t),bt=new mt;var wt,Et,Ct,Tt=function(t){return\"number\"==typeof t?\"number:\"+M(t):\"string:\"+t},St=function(t){if(t.isLeafNode()){var e=t.val();u.assert(\"string\"==typeof e||\"number\"==typeof e||\"object\"==typeof e&&u.contains(e,\".sv\"),\"Priority must be a string or number.\")}else u.assert(t===Y||t.isEmpty(),\"priority of unexpected type.\");u.assert(t===Y||t.getPriority().isEmpty(),\"Priority nodes can't have a priority of their own.\")},It=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,u.assert(void 0!==this.value_&&null!==this.value_,\"LeafNode shouldn't be created with null/undefined value.\"),St(this.priorityNode_)}return Object.defineProperty(t,\"__childrenNodeConstructor\",{get:function(){return wt},set:function(t){wt=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return\".priority\"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:\".priority\"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return\".priority\"===e?this.updatePriority(n):n.isEmpty()&&\".priority\"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var i=e.getFront();return null===i?n:n.isEmpty()&&\".priority\"!==i?this:(u.assert(\".priority\"!==i||1===e.getLength(),\".priority must be the last token in a path\"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{\".value\":this.getValue(),\".priority\":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t=\"\";this.priorityNode_.isEmpty()||(t+=\"priority:\"+Tt(this.priorityNode_.val())+\":\");var e=typeof this.value_;t+=e+\":\",t+=\"number\"===e?M(this.value_):this.value_,this.lazyHash_=_(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(u.assert(e.isLeafNode(),\"Unknown node type\"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,i=typeof this.value_,r=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(i);return u.assert(r>=0,\"Unknown leaf type: \"+n),u.assert(o>=0,\"Unknown leaf type: \"+i),r===o?\"object\"===i?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-r},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=[\"object\",\"boolean\",\"number\",\"string\"],t}();var xt,Pt,Rt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),i=e.node.getPriority(),r=n.compareTo(i);return 0===r?A(t.name,e.name):r},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return yt.MIN},e.prototype.maxPost=function(){return new yt(O,new It(\"[PRIORITY-POST]\",Ct))},e.prototype.makePost=function(t,e){var n=Et(t);return new yt(e,new It(\"[PRIORITY-POST]\",n))},e.prototype.toString=function(){return\".priority\"},e}(_t)),Ot=function(){function t(t,e,n,i,r){void 0===r&&(r=null),this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,i,r,o){this.key=e,this.value=n,this.color=null!=i?i:t.RED,this.left=null!=r?r:kt.EMPTY_NODE,this.right=null!=o?o:kt.EMPTY_NODE}return t.prototype.copy=function(e,n,i,r,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var i=this,r=n(t,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return kt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,i;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return kt.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error(\"Red node has red child(\"+this.key+\",\"+this.value+\")\");if(this.right.isRed_())throw new Error(\"Right child of (\"+this.key+\",\"+this.value+\") is red\");var t=this.left.check_();if(t!==this.right.check_())throw new Error(\"Black depths differ\");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Nt=function(){function t(){}return t.prototype.copy=function(t,e,n,i,r){return this},t.prototype.insert=function(t,e,n){return new At(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),kt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,At.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,i=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(i=n,n=n.right)}throw new Error(\"Attempted to find predecessor key for a nonexistent key.  What gives?\")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ot(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ot(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ot(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ot(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Nt,t}(),Dt=Math.log(2),Lt=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Dt,10)),this.current_=this.count-1;var n,i=(n=this.count,parseInt(Array(n+1).join(\"1\"),2));this.bits_=t+1&i}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Ft=function(t,e,n,i){t.sort(e);var r=function(e,i){var o,a,s=i-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new At(a,o.node,At.BLACK,null,null);var u=parseInt(s/2,10)+e,h=r(e,u),l=r(u+1,i);return o=t[u],a=n?n(o):o,new At(a,o.node,At.BLACK,h,l)},o=function(e){for(var i=null,o=null,a=t.length,s=function(e,i){var o=a-e,s=a;a-=e;var h=r(o+1,s),l=t[o],c=n?n(l):l;u(new At(c,l.node,i,null,h))},u=function(t){i?(i.left=t,i=t):(o=t,i=t)},h=0;h<e.count;++h){var l=e.nextBitIsOne(),c=Math.pow(2,e.count-(h+1));l?s(c,At.BLACK):(s(c,At.BLACK),s(c,At.RED))}return o}(new Lt(t.length));return new kt(i||e,o)},Mt={},jt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,\"Default\",{get:function(){return u.assert(Mt&&Rt,\"ChildrenNode.ts has not been loaded\"),xt=xt||new t({\".priority\":Mt},{\".priority\":Rt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=u.safeGet(this.indexes_,t);if(!e)throw new Error(\"No index defined for \"+t);return e instanceof kt?e:null},t.prototype.hasIndex=function(t){return u.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){u.assert(e!==bt,\"KeyIndex always exists and isn't meant to be added to the IndexMap.\");for(var i,r=[],o=!1,a=n.getIterator(yt.Wrap),h=a.getNext();h;)o=o||e.isDefinedOn(h.node),r.push(h),h=a.getNext();i=o?Ft(r,e.getCompare()):Mt;var l=e.toString(),c=s.__assign({},this.indexSet_);c[l]=e;var p=s.__assign({},this.indexes_);return p[l]=i,new t(p,c)},t.prototype.addToIndexes=function(e,n){var i=this;return new t(u.map(this.indexes_,(function(t,r){var o=u.safeGet(i.indexSet_,r);if(u.assert(o,\"Missing index implementation for \"+r),t===Mt){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(yt.Wrap),h=s.getNext();h;)h.name!==e.name&&a.push(h),h=s.getNext();return a.push(e),Ft(a,o.getCompare())}return Mt}var l=n.get(e.name),c=t;return l&&(c=c.remove(new yt(e.name,l))),c.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(u.map(this.indexes_,(function(t){if(t===Mt)return t;var i=n.get(e.name);return i?t.remove(new yt(e.name,i)):t})),this.indexSet_)},t}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction Ut(t,e){return A(t.name,e.name)}function Vt(t,e){return A(t,e)}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Wt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&St(this.priorityNode_),this.children_.isEmpty()&&u.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),\"An empty node cannot have a priority\")}return Object.defineProperty(t,\"EMPTY_NODE\",{get:function(){return Pt||(Pt=new t(new kt(Vt),null,jt.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Pt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(\".priority\"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Pt:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(u.assert(n,\"We should always be passing snapshot nodes\"),\".priority\"===e)return this.updatePriority(n);var i=new yt(e,n),r=void 0,o=void 0;n.isEmpty()?(r=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(i,this.children_));var a=r.isEmpty()?Pt:this.priorityNode_;return new t(r,a,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;u.assert(\".priority\"!==t.getFront()||1===t.getLength(),\".priority must be the last token in a path\");var i=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,i)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},i=0,r=0,o=!0;if(this.forEachChild(Rt,(function(a,s){n[a]=s.val(e),i++,o&&t.INTEGER_REGEXP_.test(a)?r=Math.max(r,Number(a)):o=!1})),!e&&o&&r<2*i){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[\".priority\"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t=\"\";this.getPriority().isEmpty()||(t+=\"priority:\"+Tt(this.getPriority().val())+\":\"),this.forEachChild(Rt,(function(e,n){var i=n.hash();\"\"!==i&&(t+=\":\"+e+\":\"+i)})),this.lazyHash_=\"\"===t?\"\":_(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new yt(t,e));return r?r.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new yt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new yt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getIteratorFrom(t.name,yt.Wrap),r=i.peek();null!=r&&e.compare(r,t)<0;)i.getNext(),r=i.peek();return i},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var i=this.children_.getReverseIteratorFrom(t.name,yt.Wrap),r=i.peek();null!=r&&e.compare(r,t)>0;)i.getNext(),r=i.peek();return i},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qt?-1:0},t.prototype.withIndex=function(e){if(e===bt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===bt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Rt),i=e.getIterator(Rt),r=n.getNext(),o=i.getNext();r&&o;){if(r.name!==o.name||!r.node.equals(o.node))return!1;r=n.getNext(),o=i.getNext()}return null===r&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===bt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\\d*)$/,t}(),qt=new(function(t){function e(){return t.call(this,new kt(Vt),Wt.EMPTY_NODE,jt.Default)||this}return s.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Wt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Wt));Object.defineProperties(yt,{MIN:{value:new yt(R,Wt.EMPTY_NODE)},MAX:{value:new yt(O,qt)}}),mt.__EMPTY_NODE=Wt.EMPTY_NODE,It.__childrenNodeConstructor=Wt,Y=qt,function(t){Ct=t}(qt);function zt(t,e){if(void 0===e&&(e=null),null===t)return Wt.EMPTY_NODE;if(\"object\"==typeof t&&\".priority\"in t&&(e=t[\".priority\"]),u.assert(null===e||\"string\"==typeof e||\"number\"==typeof e||\"object\"==typeof e&&\".sv\"in e,\"Invalid priority type found: \"+typeof e),\"object\"==typeof t&&\".value\"in t&&null!==t[\".value\"]&&(t=t[\".value\"]),\"object\"!=typeof t||\".sv\"in t)return new It(t,zt(e));if(t instanceof Array){var n=Wt.EMPTY_NODE;return F(t,(function(e,i){if(u.contains(t,e)&&\".\"!==e.substring(0,1)){var r=zt(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r))}})),n.updatePriority(zt(e))}var i=[],r=!1;if(F(t,(function(t,e){if(\".\"!==t.substring(0,1)){var n=zt(e);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new yt(t,n)))}})),0===i.length)return Wt.EMPTY_NODE;var o=Ft(i,Ut,(function(t){return t.name}),Vt);if(r){var a=Ft(i,Rt.getCompare());return new Wt(o,zt(e),new jt({\".priority\":a},{\".priority\":Rt}))}return new Wt(o,zt(e),jt.Default)}!function(t){Et=t}(zt);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Kt,Ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return yt.MIN},e.prototype.maxPost=function(){return yt.MAX},e.prototype.makePost=function(t,e){var n=zt(t);return new yt(e,n)},e.prototype.toString=function(){return\".value\"},e}(_t)),Gt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,u.assert(!e.isEmpty()&&\".priority\"!==e.getFront(),\"Can't create PathIndex with empty path or .priority key\"),n}return s.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),i=this.extractChild(e.node),r=n.compareTo(i);return 0===r?A(t.name,e.name):r},e.prototype.makePost=function(t,e){var n=zt(t),i=Wt.EMPTY_NODE.updateChild(this.indexPath_,n);return new yt(e,i)},e.prototype.maxPost=function(){var t=Wt.EMPTY_NODE.updateChild(this.indexPath_,qt);return new yt(O,t)},e.prototype.toString=function(){return this.indexPath_.slice().join(\"/\")},e}(_t),Bt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return u.validateArgCount(\"DataSnapshot.val\",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return u.validateArgCount(\"DataSnapshot.exportVal\",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return u.validateArgCount(\"DataSnapshot.toJSON\",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return u.validateArgCount(\"DataSnapshot.exists\",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){u.validateArgCount(\"DataSnapshot.child\",0,1,arguments.length),e=String(e),ht(\"DataSnapshot.child\",1,e,!1);var n=new q(e),i=this.ref_.child(n);return new t(this.node_.getChild(n),i,Rt)},t.prototype.hasChild=function(t){u.validateArgCount(\"DataSnapshot.hasChild\",1,1,arguments.length),ht(\"DataSnapshot.hasChild\",1,t,!1);var e=new q(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return u.validateArgCount(\"DataSnapshot.getPriority\",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(u.validateArgCount(\"DataSnapshot.forEach\",1,1,arguments.length),u.validateCallback(\"DataSnapshot.forEach\",1,e,!1),this.node_.isLeafNode())return!1;var i=this.node_;return!!i.forEachChild(this.index_,(function(i,r){return e(new t(r,n.ref_.child(i),Rt))}))},t.prototype.hasChildren=function(){return u.validateArgCount(\"DataSnapshot.hasChildren\",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,\"key\",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return u.validateArgCount(\"DataSnapshot.numChildren\",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return u.validateArgCount(\"DataSnapshot.ref\",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Xt=function(){function t(t,e,n,i){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=i}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return\"value\"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+\":\"+this.eventType+\":\"+u.stringify(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return\"cancel\"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+\":cancel\"},t}(),Qt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return\"value\"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt(\"value\",this,new Bt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if(\"cancel\"===t.getEventType()){u.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callback_;return function(){i.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Zt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e=\"children_added\"===t?\"child_added\":t;return e=\"children_removed\"===e?\"child_removed\":e,u.contains(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){u.assert(null!=t.childName,\"Child events should have a childName.\");var n=e.getRef().child(t.childName),i=e.getQueryParams().getIndex();return new Xt(t.type,this,new Bt(t.snapshotNode,n,i),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if(\"cancel\"===t.getEventType()){u.assert(this.cancelCallback_,\"Raising a cancel event on a listener with no cancel callback\");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var i=this.callbacks_[t.eventType];return function(){i.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var i=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),o=i.length;if(o===r.length){if(1===o){var a=i[0],s=r[0];return!(s!==a||e.callbacks_[a]&&this.callbacks_[s]&&e.callbacks_[a]!==this.callbacks_[s])}return r.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),$t=function(){function t(t,e,n,i){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=i}return Object.defineProperty(t,\"__referenceConstructor\",{get:function(){return u.assert(Kt,\"Reference.ts has not been loaded\"),Kt},set:function(t){Kt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===bt){var i=\"Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().\",r=\"Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.\";if(t.hasStart()){if(t.getIndexStartName()!==R)throw new Error(i);if(\"string\"!=typeof e)throw new Error(r)}if(t.hasEnd()){if(t.getIndexEndName()!==O)throw new Error(i);if(\"string\"!=typeof n)throw new Error(r)}}else if(t.getIndex()===Rt){if(null!=e&&!nt(e)||null!=n&&!nt(n))throw new Error(\"Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).\")}else if(u.assert(t.getIndex()instanceof Gt||t.getIndex()===Ht,\"unknown index type.\"),null!=e&&\"object\"==typeof e||null!=n&&\"object\"==typeof n)throw new Error(\"Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.\")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error(\"Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.\")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+\": You can't combine multiple orderBy calls.\")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return u.validateArgCount(\"Query.ref\",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,i,r){u.validateArgCount(\"Query.on\",2,4,arguments.length),st(\"Query.on\",1,e,!1),u.validateCallback(\"Query.on\",2,n,!1);var o=t.getCancelAndContextArgs_(\"Query.on\",i,r);if(\"value\"===e)this.onValueEvent(n,o.cancel,o.context);else{var a={};a[e]=n,this.onChildEvent(a,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var i=new Qt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,i)},t.prototype.onChildEvent=function(t,e,n){var i=new Zt(t,e,n);this.repo.addEventCallbackForQuery(this,i)},t.prototype.off=function(t,e,n){u.validateArgCount(\"Query.off\",0,3,arguments.length),st(\"Query.off\",1,t,!0),u.validateCallback(\"Query.off\",2,e,!0),u.validateContextObject(\"Query.off\",3,n,!0);var i=null,r=null;if(\"value\"===t){var o=e||null;i=new Qt(o,null,n||null)}else t&&(e&&((r={})[t]=e),i=new Zt(r,null,n||null));this.repo.removeEventCallbackForQuery(this,i)},t.prototype.once=function(e,n,i,r){var o=this;u.validateArgCount(\"Query.once\",1,4,arguments.length),st(\"Query.once\",1,e,!1),u.validateCallback(\"Query.once\",2,n,!0);var a=t.getCancelAndContextArgs_(\"Query.once\",i,r),s=!0,h=new u.Deferred;h.promise.catch((function(){}));var l=function(t){s&&(s=!1,o.off(e,l),n&&n.bind(a.context)(t),h.resolve(t))};return this.on(e,l,(function(t){o.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),h.reject(t)})),h.promise},t.prototype.limitToFirst=function(e){if(u.validateArgCount(\"Query.limitToFirst\",1,1,arguments.length),\"number\"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error(\"Query.limitToFirst: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(u.validateArgCount(\"Query.limitToLast\",1,1,arguments.length),\"number\"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error(\"Query.limitToLast: First argument must be a positive integer.\");if(this.queryParams_.hasLimit())throw new Error(\"Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).\");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(u.validateArgCount(\"Query.orderByChild\",1,1,arguments.length),\"$key\"===e)throw new Error('Query.orderByChild: \"$key\" is invalid.  Use Query.orderByKey() instead.');if(\"$priority\"===e)throw new Error('Query.orderByChild: \"$priority\" is invalid.  Use Query.orderByPriority() instead.');if(\"$value\"===e)throw new Error('Query.orderByChild: \"$value\" is invalid.  Use Query.orderByValue() instead.');ht(\"Query.orderByChild\",1,e,!1),this.validateNoPreviousOrderByCall_(\"Query.orderByChild\");var n=new q(e);if(n.isEmpty())throw new Error(\"Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.\");var i=new Gt(n),r=this.queryParams_.orderBy(i);return t.validateQueryEndpoints_(r),new t(this.repo,this.path,r,!0)},t.prototype.orderByKey=function(){u.validateArgCount(\"Query.orderByKey\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByKey\");var e=this.queryParams_.orderBy(bt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){u.validateArgCount(\"Query.orderByPriority\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByPriority\");var e=this.queryParams_.orderBy(Rt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){u.validateArgCount(\"Query.orderByValue\",0,0,arguments.length),this.validateNoPreviousOrderByCall_(\"Query.orderByValue\");var e=this.queryParams_.orderBy(Ht);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),u.validateArgCount(\"Query.startAt\",0,2,arguments.length),it(\"Query.startAt\",1,e,this.path,!0),ut(\"Query.startAt\",2,n,!0);var i=this.queryParams_.startAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasStart())throw new Error(\"Query.startAt: Starting point was already set (by another call to startAt or equalTo).\");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),u.validateArgCount(\"Query.endAt\",0,2,arguments.length),it(\"Query.endAt\",1,e,this.path,!0),ut(\"Query.endAt\",2,n,!0);var i=this.queryParams_.endAt(e,n);if(t.validateLimit_(i),t.validateQueryEndpoints_(i),this.queryParams_.hasEnd())throw new Error(\"Query.endAt: Ending point was already set (by another call to endAt or equalTo).\");return new t(this.repo,this.path,i,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(u.validateArgCount(\"Query.equalTo\",1,2,arguments.length),it(\"Query.equalTo\",1,t,this.path,!1),ut(\"Query.equalTo\",2,e,!0),this.queryParams_.hasStart())throw new Error(\"Query.equalTo: Starting point was already set (by another call to startAt or equalTo).\");if(this.queryParams_.hasEnd())throw new Error(\"Query.equalTo: Ending point was already set (by another call to endAt or equalTo).\");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return u.validateArgCount(\"Query.toString\",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return u.validateArgCount(\"Query.toJSON\",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=D(t);return\"{}\"===e?\"default\":e},t.prototype.isEqual=function(e){if(u.validateArgCount(\"Query.isEqual\",1,1,arguments.length),!(e instanceof t)){var n=\"Query.isEqual failed: First argument must be an instance of firebase.database.Query.\";throw new Error(n)}var i=this.repo===e.repo,r=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return i&&r&&o},t.getCancelAndContextArgs_=function(t,e,n){var i={cancel:null,context:null};if(e&&n)i.cancel=e,u.validateCallback(t,3,i.cancel,!0),i.context=n,u.validateContextObject(t,4,i.context,!0);else if(e)if(\"object\"==typeof e&&null!==e)i.context=e;else{if(\"function\"!=typeof e)throw new Error(u.errorPrefix(t,3,!0)+\" must either be a cancel callback or a context object.\");i.cancel=e}return i},Object.defineProperty(t.prototype,\"ref\",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Jt=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),te=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ee=function(t,e,n){return t&&\"object\"==typeof t?(u.assert(\".sv\"in t,\"Unexpected leaf node or priority contents\"),\"string\"==typeof t[\".sv\"]?ne(t[\".sv\"],e,n):\"object\"==typeof t[\".sv\"]?ie(t[\".sv\"],e):void u.assert(!1,\"Unexpected server value: \"+JSON.stringify(t,null,2))):t},ne=function(t,e,n){switch(t){case\"timestamp\":return n.timestamp;default:u.assert(!1,\"Unexpected server value: \"+t)}},ie=function(t,e,n){t.hasOwnProperty(\"increment\")||u.assert(!1,\"Unexpected server value: \"+JSON.stringify(t,null,2));var i=t.increment;\"number\"!=typeof i&&u.assert(!1,\"Unexpected increment value: \"+i);var r=e.node();if(u.assert(null!=r,\"Expected ChildrenNode.EMPTY_NODE for nulls\"),!r.isLeafNode())return i;var o=r.getValue();return\"number\"!=typeof o?i:o+i},re=function(t,e,n,i){return ae(e,new te(n,t),i)},oe=function(t,e,n){return ae(t,new Jt(e),n)};function ae(t,e,n){var i,r=t.getPriority().val(),o=ee(r,e.getImmediateChild(\".priority\"),n);if(t.isLeafNode()){var a=t,s=ee(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new It(s,zt(o)):t}var u=t;return i=u,o!==u.getPriority().val()&&(i=i.updatePriority(new It(o))),u.forEachChild(Rt,(function(t,r){var o=ae(r,e.getImmediateChild(t),n);o!==r&&(i=i.updateImmediateChild(t,o))})),i}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var se,ue=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var i=e.getFront();this.children.has(i)||this.children.set(i,new t);var r=this.children.get(i);e=e.popFront(),r.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Rt,(function(t,e){n.remember(new q(t),e)})),this.forget(t)}if(this.children.size>0){var i=t.getFront();if(t=t.popFront(),this.children.has(i))this.children.get(i).forget(t)&&this.children.delete(i);return 0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,i){var r=new q(t.toString()+\"/\"+n);i.forEachTree(r,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */!function(t){t[t.OVERWRITE=0]=\"OVERWRITE\",t[t.MERGE=1]=\"MERGE\",t[t.ACK_USER_WRITE=2]=\"ACK_USER_WRITE\",t[t.LISTEN_COMPLETE=3]=\"LISTEN_COMPLETE\"}(se||(se={}));var he,le,ce=function(){function t(t,e,n,i){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=i,u.assert(!i||e,\"Tagged queries must be from server.\")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),pe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=se.ACK_USER_WRITE,this.source=ce.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return u.assert(this.affectedTree.children.isEmpty(),\"affectedTree should not have overlapping affected paths.\"),this;var n=this.affectedTree.subtree(new q(e));return new t(q.Empty,n,this.revert)}return u.assert(this.path.getFront()===e,\"operationForChild called for unrelated child.\"),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),fe=function(){function t(t,e){void 0===e&&(he||(he=new kt(N)),e=he),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return F(e,(function(t,e){n=n.set(new q(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:q.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=r?{path:new q(n).child(r.path),value:r.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),i=this.children.get(n);return null!==i?i.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var i=e.getFront(),r=(this.children.get(i)||t.Empty).set(e.popFront(),n),o=this.children.insert(i,r);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),i=this.children.get(n);if(i){var r=i.remove(e.popFront()),o=void 0;return o=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var i=e.getFront(),r=(this.children.get(i)||t.Empty).setTree(e.popFront(),n),o=void 0;return o=r.isEmpty()?this.children.remove(i):this.children.insert(i,r),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(q.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(i,r){n[i]=r.fold_(t.child(i),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,q.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var i=!!this.value&&n(e,this.value);if(i)return i;if(t.isEmpty())return null;var r=t.getFront(),o=this.children.get(r);return o?o.findOnPath_(t.popFront(),e.child(r),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,q.Empty,e)},t.prototype.foreachOnPath_=function(e,n,i){if(e.isEmpty())return this;this.value&&i(n,this.value);var r=e.getFront(),o=this.children.get(r);return o?o.foreachOnPath_(e.popFront(),n.child(r),i):t.Empty},t.prototype.foreach=function(t){this.foreach_(q.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,i){i.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),de=function(){function t(t,e){this.source=t,this.path=e,this.type=se.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,q.Empty):new t(this.source,this.path.popFront())},t}(),ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=se.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,q.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=se.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new q(e));return n.isEmpty()?null:n.value?new ve(this.source,q.Empty,n.value):new t(this.source,q.Empty,n)}return u.assert(this.path.getFront()===e,\"Can't get a merge for a child not on the path of the operation\"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return\"Operation(\"+this.path+\": \"+this.source.toString()+\" merge: \"+this.children.toString()+\")\"},t}(),ye=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),_e=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,i){return new t(new ye(e,n,i),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,i){return new t(this.eventCache_,new ye(e,n,i))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ye(Wt.EMPTY_NODE,!1,!1),new ye(Wt.EMPTY_NODE,!1,!1)),t}(),me=function(){function t(t,e,n,i,r){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=i,this.prevName=r}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,i){return new t(t.CHILD_CHANGED,n,e,i)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED=\"child_added\",t.CHILD_REMOVED=\"child_removed\",t.CHILD_CHANGED=\"child_changed\",t.CHILD_MOVED=\"child_moved\",t.VALUE=\"value\",t}(),be=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,i,r,o){u.assert(t.isIndexed(this.index_),\"A node must be indexed if only a child is updated\");var a=t.getImmediateChild(e);return a.getChild(i).equals(n.getChild(i))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(me.childRemovedChange(e,a)):u.assert(t.isLeafNode(),\"A child remove without an old child only makes sense on a leaf node\"):a.isEmpty()?o.trackChildChange(me.childAddedChange(e,n)):o.trackChildChange(me.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Rt,(function(t,i){e.hasChild(t)||n.trackChildChange(me.childRemovedChange(t,i))})),e.isLeafNode()||e.forEachChild(Rt,(function(e,i){if(t.hasChild(e)){var r=t.getImmediateChild(e);r.equals(i)||n.trackChildChange(me.childChangedChange(e,i,r))}else n.trackChildChange(me.childAddedChange(e,i))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Wt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),we=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;u.assert(e===me.CHILD_ADDED||e===me.CHILD_CHANGED||e===me.CHILD_REMOVED,\"Only child changes supported for tracking\"),u.assert(\".priority\"!==n,\"Only non-priority child changes can be tracked.\");var i=this.changeMap.get(n);if(i){var r=i.type;if(e===me.CHILD_ADDED&&r===me.CHILD_REMOVED)this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,i.snapshotNode));else if(e===me.CHILD_REMOVED&&r===me.CHILD_ADDED)this.changeMap.delete(n);else if(e===me.CHILD_REMOVED&&r===me.CHILD_CHANGED)this.changeMap.set(n,me.childRemovedChange(n,i.oldSnap));else if(e===me.CHILD_CHANGED&&r===me.CHILD_ADDED)this.changeMap.set(n,me.childAddedChange(n,t.snapshotNode));else{if(e!==me.CHILD_CHANGED||r!==me.CHILD_CHANGED)throw u.assertionError(\"Illegal combination of changes: \"+t+\" occurred after \"+i);this.changeMap.set(n,me.childChangedChange(n,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Ee=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ye(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),r=this.writes_.calcIndexedSlice(i,e,1,n,t);return 0===r.length?null:r[0]},t}(),Te=function(t,e){this.viewCache=t,this.changes=e},Se=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){u.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),\"Event snap not indexed\"),u.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),\"Server snap not indexed\")},t.prototype.applyOperation=function(e,n,i,r){var o,a,s=new we;if(n.type===se.OVERWRITE){var h=n;h.source.fromUser?o=this.applyUserOverwrite_(e,h.path,h.snap,i,r,s):(u.assert(h.source.fromServer,\"Unknown source.\"),a=h.source.tagged||e.getServerCache().isFiltered()&&!h.path.isEmpty(),o=this.applyServerOverwrite_(e,h.path,h.snap,i,r,a,s))}else if(n.type===se.MERGE){var l=n;l.source.fromUser?o=this.applyUserMerge_(e,l.path,l.children,i,r,s):(u.assert(l.source.fromServer,\"Unknown source.\"),a=l.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,l.path,l.children,i,r,a,s))}else if(n.type===se.ACK_USER_WRITE){var c=n;o=c.revert?this.revertUserWrite_(e,c.path,i,r,s):this.ackUserWrite_(e,c.path,c.affectedTree,i,r,s)}else{if(n.type!==se.LISTEN_COMPLETE)throw u.assertionError(\"Unknown operation type: \"+n.type);o=this.listenComplete_(e,n.path,i,s)}var p=s.getChanges();return t.maybeAddValueEvent_(e,o,p),new Te(o,p)},t.maybeAddValueEvent_=function(t,e,n){var i=e.getEventCache();if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||r&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&n.push(me.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,i,r){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,s=void 0;if(e.isEmpty())if(u.assert(t.getServerCache().isFullyInitialized(),\"If change path is empty, we must have complete server data\"),t.getServerCache().isFiltered()){var h=t.getCompleteServerSnap(),l=h instanceof Wt?h:Wt.EMPTY_NODE,c=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(t.getEventCache().getNode(),c,r)}else{var p=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),p,r)}else{var f=e.getFront();if(\".priority\"===f){u.assert(1===e.getLength(),\"Can't have a priority with additional path components\");var d=o.getNode();s=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,d,s);a=null!=v?this.filter_.updatePriority(d,v):o.getNode()}else{var g=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){s=t.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),s);y=null!=_?o.getNode().getImmediateChild(f).updateChild(g,_):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,g,i,r):o.getNode()}}return t.updateEventSnap(a,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,i,r,o,a){var s,u=t.getServerCache(),h=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())s=h.updateFullNode(u.getNode(),n,null);else if(h.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);s=h.updateFullNode(u.getNode(),l,null)}else{var c=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var p=e.popFront(),f=u.getNode().getImmediateChild(c).updateChild(p,n);s=\".priority\"===c?h.updatePriority(u.getNode(),f):h.updateChild(u.getNode(),c,f,p,Ee,null)}var d=t.updateServerSnap(s,u.isFullyInitialized()||e.isEmpty(),h.filtersNodes()),v=new Ce(i,d,r);return this.generateEventCacheAfterServerEvent_(d,e,i,v,a)},t.prototype.applyUserOverwrite_=function(t,e,n,i,r,o){var a,s,u=t.getEventCache(),h=new Ce(i,t,r);if(e.isEmpty())s=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),a=t.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=e.getFront();if(\".priority\"===l)s=this.filter_.updatePriority(t.getEventCache().getNode(),n),a=t.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var c=e.popFront(),p=u.getNode().getImmediateChild(l),f=void 0;if(c.isEmpty())f=n;else{var d=h.getCompleteChild(l);f=null!=d?\".priority\"===c.getBack()&&d.getChild(c.parent()).isEmpty()?d:d.updateChild(c,n):Wt.EMPTY_NODE}if(p.equals(f))a=t;else{var v=this.filter_.updateChild(u.getNode(),l,f,c,h,o);a=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,i,r,o,a){var s=this,u=e;return i.foreach((function(i,h){var l=n.child(i);t.cacheHasChild_(e,l.getFront())&&(u=s.applyUserOverwrite_(u,l,h,r,o,a))})),i.foreach((function(i,h){var l=n.child(i);t.cacheHasChild_(e,l.getFront())||(u=s.applyUserOverwrite_(u,l,h,r,o,a))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,i,r,o,a){var s=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,h=t;u=e.isEmpty()?n:fe.Empty.setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),c=s.applyMerge_(u,n);h=s.applyServerOverwrite_(h,new q(e),c,i,r,o,a)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var c=t.getServerCache().getNode().getImmediateChild(e),p=s.applyMerge_(c,n);h=s.applyServerOverwrite_(h,new q(e),p,i,r,o,a)}})),h},t.prototype.ackUserWrite_=function(t,e,n,i,r,o){if(null!=i.shadowingWrite(e))return t;var a=t.getServerCache().isFiltered(),s=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,s.getNode().getChild(e),i,r,a,o);if(e.isEmpty()){var u=fe.Empty;return s.getNode().forEachChild(bt,(function(t,e){u=u.set(new q(t),e)})),this.applyServerMerge_(t,e,u,i,r,a,o)}return t}var h=fe.Empty;return n.foreach((function(t,n){var i=e.child(t);s.isCompleteForPath(i)&&(h=h.set(t,s.getNode().getChild(i)))})),this.applyServerMerge_(t,e,h,i,r,a,o)},t.prototype.listenComplete_=function(t,e,n,i){var r=t.getServerCache(),o=t.updateServerSnap(r.getNode(),r.isFullyInitialized()||e.isEmpty(),r.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Ee,i)},t.prototype.revertUserWrite_=function(t,e,n,i,r){var o;if(null!=n.shadowingWrite(e))return t;var a=new Ce(n,t,i),s=t.getEventCache().getNode(),h=void 0;if(e.isEmpty()||\".priority\"===e.getFront()){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var c=t.getServerCache().getNode();u.assert(c instanceof Wt,\"serverChildren would be complete if leaf node\"),l=n.calcCompleteEventChildren(c)}l=l,h=this.filter_.updateFullNode(s,l,r)}else{var p=e.getFront(),f=n.calcCompleteChild(p,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(p)&&(f=s.getImmediateChild(p)),(h=null!=f?this.filter_.updateChild(s,p,f,e.popFront(),a,r):t.getEventCache().getNode().hasChild(p)?this.filter_.updateChild(s,p,Wt.EMPTY_NODE,e.popFront(),a,r):s).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(h=this.filter_.updateFullNode(h,o,r))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(q.Empty),t.updateEventSnap(h,o,this.filter_.filtersNodes())},t}(),Ie=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var i=this,r=[],o=[];return t.forEach((function(t){t.type===me.CHILD_CHANGED&&i.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(me.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(r,me.CHILD_REMOVED,t,n,e),this.generateEventsForType_(r,me.CHILD_ADDED,t,n,e),this.generateEventsForType_(r,me.CHILD_MOVED,o,n,e),this.generateEventsForType_(r,me.CHILD_CHANGED,t,n,e),this.generateEventsForType_(r,me.VALUE,t,n,e),r},t.prototype.generateEventsForType_=function(t,e,n,i,r){var o=this,a=n.filter((function(t){return t.type===e}));a.sort(this.compareChanges_.bind(this)),a.forEach((function(e){var n=o.materializeSingleChange_(e,r);i.forEach((function(i){i.respondsTo(e.type)&&t.push(i.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return\"value\"===t.type||\"child_removed\"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw u.assertionError(\"Should only compare child_ events.\");var n=new yt(t.childName,t.snapshotNode),i=new yt(e.childName,e.snapshotNode);return this.index_.compare(n,i)},t}(),xe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),i=new be(n.getIndex()),r=n.getNodeFilter();this.processor_=new Se(r);var o=e.getServerCache(),a=e.getEventCache(),s=i.updateFullNode(Wt.EMPTY_NODE,o.getNode(),null),u=r.updateFullNode(Wt.EMPTY_NODE,a.getNode(),null),h=new ye(s,o.isFullyInitialized(),i.filtersNodes()),l=new ye(u,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=new _e(l,h),this.eventGenerator_=new Ie(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){u.assert(null==t,\"A cancel should cancel all event registrations.\");var i=this.query_.path;this.eventRegistrations_.forEach((function(t){e=e;var r=t.createCancelEvent(e,i);r&&n.push(r)}))}if(t){for(var r=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(t)){if(t.hasAnyCallback()){r=r.concat(this.eventRegistrations_.slice(o+1));break}}else r.push(a)}this.eventRegistrations_=r}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===se.MERGE&&null!==t.source.queryId&&(u.assert(this.viewCache_.getCompleteServerSnap(),\"We should always have a full cache before handling merges\"),u.assert(this.viewCache_.getCompleteEventSnap(),\"Missing event cache, even though we have a server cache\"));var i=this.viewCache_,r=this.processor_.applyOperation(i,t,e,n);return this.processor_.assertIndexed(r.viewCache),u.assert(r.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),\"Once a server snap is complete, it should never go back\"),this.viewCache_=r.viewCache,this.generateEventsForChanges_(r.changes,r.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];e.getNode().isLeafNode()||e.getNode().forEachChild(Rt,(function(t,e){n.push(me.childAddedChange(t,e))}));return e.isFullyInitialized()&&n.push(me.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){var i=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,i)},t}(),Pe=function(){function t(){this.views=new Map}return Object.defineProperty(t,\"__referenceConstructor\",{get:function(){return u.assert(le,\"Reference.ts has not been loaded\"),le},set:function(t){u.assert(!le,\"__referenceConstructor has already been defined\"),le=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var i,r,o=t.source.queryId;if(null!==o){var a=this.views.get(o);return u.assert(null!=a,\"SyncTree gave us an op for an invalid query.\"),a.applyOperation(t,e,n)}var h=[];try{for(var l=s.__values(this.views.values()),c=l.next();!c.done;c=l.next()){a=c.value;h=h.concat(a.applyOperation(t,e,n))}}catch(t){i={error:t}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(i)throw i.error}}return h},t.prototype.addEventRegistration=function(t,e,n,i,r){var o=t.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(r?i:null),u=!1;s?u=!0:i instanceof Wt?(s=n.calcCompleteEventChildren(i),u=!1):(s=Wt.EMPTY_NODE,u=!1);var h=new _e(new ye(s,u,!1),new ye(i,r,!1));a=new xe(t,h),this.views.set(o,a)}return a.addEventRegistration(e),a.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,i){var r,o,a=e.queryIdentifier(),u=[],h=[],l=this.hasCompleteView();if(\"default\"===a)try{for(var c=s.__values(this.views.entries()),p=c.next();!p.done;p=c.next()){var f=s.__read(p.value,2),d=f[0],v=f[1];h=h.concat(v.removeEventRegistration(n,i)),v.isEmpty()&&(this.views.delete(d),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery()))}}catch(t){r={error:t}}finally{try{p&&!p.done&&(o=c.return)&&o.call(c)}finally{if(r)throw r.error}}else(v=this.views.get(a))&&(h=h.concat(v.removeEventRegistration(n,i)),v.isEmpty()&&(this.views.delete(a),v.getQuery().getQueryParams().loadsAllData()||u.push(v.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:h}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var i=s.__values(this.views.values()),r=i.next();!r.done;r=i.next()){var o=r.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,i=null;try{for(var r=s.__values(this.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;i=i||a.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return i},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=s.__values(this.views.values()),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.getQuery().getQueryParams().loadsAllData())return r}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Re=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new fe(n));var i=this.writeTree_.findRootMostValueAndPath(e);if(null!=i){var r=i.path,o=i.value,a=q.relativePath(r,e);return o=o.updateChild(a,n),new t(this.writeTree_.set(r,o))}var s=new fe(n);return new t(this.writeTree_.setTree(e,s))},t.prototype.addWrites=function(t,e){var n=this;return F(e,(function(e,i){n=n.addWrite(t.child(e),i)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,fe.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(q.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Rt,(function(e,n){t.push(new yt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new yt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new fe(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,i){if(null!=n.value)return i.updateChild(e,n.value);var r=null;return n.children.inorderTraversal((function(n,o){\".priority\"===n?(u.assert(null!==o.value,\"Priority writes must always be leaf nodes\"),r=o.value):i=t(e.child(n),o,i)})),i.getChild(e).isEmpty()||null===r||(i=i.updateChild(e.child(\".priority\"),r)),i}\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */(q.Empty,this.writeTree_,t)},t.Empty=new t(new fe(null)),t}();\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */var Oe=function(){function t(){this.visibleWrites_=Re.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ae(t,this)},t.prototype.addOverwrite=function(t,e,n,i){u.assert(n>this.lastWriteId_,\"Stacking an older write on top of newer ones\"),void 0===i&&(i=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:i}),i&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){u.assert(n>this.lastWriteId_,\"Stacking an older merge on top of newer ones\"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));u.assert(n>=0,\"removeWrite called with nonexistent writeId.\");var i=this.allWrites_[n];this.allWrites_.splice(n,1);for(var r=i.visible,o=!1,a=this.allWrites_.length-1;r&&a>=0;){var s=this.allWrites_[a];s.visible&&(a>=n&&this.recordContainsPath_(s,i.path)?r=!1:i.path.contains(s.path)&&(o=!0)),a--}if(r){if(o)return this.resetTree_(),!0;i.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(i.path):F(i.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(i.path.child(t))}));return!0}return!1},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,i,r){if(i||r){var o=this.visibleWrites_.childCompoundWrite(e);if(!r&&o.isEmpty())return n;if(r||null!=n||o.hasCompleteWrite(q.Empty)){var a=t.layerTree_(this.allWrites_,(function(t){return(t.visible||r)&&(!i||!~i.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e);h=n||Wt.EMPTY_NODE;return a.apply(h)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var u=this.visibleWrites_.childCompoundWrite(e);if(u.isEmpty())return n;if(null!=n||u.hasCompleteWrite(q.Empty)){var h=n||Wt.EMPTY_NODE;return u.apply(h)}return null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Wt.EMPTY_NODE,i=this.visibleWrites_.getCompleteNode(t);if(i)return i.isLeafNode()||i.forEachChild(Rt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var r=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Rt,(function(t,e){var i=r.childCompoundWrite(new q(t)).apply(e);n=n.updateImmediateChild(t,i)})),r.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,i){u.assert(n||i,\"Either existingEventSnap or existingServerSnap must exist\");var r=t.child(e);if(this.visibleWrites_.hasCompleteWrite(r))return null;var o=this.visibleWrites_.childCompoundWrite(r);return o.isEmpty()?i.getChild(e):o.apply(i.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var i=t.child(e),r=this.visibleWrites_.getCompleteNode(i);return null!=r?r:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(i).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,i,r,o){var a,s=this.visibleWrites_.childCompoundWrite(t),u=s.getCompleteNode(q.Empty);if(null!=u)a=u;else{if(null==e)return[];a=s.apply(e)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var h=[],l=o.getCompare(),c=r?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),p=c.getNext();p&&h.length<i;)0!==l(p,n)&&h.push(p),p=c.getNext();return h},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,q.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var i=Re.Empty,r=0;r<t.length;++r){var o=t[r];if(e(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=q.relativePath(n,a),i=i.addWrite(s,o.snap)):a.contains(n)&&(s=q.relativePath(a,n),i=i.addWrite(q.Empty,o.snap.getChild(s)));else{if(!o.children)throw u.assertionError(\"WriteRecord should have .snap or .children\");if(n.contains(a))s=q.relativePath(n,a),i=i.addWrites(s,o.children);else if(a.contains(n))if((s=q.relativePath(a,n)).isEmpty())i=i.addWrites(q.Empty,o.children);else{var h=u.safeGet(o.children,s.getFront());if(h){var l=h.getChild(s.popFront());i=i.addWrite(q.Empty,l)}}}}}return i},t}(),Ae=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,i,r){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,i,r)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Ne=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=fe.Empty,this.pendingWriteTree_=new Oe,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,i){return this.pendingWriteTree_.addOverwrite(t,e,n,i),i?this.applyOperationToSyncPoints_(new ve(ce.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var i=fe.fromObject(e);return this.applyOperationToSyncPoints_(new ge(ce.User,t,i))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var i=fe.Empty;return null!=n.snap?i=i.set(q.Empty,!0):F(n.children,(function(t,e){i=i.set(new q(t),e)})),this.applyOperationToSyncPoints_(new pe(n.path,i,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ve(ce.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=fe.fromObject(e);return this.applyOperationToSyncPoints_(new ge(ce.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new de(ce.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,i){var r=this.queryKeyForTag_(i);if(null!=r){var o=t.parseQueryKey_(r),a=o.path,s=o.queryId,u=q.relativePath(a,e),h=new ve(ce.forServerTaggedQuery(s),u,n);return this.applyTaggedOperation_(a,h)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,i){var r=this.queryKeyForTag_(i);if(r){var o=t.parseQueryKey_(r),a=o.path,s=o.queryId,u=q.relativePath(a,e),h=fe.fromObject(n),l=new ge(ce.forServerTaggedQuery(s),u,h);return this.applyTaggedOperation_(a,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var i=this.queryKeyForTag_(n);if(i){var r=t.parseQueryKey_(i),o=r.path,a=r.queryId,s=q.relativePath(o,e),u=new de(ce.forServerTaggedQuery(a),s);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var i=e.path,r=null,o=!1;this.syncPointTree_.foreachOnPath(i,(function(t,e){var n=q.relativePath(t,i);r=r||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var a,s=this.syncPointTree_.get(i);(s?(o=o||s.hasCompleteView(),r=r||s.getCompleteServerCache(q.Empty)):(s=new Pe,this.syncPointTree_=this.syncPointTree_.set(i,s)),null!=r)?a=!0:(a=!1,r=Wt.EMPTY_NODE,this.syncPointTree_.subtree(i).foreachChild((function(t,e){var n=e.getCompleteServerCache(q.Empty);n&&(r=r.updateImmediateChild(t,n))})));var h=s.viewExistsForQuery(e);if(!h&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);u.assert(!this.queryToTagMap.has(l),\"View does not exist, but we have a tag\");var c=t.getNextQueryTag_();this.queryToTagMap.set(l,c),this.tagToQueryMap.set(c,l)}var p=this.pendingWriteTree_.childWrites(i),f=s.addEventRegistration(e,n,p,r,a);if(!h&&!o){var d=s.viewForQuery(e);f=f.concat(this.setupListener_(e,d))}return f},t.prototype.removeEventRegistration=function(e,n,i){var r=this,o=e.path,a=this.syncPointTree_.get(o),s=[];if(a&&(\"default\"===e.queryIdentifier()||a.viewExistsForQuery(e))){var u=a.removeEventRegistration(e,n,i);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var h=u.removed;s=u.events;var l=-1!==h.findIndex((function(t){return t.getQueryParams().loadsAllData()})),c=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!c){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(p),d=0;d<f.length;++d){var v=f[d],g=v.getQuery(),y=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}if(!c&&h.length>0&&!i)if(l){this.listenProvider_.stopListening(t.queryForListening_(e),null)}else h.forEach((function(e){var n=r.queryToTagMap.get(t.makeQueryKey_(e));r.listenProvider_.stopListening(t.queryForListening_(e),n)}));this.removeTags_(h)}return s},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,i=this.syncPointTree_.findOnPath(t,(function(e,n){var i=q.relativePath(e,t),r=n.getCompleteServerCache(i);if(r)return r}));return n.calcCompleteEventCache(t,i,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var i=[];return e&&(i=e.getQueryViews()),F(n,(function(t,e){i=i.concat(e)})),i}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var i=e[n];if(!i.getQueryParams().loadsAllData()){var r=t.makeQueryKey_(i),o=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var i=e.path,r=this.tagForQuery_(e),o=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),r,o.hashFn,o.onComplete),s=this.syncPointTree_.subtree(i);if(r)u.assert(!s.value.hasCompleteView(),\"If we're adding a query, it shouldn't be shadowed\");else for(var h=s.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var i=[];return e&&(i=i.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),F(n,(function(t,e){i=i.concat(e)})),i})),l=0;l<h.length;++l){var c=h[l];this.listenProvider_.stopListening(t.queryForListening_(c),this.tagForQuery_(c))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),i=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Wt.EMPTY_NODE).hash()},onComplete:function(t){if(\"ok\"===t)return i?e.applyTaggedListenComplete(n.path,i):e.applyListenComplete(n.path);var r=function(t,e){var n=\"Unknown Error\";\"too_big\"===t?n=\"The data requested exceeds the maximum size that can be accessed with a single request.\":\"permission_denied\"===t?n=\"Client doesn't have permission to access the desired data.\":\"unavailable\"===t&&(n=\"The service is unavailable\");var i=new Error(t+\" at \"+e.path.toString()+\": \"+n);return i.code=t.toUpperCase(),i}(t,n);return e.removeEventRegistration(n,null,r)}}},t.makeQueryKey_=function(t){return t.path.toString()+\"$\"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf(\"$\");return u.assert(-1!==e&&e<t.length-1,\"Bad queryKey.\"),{queryId:t.substr(e+1),path:new q(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);u.assert(n,\"Missing sync point for query tag that we're tracking\");var i=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,i,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(q.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,i);var r=e.get(q.Empty);null==n&&null!=r&&(n=r.getCompleteServerCache(q.Empty));var o=[],a=t.path.getFront(),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var h=n?n.getImmediateChild(a):null,l=i.child(a);o=o.concat(this.applyOperationHelper_(s,u,h,l))}return r&&(o=o.concat(r.applyOperation(t,i,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,i){var r=this,o=e.get(q.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(q.Empty));var a=[];return e.children.inorderTraversal((function(e,o){var s=n?n.getImmediateChild(e):null,u=i.child(e),h=t.operationForChild(e);h&&(a=a.concat(r.applyOperationDescendantsHelper_(h,o,s,u)))})),o&&(a=a.concat(o.applyOperation(t,i,n))),a},t.nextQueryTag_=1,t}(),ke=function(){function t(){this.rootNode_=Wt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),De=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&\"auth/token-not-initialized\"===t.code?(C(\"Got auth/token-not-initialized error.  Treating as null token.\"),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named \"'+this.app_.name+'\" are invalid. This usually indicates your app was not initialized correctly. ';\"credential\"in this.app_.options?t+='Make sure the \"credential\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':\"serviceAccount\"in this.app_.options?t+='Make sure the \"serviceAccount\" property provided to initializeApp() is authorized to access the specified \"databaseURL\" and is from the correct project.':t+='Make sure the \"apiKey\" and \"databaseURL\" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',x(t)},t}(),Le=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),u.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return u.deepCopy(this.counters_)},t}(),Fe=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Le),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Me=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s.__assign({},t);return this.last_&&F(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Me(t);var n=1e4+2e4*Math.random();W(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},i=!1;F(e,(function(e,r){r>0&&u.contains(t.statsToReport_,e)&&(n[e]=r,i=!0)})),i&&this.server_.reportStats(n),W(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ue=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var i=t[n],r=i.getPath();null===e||r.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ve(r)),e.add(i)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var i=this.eventLists_[n];if(i)t(i.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Ve=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();b&&C(\"event: \"+e.toString()),V(n)}}},t.prototype.getPath=function(){return this.path_},t}(),We=function(){function t(t){this.allowedEvents_=t,this.listeners_={},u.assert(Array.isArray(t)&&t.length>0,\"Requires a non-empty array\")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var i=s.__spread(this.listeners_[t]),r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var i=this.getInitialEvent(t);i&&e.apply(n,i)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var i=this.listeners_[t]||[],r=0;r<i.length;r++)if(i[r].callback===e&&(!n||n===i[r].context))return void i.splice(r,1)},t.prototype.validateEventType_=function(t){u.assert(this.allowedEvents_.find((function(e){return e===t})),\"Unknown event: \"+t)},t}(),qe=function(t){function e(){var e,n,i=t.call(this,[\"visible\"])||this;return\"undefined\"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n=\"visibilitychange\",e=\"hidden\"):void 0!==document.mozHidden?(n=\"mozvisibilitychange\",e=\"mozHidden\"):void 0!==document.msHidden?(n=\"msvisibilitychange\",e=\"msHidden\"):void 0!==document.webkitHidden&&(n=\"webkitvisibilitychange\",e=\"webkitHidden\")),i.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==i.visible_&&(i.visible_=t,i.trigger(\"visible\",t))}),!1),i}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return u.assert(\"visible\"===t,\"Unknown event type: \"+t),[this.visible_]},e}(We),ze=function(t){function e(){var e=t.call(this,[\"online\"])||this;return e.online_=!0,\"undefined\"==typeof window||void 0===window.addEventListener||u.isMobileCordova()||(window.addEventListener(\"online\",(function(){e.online_||(e.online_=!0,e.trigger(\"online\",!0))}),!1),window.addEventListener(\"offline\",(function(){e.online_&&(e.online_=!1,e.trigger(\"online\",!1))}),!1)),e}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return u.assert(\"online\"===t,\"Unknown event type: \"+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(We),Ke=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var i=function(){var t=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var e=function(e){t[e]&&V((function(){n.onMessage_(t[e])}))},i=0;i<t.length;++i)e(i);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),\"break\";r.currentResponseNum++},r=this;this.pendingResponses[this.currentResponseNum];){if(\"break\"===i())break}},t}(),He=function(){function t(t,e,n,i){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=Fe.getCollection(e),this.urlFn=function(t){return e.connectionURL(\"long_polling\",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ke(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_(\"Timed out trying to connect.\"),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(u.isNodeSdk()||\"complete\"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener(\"DOMContentLoaded\",n,!1),window.addEventListener(\"load\",n,!1)):document.attachEvent&&(document.attachEvent(\"onreadystatechange\",(function(){\"complete\"===document.readyState&&n()})),window.attachEvent(\"onload\",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Ge((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.__read(t,5),r=i[0],o=i[1],a=i[2];i[3],i[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,\"start\"===r)n.id=o,n.password=a;else{if(\"close\"!==r)throw new Error(\"Unrecognized command received: \"+r);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=s.__read(t,2),r=i[0],o=i[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:\"t\"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v=\"5\",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(t.r=\"f\");var e=n.urlFn(t);n.log_(\"Connecting via long-poll to \"+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!u.isNodeSdk()&&(!!t.forceAllow_||!(t.forceDisallow_||\"undefined\"==typeof document||null==document.createElement||\"object\"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||\"object\"==typeof Windows&&\"object\"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"Longpoll is closing itself\"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_(\"Longpoll is being closed.\"),this.shutdown_())},t.prototype.send=function(t){var e=u.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter(\"bytes_sent\",e.length);for(var n=u.base64Encode(e),i=L(n,1840),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!u.isNodeSdk()){this.myDisconnFrame=document.createElement(\"iframe\");var n={dframe:\"t\"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display=\"none\",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=u.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter(\"bytes_received\",e)},t}(),Ge=function(){function t(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,u.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window[\"pLPCommand\"+this.uniqueCallbackIdentifier]=e,window[\"pRTLPCB\"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o=\"\";if(this.myIFrame.src&&\"javascript:\"===this.myIFrame.src.substr(0,\"javascript:\".length))o='<script>document.domain=\"'+document.domain+'\";<\\/script>';var a=\"<html><body>\"+o+\"</body></html>\";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){C(\"frame writing exception\"),t.stack&&C(t.stack),C(t)}}}return t.createIFrame_=function(){var t=document.createElement(\"iframe\");if(t.style.display=\"none\",!document.body)throw\"Document body has not initialized. Wait to initialize Firebase until after the document is ready.\";document.body.appendChild(t);try{t.contentWindow.document||C(\"No IE domain setting required\")}catch(n){var e=document.domain;t.src=\"javascript:void((function(){document.open();document.domain='\"+e+\"';document.close();})())\"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML=\"\",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n=\"\",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var r=this.pendingSegs.shift();n=n+\"&seg\"+i+\"=\"+r.seg+\"&ts\"+i+\"=\"+r.ts+\"&d\"+i+\"=\"+r.d,i++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var i=function(){n.outstandingRequests.delete(e),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(r),i()}))},t.prototype.addTag=function(t,e){var n=this;u.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement(\"script\");i.type=\"text/javascript\",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var t=i.readyState;t&&\"loaded\"!==t&&\"complete\"!==t||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=function(){C(\"Long-poll script failed to load: \"+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(t){}}),Math.floor(1))},t}(),Be=\"\";\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar Xe=null;\"undefined\"!=typeof MozWebSocket?Xe=MozWebSocket:\"undefined\"!=typeof WebSocket&&(Xe=WebSocket);var Ye=function(){function t(e,n,i,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=Fe.getCollection(n),this.connURL=t.connectionURL_(n,i,r)}return t.connectionURL_=function(t,e,n){var i={v:\"5\"};return!u.isNodeSdk()&&\"undefined\"!=typeof location&&location.href&&-1!==location.href.indexOf(\"firebaseio.com\")&&(i.r=\"f\"),e&&(i.s=e),n&&(i.ls=n),t.connectionURL(\"websocket\",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_(\"Websocket connecting to \"+this.connURL),this.everConnected_=!1,d.set(\"previous_websocket_failure\",!0);try{if(u.isNodeSdk()){var r=u.CONSTANTS.NODE_ADMIN?\"AdminNode\":\"Node\",o={headers:{\"User-Agent\":\"Firebase/5/\"+Be+\"/\"+i.platform+\"/\"+r}},a=i.env,s=0===this.connURL.indexOf(\"wss://\")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;s&&(o.proxy={origin:s}),this.mySock=new Xe(this.connURL,[],o)}else this.mySock=new Xe(this.connURL)}catch(t){this.log_(\"Error instantiating WebSocket.\");var h=t.message||t.data;return h&&this.log_(h),void this.onClosed_()}this.mySock.onopen=function(){n.log_(\"Websocket connected.\"),n.everConnected_=!0},this.mySock.onclose=function(){n.log_(\"Websocket connection was disconnected.\"),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_(\"WebSocket error.  Closing connection.\");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if(\"undefined\"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Xe&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get(\"previous_websocket_failure\")},t.prototype.markConnectionHealthy=function(){d.remove(\"previous_websocket_failure\")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join(\"\");this.frames=null;var n=u.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(u.assert(null===this.frames,\"We already have a frame buffer\"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter(\"bytes_received\",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=u.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter(\"bytes_sent\",e.length);var n=L(e,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_(\"WebSocket is closing itself\"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_(\"WebSocket is being closed\"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_(\"0\"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_(\"Exception thrown from WebSocket.send():\",t.message||t.data,\"Closing connection.\"),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Qe=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,\"ALL_TRANSPORTS\",{get:function(){return[He,Ye]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,i,r=Ye&&Ye.isAvailable(),o=r&&!Ye.previouslyFailed();if(e.webSocketOnly&&(r||x(\"wss:// URL used, but browser isn't known to support websockets.  Trying anyway.\"),o=!0),o)this.transports_=[Ye];else{var a=this.transports_=[];try{for(var u=s.__values(t.ALL_TRANSPORTS),h=u.next();!h.done;h=u.next()){var l=h.value;l&&l.isAvailable()&&a.push(l)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error(\"No transports available\")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Ze=function(){function t(t,e,n,i,r,o,a){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=i,this.onDisconnect_=r,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T(\"c:\"+this.id+\":\"),this.transportManager_=new Qe(e),this.log_(\"Connection created\"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,i)}),Math.floor(0));var r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=W((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_(\"Connection exceeded healthy timeout but has received \"+t.conn_.bytesReceived+\" bytes.  Marking connection healthy.\"),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_(\"Connection exceeded healthy timeout but has sent \"+t.conn_.bytesSent+\" bytes.  Leaving connection alive.\"):(t.log_(\"Closing unhealthy connection after timeout.\"),t.close()))}),Math.floor(r)))},t.prototype.nextTransportId_=function(){return\"c:\"+this.id+\":\"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_(\"Secondary connection lost.\"),e.onSecondaryConnectionLost_()):e.log_(\"closing an old connection\")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_(\"message on old connection\"))}},t.prototype.sendRequest=function(t){var e={t:\"d\",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_(\"cleaning up and promoting a connection: \"+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if(\"t\"in t){var e=t.t;\"a\"===e?this.upgradeIfSecondaryHealthy_():\"r\"===e?(this.log_(\"Got a reset on secondary, closing it\"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):\"o\"===e&&(this.log_(\"got pong on secondary.\"),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=k(\"t\",t),n=k(\"d\",t);if(\"c\"===e)this.onSecondaryControl_(n);else{if(\"d\"!==e)throw new Error(\"Unknown protocol layer: \"+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_(\"Secondary connection is healthy.\"),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_(\"sending ping on secondary.\"),this.secondaryConn_.send({t:\"c\",d:{t:\"p\",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_(\"sending client ack on secondary\"),this.secondaryConn_.send({t:\"c\",d:{t:\"a\",d:{}}}),this.log_(\"Ending transmission on primary\"),this.conn_.send({t:\"c\",d:{t:\"n\",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=k(\"t\",t),n=k(\"d\",t);\"c\"===e?this.onControl_(n):\"d\"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=k(\"t\",t);if(\"d\"in t){var n=t.d;if(\"h\"===e)this.onHandshake_(n);else if(\"n\"===e){this.log_(\"recvd end transmission on primary\"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else\"s\"===e?this.onConnectionShutdown_(n):\"r\"===e?this.onReset_(n):\"e\"===e?S(\"Server Error: \"+n):\"o\"===e?(this.log_(\"got pong on primary.\"),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S(\"Unknown control packet command: \"+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),\"5\"!==n&&x(\"Protocol version mismatch detected\"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),W((function(){e.secondaryConn_&&(e.log_(\"Timed out trying to upgrade.\"),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_(\"Reset packet received.  New host: \"+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_(\"Realtime connection established.\"),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_(\"Primary connection is healthy.\"),this.isHealthy_=!0):W((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_(\"sending ping on primary.\"),this.sendData_({t:\"c\",d:{t:\"p\",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_(\"Realtime connection lost.\"):(this.log_(\"Realtime connection failed.\"),this.repoInfo_.isCacheableHost()&&(d.remove(\"host:\"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_(\"Connection shutdown command received. Shutting down...\"),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw\"Connection is not connected\";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_(\"Closing realtime connection.\"),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_(\"Shutting down all connections\"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),$e=function(){function t(){}return t.prototype.put=function(t,e,n,i){},t.prototype.merge=function(t,e,n,i){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Je=function(t){function e(n,i,r,o,a,s){var h=t.call(this)||this;if(h.repoInfo_=n,h.onDataUpdate_=i,h.onConnectStatus_=r,h.onServerInfoUpdate_=o,h.authTokenProvider_=a,h.authOverride_=s,h.id=e.nextPersistentConnectionId_++,h.log_=T(\"p:\"+h.id+\":\"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingPutCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,s&&!u.isNodeSdk())throw new Error(\"Auth override specified in options, but not supported on non Node.js platforms\");return h.scheduleConnect_(0),qe.getInstance().on(\"visible\",h.onVisible_,h),-1===n.host.indexOf(\"fblocal\")&&ze.getInstance().on(\"online\",h.onOnline_,h),h}return s.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var i=++this.requestNumber_,r={r:i,a:t,b:e};this.log_(u.stringify(r)),u.assert(this.connected_,\"sendRequest call when we're not connected not allowed.\"),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)},e.prototype.listen=function(t,e,n,i){var r=t.queryIdentifier(),o=t.path.toString();this.log_(\"Listen called for \"+o+\" \"+r),this.listens.has(o)||this.listens.set(o,new Map),u.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),\"listen() called for non-default but complete query\"),u.assert(!this.listens.get(o).has(r),\"listen() called twice for same path/queryId.\");var a={onComplete:i,hashFn:e,query:t,tag:n};this.listens.get(o).set(r,a),this.connected_&&this.sendListen_(a)},e.prototype.sendListen_=function(t){var n=this,i=t.query,r=i.path.toString(),o=i.queryIdentifier();this.log_(\"Listen on \"+r+\" for \"+o);var a={p:r};t.tag&&(a.q=i.queryObject(),a.t=t.tag),a.h=t.hashFn(),this.sendRequest(\"q\",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,i),(n.listens.get(r)&&n.listens.get(r).get(o))===t&&(n.log_(\"listen response\",a),\"ok\"!==u&&n.removeListen_(r,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&\"object\"==typeof t&&u.contains(t,\"w\")){var n=u.safeGet(t,\"w\");if(Array.isArray(n)&&~n.indexOf(\"no_index\")){var i='\".indexOn\": \"'+e.getQueryParams().getIndex().toString()+'\"',r=e.path.toString();x(\"Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding \"+i+\" at \"+r+\" to your security rules for better performance.\")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_(\"Auth token refreshed\"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest(\"unauth\",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||u.isAdmin(t))&&(this.log_(\"Admin auth credential detected.  Reducing max reconnect time.\"),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=u.isValidFormat(e)?\"auth\":\"gauth\",i={cred:e};null===this.authOverride_?i.noauth=!0:\"object\"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,(function(n){var i=n.s,r=n.d||\"error\";t.authToken_===e&&(\"ok\"===i?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(i,r))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),i=t.queryIdentifier();this.log_(\"Unlisten called for \"+n+\" \"+i),u.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),\"unlisten() called for non-default but complete query\"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,i){this.log_(\"Unlisten on \"+t+\" for \"+e);var r={p:t};i&&(r.q=n,r.t=i),this.sendRequest(\"n\",r)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_(\"o\",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:\"o\",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_(\"om\",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:\"om\",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_(\"oc\",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:\"oc\",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,i){var r={p:e,d:n};this.log_(\"onDisconnect \"+t,r),this.sendRequest(t,r,(function(t){i&&setTimeout((function(){i(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,i){this.putInternal(\"p\",t,e,n,i)},e.prototype.merge=function(t,e,n,i){this.putInternal(\"m\",t,e,n,i)},e.prototype.putInternal=function(t,e,n,i,r){var o={p:e,d:n};void 0!==r&&(o.h=r),this.outstandingPuts_.push({action:t,request:o,onComplete:i}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_(\"Buffering put: \"+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,r=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,i,(function(i){e.log_(n+\" response\",i),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),r&&r(i.s,i.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_(\"reportStats\",n),this.sendRequest(\"s\",n,(function(t){if(\"ok\"!==t.s){var n=t.d;e.log_(\"reportStats\",\"Error sending stats: \"+n)}}))}},e.prototype.onDataMessage_=function(t){if(\"r\"in t){this.log_(\"from server: \"+u.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if(\"error\"in t)throw\"A server-side error has occurred: \"+t.error;\"a\"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_(\"handleServerMessage\",t,e),\"d\"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):\"m\"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):\"c\"===t?this.onListenRevoked_(e.p,e.q):\"ac\"===t?this.onAuthRevoked_(e.s,e.d):\"sd\"===t?this.onSecurityDebugPacket_(e):S(\"Unrecognized action received from server: \"+u.stringify(t)+\"\\nAre you using the latest client?\")},e.prototype.onReady_=function(t,e){this.log_(\"connection ready\"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;u.assert(!this.realtime_,\"Scheduling a connect when we're already connected/ing?\"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_(\"Window became visible.  Reducing delay.\"),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_(\"Browser went online.\"),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_(\"Browser went offline.  Killing connection.\"),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_(\"data client disconnected\"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_(\"Window isn't visible.  Delaying reconnect.\"),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_(\"Trying to reconnect in \"+e+\"ms\"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_(\"Making a connection attempt\"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+\":\"+e.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,h=null,l=function(){h?h.close():(s=!0,i())};this.realtime_={close:l,sendRequest:function(t){u.assert(h,\"sendRequest call when we're not connected not allowed.\"),h.sendRequest(t)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then((function(e){s?C(\"getToken() completed but was canceled\"):(C(\"getToken() completed. Creating connection.\"),o.authToken_=e&&e.accessToken,h=new Ze(r,o.repoInfo_,t,n,i,(function(t){x(t+\" (\"+o.repoInfo_.toString()+\")\"),o.interrupt(\"server_kill\")}),a))})).then(null,(function(t){o.log_(\"Failed to get token: \"+t),s||(u.CONSTANTS.NODE_ADMIN&&x(t),l())}))}},e.prototype.interrupt=function(t){C(\"Interrupting connection for reason: \"+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C(\"Resuming connection for reason: \"+t),delete this.interruptReasons_[t],u.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&\"h\"in e.request&&e.queued&&(e.onComplete&&e.onComplete(\"disconnect\"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return D(t)})).join(\"$\"):\"default\";var i=this.removeListen_(t,n);i&&i.onComplete&&i.onComplete(\"permission_denied\")},e.prototype.removeListen_=function(t,e){var n,i=new q(t).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(e),r.delete(e),0===r.size&&this.listens.delete(i)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C(\"Auth token revoked: \"+t+\"/\"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),\"invalid_token\"!==t&&\"permission_denied\"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):\"msg\"in t&&console.log(\"FIREBASE: \"+t.msg.replace(\"\\n\",\"\\nFIREBASE: \"))},e.prototype.restoreState_=function(){var t,e,n,i;this.tryAuth();try{for(var r=s.__values(this.listens.values()),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(a.values())),h=u.next();!h.done;h=u.next()){var l=h.value;this.sendListen_(l)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var p=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(p.action,p.pathString,p.data,p.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e=\"js\";u.CONSTANTS.NODE_ADMIN?e=\"admin_node\":u.CONSTANTS.NODE_CLIENT&&(e=\"node\"),t[\"sdk.\"+e+\".\"+Be.replace(/\\./g,\"-\")]=1,u.isMobileCordova()?t[\"framework.cordova\"]=1:u.isReactNative()&&(t[\"framework.reactnative\"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=ze.getInstance().currentlyOnline();return u.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}($e),tn=function(t){function e(e,n,i){var r=t.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=n,r.authTokenProvider_=i,r.log_=T(\"p:rest:\"),r.listens_={},r}return s.__extends(e,t),e.prototype.reportStats=function(t){throw new Error(\"Method not implemented.\")},e.getListenId_=function(t,e){return void 0!==e?\"tag$\"+e:(u.assert(t.getQueryParams().isDefault(),\"should have a tag if it's not a default query.\"),t.path.toString())},e.prototype.listen=function(t,n,i,r){var o=this,a=t.path.toString();this.log_(\"Listen called for \"+a+\" \"+t.queryIdentifier());var s=e.getListenId_(t,i),h={};this.listens_[s]=h;var l=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+\".json\",l,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,i),u.safeGet(o.listens_,s)===h)&&r(t?401===t?\"permission_denied\":\"rest_error:\"+t:\"ok\",null)}))},e.prototype.unlisten=function(t,n){var i=e.getListenId_(t,n);delete this.listens_[i]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var i=this;void 0===e&&(e={}),e.format=\"export\",this.authTokenProvider_.getToken(!1).then((function(r){var o=r&&r.accessToken;o&&(e.auth=o);var a=(i.repoInfo_.secure?\"https://\":\"http://\")+i.repoInfo_.host+t+\"?ns=\"+i.repoInfo_.namespace+u.querystring(e);i.log_(\"Sending REST request for \"+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){i.log_(\"REST Response for \"+a+\" received. status:\",s.status,\"response:\",s.responseText);var t=null;if(s.status>=200&&s.status<300){try{t=u.jsonEval(s.responseText)}catch(t){x(\"Failed to parse JSON response for \"+a+\": \"+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&x(\"Got unsuccessful REST response for \"+a+\" Status: \"+s.status),n(s.status);n=null}},s.open(\"GET\",a,!0),s.send()}))},e}($e),en=function(){function t(t,e,n,i){var r=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ue,this.persistentConnection_=null;var o=new De(n,i);if(this.stats_=Fe.getCollection(t),e||(\"object\"==typeof window&&window.navigator&&window.navigator.userAgent||\"\").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new tn(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if(\"object\"!=typeof a)throw new Error(\"Only objects are supported for option databaseAuthVariableOverride\");try{u.stringify(a)}catch(t){throw new Error(\"Invalid authOverride provided: \"+t)}}this.persistentConnection_=new Je(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,a),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){r.server_.refreshAuthToken(t)})),this.statsReporter_=Fe.getOrCreateReporter(t,(function(){return new je(r.stats_,r.server_)})),this.transactionsInit_(),this.infoData_=new ke,this.infoSyncTree_=new Ne({startListening:function(t,e,n,i){var o=[],a=r.infoData_.getNode(t.path);return a.isEmpty()||(o=r.infoSyncTree_.applyServerOverwrite(t.path,a),setTimeout((function(){i(\"ok\")}),0)),o},stopListening:function(){}}),this.updateInfo_(\"connected\",!1),this.serverSyncTree_=new Ne({startListening:function(t,e,n,i){return r.server_.listen(t,n,e,(function(e,n){var o=i(e,n);r.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){r.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?\"https://\":\"http://\")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new q(\".info/serverTimeOffset\")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,i){this.dataUpdateCount++;var r=new q(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(i)if(n){var a=u.map(e,(function(t){return zt(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(r,a,i)}else{var s=zt(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(r,s,i)}else if(n){var h=u.map(e,(function(t){return zt(t)}));o=this.serverSyncTree_.applyServerMerge(r,h)}else{var l=zt(e);o=this.serverSyncTree_.applyServerOverwrite(r,l)}var c=r;o.length>0&&(c=this.rerunTransactions_(r)),this.eventQueue_.raiseEventsForChangedPath(c,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_(\"connected\",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;F(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new q(\"/.info/\"+t),i=zt(e);this.infoData_.updateSnapshot(n,i);var r=this.infoSyncTree_.applyServerOverwrite(n,i);this.eventQueue_.raiseEventsForChangedPath(n,r)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,i){var r=this;this.log_(\"set\",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),a=zt(e,n),s=this.serverSyncTree_.calcCompleteEventCache(t),u=oe(a,s,o),h=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,h,!0);this.eventQueue_.queueEvents(l),this.server_.put(t.toString(),a.val(!0),(function(e,n){var o=\"ok\"===e;o||x(\"set at \"+t+\" failed: \"+e);var a=r.serverSyncTree_.ackUserWrite(h,!o);r.eventQueue_.raiseEventsForChangedPath(t,a),r.callOnCompleteCallback(i,e,n)}));var c=this.abortTransactions_(t);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},t.prototype.update=function(t,e,n){var i=this;this.log_(\"update\",{path:t.toString(),value:e});var r=!0,o=this.generateServerValues(),a={};if(F(e,(function(e,n){r=!1,a[e]=re(t.child(e),zt(n),i.serverSyncTree_,o)})),r)C(\"update() called with empty data.  Don't do anything.\"),this.callOnCompleteCallback(n,\"ok\");else{var s=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,a,s);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,r){var o=\"ok\"===e;o||x(\"update at \"+t+\" failed: \"+e);var a=i.serverSyncTree_.ackUserWrite(s,!o),u=a.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(u,a),i.callOnCompleteCallback(n,e,r)})),F(e,(function(e){var n=i.abortTransactions_(t.child(e));i.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_(\"onDisconnectEvents\");var e=this.generateServerValues(),n=new ue;this.onDisconnect_.forEachTree(q.Empty,(function(i,r){var o=re(i,r,t.serverSyncTree_,e);n.remember(i,o)}));var i=[];n.forEachTree(q.Empty,(function(e,n){i=i.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var r=t.abortTransactions_(e);t.rerunTransactions_(r)})),this.onDisconnect_=new ue,this.eventQueue_.raiseEventsForChangedPath(q.Empty,i)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(i,r){\"ok\"===i&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,i,r)}))},t.prototype.onDisconnectSet=function(t,e,n){var i=this,r=zt(e);this.server_.onDisconnectPut(t.toString(),r.val(!0),(function(e,o){\"ok\"===e&&i.onDisconnect_.remember(t,r),i.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,i){var r=this,o=zt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){\"ok\"===e&&r.onDisconnect_.remember(t,o),r.callOnCompleteCallback(i,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var i=this;if(u.isEmpty(e))return C(\"onDisconnect().update() called with empty data.  Don't do anything.\"),void this.callOnCompleteCallback(n,\"ok\");this.server_.onDisconnectMerge(t.toString(),e,(function(r,o){\"ok\"===r&&F(e,(function(e,n){var r=zt(n);i.onDisconnect_.remember(t.child(e),r)})),i.callOnCompleteCallback(n,r,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=\".info\"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=\".info\"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(\"repo_interrupt\")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(\"repo_interrupt\")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),\"undefined\"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Me(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);F(e,(function(t,e){for(var i=t,r=t.length;r<n+2;r++)i+=\" \";console.log(i+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=\"\";this.persistentConnection_&&(n=this.persistentConnection_.id+\":\"),C.apply(void 0,s.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&V((function(){if(\"ok\"===e)t(null);else{var i=(e||\"error\").toUpperCase(),r=i;n&&(r+=\": \"+n);var o=new Error(r);o.code=i,t(o)}}))},Object.defineProperty(t.prototype,\"database\",{get:function(){return this.__database||(this.__database=new pn(this))},enumerable:!0,configurable:!0}),t}(),nn=function(){function t(e){this.indexedFilter_=new be(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,i,r,o){return this.matches(new yt(e,n))||(n=Wt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,i,r,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Wt.EMPTY_NODE);var i=e.withIndex(this.index_);i=i.updatePriority(Wt.EMPTY_NODE);var r=this;return e.forEachChild(Rt,(function(t,e){r.matches(new yt(t,e))||(i=i.updateImmediateChild(t,Wt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),rn=function(){function t(t){this.rangedFilter_=new nn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,i,r,o){return this.rangedFilter_.matches(new yt(e,n))||(n=Wt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,i,r,o):this.fullLimitUpdateChild_(t,e,n,r,o)},t.prototype.updateFullNode=function(t,e,n){var i;if(e.isLeafNode()||e.isEmpty())i=Wt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){i=Wt.EMPTY_NODE.withIndex(this.index_);var r=void 0;r=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;r.hasNext()&&o<this.limit_;){var a=r.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;i=i.updateImmediateChild(a.name,a.node),o++}}else{i=(i=e.withIndex(this.index_)).updatePriority(Wt.EMPTY_NODE);var s=void 0,u=void 0,h=void 0;r=void 0;if(this.reverse_){r=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();h=function(t,e){return l(e,t)}}else r=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();o=0;for(var c=!1;r.hasNext();){a=r.getNext();!c&&h(s,a)<=0&&(c=!0),c&&o<this.limit_&&h(a,u)<=0?o++:i=i.updateImmediateChild(a.name,Wt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,i,r){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;u.assert(s.numChildren()===this.limit_,\"\");var h=new yt(e,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(h);if(s.hasChild(e)){for(var p=s.getImmediateChild(e),f=i.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:o(f,h);if(c&&!n.isEmpty()&&d>=0)return null!=r&&r.trackChildChange(me.childChangedChange(e,n,p)),s.updateImmediateChild(e,n);null!=r&&r.trackChildChange(me.childRemovedChange(e,p));var v=s.updateImmediateChild(e,Wt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=r&&r.trackChildChange(me.childAddedChange(f.name,f.node)),v.updateImmediateChild(f.name,f.node)):v}return n.isEmpty()?t:c&&o(l,h)>=0?(null!=r&&(r.trackChildChange(me.childRemovedChange(l.name,l.node)),r.trackChildChange(me.childAddedChange(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(l.name,Wt.EMPTY_NODE)):t},t}(),on=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_=\"\",this.indexStartValue_=null,this.indexStartName_=\"\",this.indexEndValue_=null,this.indexEndName_=\"\",this.index_=Rt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return\"\"===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return u.assert(this.startSet_,\"Only valid if start has been set\"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return u.assert(this.startSet_,\"Only valid if start has been set\"),this.startNameSet_?this.indexStartName_:R},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return u.assert(this.endSet_,\"Only valid if end has been set\"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return u.assert(this.endSet_,\"Only valid if end has been set\"),this.endNameSet_?this.indexEndName_:O},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&\"\"!==this.viewFrom_},t.prototype.getLimit=function(){return u.assert(this.limitSet_,\"Only valid if limit has been set\"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=\"\",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=\"\"),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=\"\"),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var i=this.viewFrom_;\"\"===i&&(i=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=i}return this.index_!==Rt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Rt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new be(this.getIndex()):this.hasLimit()?new rn(this):new nn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,i={};return this.isDefault()||(this.index_===Rt?e=n.PRIORITY_INDEX:this.index_===Ht?e=n.VALUE_INDEX:this.index_===bt?e=n.KEY_INDEX:(u.assert(this.index_ instanceof Gt,\"Unrecognized index type!\"),e=this.index_.toString()),i[n.ORDER_BY]=u.stringify(e),this.startSet_&&(i[n.START_AT]=u.stringify(this.indexStartValue_),this.startNameSet_&&(i[n.START_AT]+=\",\"+u.stringify(this.indexStartName_))),this.endSet_&&(i[n.END_AT]=u.stringify(this.indexEndValue_),this.endNameSet_&&(i[n.END_AT]+=\",\"+u.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?i[n.LIMIT_TO_FIRST]=this.limit_:i[n.LIMIT_TO_LAST]=this.limit_)),i},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:\"sp\",INDEX_START_NAME:\"sn\",INDEX_END_VALUE:\"ep\",INDEX_END_NAME:\"en\",LIMIT:\"l\",VIEW_FROM:\"vf\",VIEW_FROM_LEFT:\"l\",VIEW_FROM_RIGHT:\"r\",INDEX:\"i\"},t.REST_QUERY_CONSTANTS_={ORDER_BY:\"orderBy\",PRIORITY_INDEX:\"$priority\",VALUE_INDEX:\"$value\",KEY_INDEX:\"$key\",START_AT:\"startAt\",END_AT:\"endAt\",LIMIT_TO_FIRST:\"limitToFirst\",LIMIT_TO_LAST:\"limitToLast\"},t.DEFAULT=new t,t}(),an=function(t){function e(e,n){if(!(e instanceof en))throw new Error(\"new Reference() no longer supported - use app.database().\");return t.call(this,e,n,on.DEFAULT,!1)||this}return s.__extends(e,t),e.prototype.getKey=function(){return u.validateArgCount(\"Reference.key\",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return u.validateArgCount(\"Reference.child\",1,1,arguments.length),\"number\"==typeof t?t=String(t):t instanceof q||(null===this.path.getFront()?lt(\"Reference.child\",1,t,!1):ht(\"Reference.child\",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){u.validateArgCount(\"Reference.parent\",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){u.validateArgCount(\"Reference.root\",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){u.validateArgCount(\"Reference.set\",1,2,arguments.length),ct(\"Reference.set\",this.path),it(\"Reference.set\",1,t,this.path,!1),u.validateCallback(\"Reference.set\",2,e,!0);var n=new u.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(u.validateArgCount(\"Reference.update\",1,2,arguments.length),ct(\"Reference.update\",this.path),Array.isArray(t)){for(var n={},i=0;i<t.length;++i)n[\"\"+i]=t[i];t=n,x(\"Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.\")}ot(\"Reference.update\",1,t,this.path,!1),u.validateCallback(\"Reference.update\",2,e,!0);var r=new u.Deferred;return this.repo.update(this.path,t,r.wrapCallback(e)),r.promise},e.prototype.setWithPriority=function(t,e,n){if(u.validateArgCount(\"Reference.setWithPriority\",2,3,arguments.length),ct(\"Reference.setWithPriority\",this.path),it(\"Reference.setWithPriority\",1,t,this.path,!1),at(\"Reference.setWithPriority\",2,e,!1),u.validateCallback(\"Reference.setWithPriority\",3,n,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.setWithPriority failed: \"+this.getKey()+\" is a read-only object.\";var i=new u.Deferred;return this.repo.setWithPriority(this.path,t,e,i.wrapCallback(n)),i.promise},e.prototype.remove=function(t){return u.validateArgCount(\"Reference.remove\",0,1,arguments.length),ct(\"Reference.remove\",this.path),u.validateCallback(\"Reference.remove\",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(u.validateArgCount(\"Reference.transaction\",1,3,arguments.length),ct(\"Reference.transaction\",this.path),u.validateCallback(\"Reference.transaction\",1,t,!1),u.validateCallback(\"Reference.transaction\",2,e,!0),ft(\"Reference.transaction\",3,n,!0),\".length\"===this.getKey()||\".keys\"===this.getKey())throw\"Reference.transaction failed: \"+this.getKey()+\" is a read-only object.\";void 0===n&&(n=!0);var i=new u.Deferred;\"function\"==typeof e&&i.promise.catch((function(){}));var r=function(t,n,r){t?i.reject(t):i.resolve(new vt(n,r)),\"function\"==typeof e&&e(t,n,r)};return this.repo.startTransaction(this.path,t,r,n),i.promise},e.prototype.setPriority=function(t,e){u.validateArgCount(\"Reference.setPriority\",1,2,arguments.length),ct(\"Reference.setPriority\",this.path),at(\"Reference.setPriority\",1,t,!1),u.validateCallback(\"Reference.setPriority\",2,e,!0);var n=new u.Deferred;return this.repo.setWithPriority(this.path.child(\".priority\"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){u.validateArgCount(\"Reference.push\",0,2,arguments.length),ct(\"Reference.push\",this.path),it(\"Reference.push\",1,t,this.path,!0),u.validateCallback(\"Reference.push\",2,e,!0);var n,i=this.repo.serverTime(),r=gt(i),o=this.child(r),a=this.child(r);return n=null!=t?o.set(t,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),\"function\"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return ct(\"Reference.onDisconnect\",this.path),new dt(this.repo,this.path)},Object.defineProperty(e.prototype,\"database\",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"key\",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"parent\",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"root\",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}($t);\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */$t.__referenceConstructor=an,Pe.__referenceConstructor=an;\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar sn,un=function(){this.children={},this.childCount=0,this.value=null},hn=function(){function t(t,e,n){void 0===t&&(t=\"\"),void 0===e&&(e=null),void 0===n&&(n=new un),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof q?e:new q(e),i=this,r=n.getFront();null!==r;){i=new t(r,i,u.safeGet(i.node_.children,r)||new un),r=(n=n.popFront()).getFront()}return i},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){u.assert(void 0!==t,\"Cannot set value to undefined\"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;F(this.node_.children,(function(i,r){e(new t(i,n,r))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new q(null===this.parent_?this.name_:this.parent_.path()+\"/\"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),i=u.contains(this.node_.children,t);n&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||i||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}();!function(t){t[t.RUN=0]=\"RUN\",t[t.SENT=1]=\"SENT\",t[t.COMPLETED=2]=\"COMPLETED\",t[t.SENT_NEEDS_ABORT=3]=\"SENT_NEEDS_ABORT\",t[t.NEEDS_ABORT=4]=\"NEEDS_ABORT\"}(sn||(sn={})),en.MAX_TRANSACTION_RETRIES_=25,en.prototype.transactionsInit_=function(){this.transactionQueueTree_=new hn},en.prototype.startTransaction=function(t,e,n,i){this.log_(\"transaction on \"+t);var r=function(){},o=new an(this,t);o.on(\"value\",r);var a={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:i,retryCount:0,unwatcher:function(){o.off(\"value\",r)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(t);a.currentInputSnapshot=s;var h=a.update(s.val());if(void 0===h){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new Bt(a.currentInputSnapshot,new an(this,a.path),Rt);a.onComplete(null,!1,l)}}else{rt(\"transaction failed: Data returned \",h,a.path),a.status=sn.RUN;var c=this.transactionQueueTree_.subTree(t),p=c.getValue()||[];p.push(a),c.setValue(p);var f=void 0;if(\"object\"==typeof h&&null!==h&&u.contains(h,\".priority\"))f=u.safeGet(h,\".priority\"),u.assert(nt(f),\"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.\");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||Wt.EMPTY_NODE).getPriority().val();f=f;var d=this.generateServerValues(),v=zt(h,f),g=oe(v,s,d);a.currentOutputSnapshotRaw=v,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_();var _=this.serverSyncTree_.applyUserOverwrite(t,g,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,_),this.sendReadyTransactions_()}},en.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Wt.EMPTY_NODE},en.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);u.assert(n.length>0,\"Sending zero length transaction queue\"),n.every((function(t){return t.status===sn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},en.prototype.sendTransactionQueue_=function(t,e){for(var n=this,i=e.map((function(t){return t.currentWriteId})),r=this.getLatestState_(t,i),o=r,a=r.hash(),s=0;s<e.length;s++){var h=e[s];u.assert(h.status===sn.RUN,\"tryToSendTransactionQueue_: items in queue should all be run.\"),h.status=sn.SENT,h.retryCount++;var l=q.relativePath(t,h.path);o=o.updateChild(l,h.currentOutputSnapshotRaw)}var c=o.val(!0),p=t;this.server_.put(p.toString(),c,(function(i){n.log_(\"transaction put response\",{path:p.toString(),status:i});var r=[];if(\"ok\"===i){for(var o=[],a=0;a<e.length;a++){if(e[a].status=sn.COMPLETED,r=r.concat(n.serverSyncTree_.ackUserWrite(e[a].currentWriteId)),e[a].onComplete){var s=e[a].currentOutputSnapshotResolved,u=new an(n,e[a].path),h=new Bt(s,u,Rt);o.push(e[a].onComplete.bind(null,null,!0,h))}e[a].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,r);for(a=0;a<o.length;a++)V(o[a])}else{if(\"datastale\"===i)for(a=0;a<e.length;a++)e[a].status===sn.SENT_NEEDS_ABORT?e[a].status=sn.NEEDS_ABORT:e[a].status=sn.RUN;else{x(\"transaction at \"+p.toString()+\" failed: \"+i);for(a=0;a<e.length;a++)e[a].status=sn.NEEDS_ABORT,e[a].abortReason=i}n.rerunTransactions_(t)}}),a)},en.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),i=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(i,n),n},en.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,i=[],r=[],o=t.filter((function(t){return t.status===sn.RUN})).map((function(t){return t.currentWriteId})),a=0;a<t.length;a++){var s=t[a],h=q.relativePath(e,s.path),l=!1,c=void 0;if(u.assert(null!==h,\"rerunTransactionsUnderNode_: relativePath should not be null.\"),s.status===sn.NEEDS_ABORT)l=!0,c=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===sn.RUN)if(s.retryCount>=en.MAX_TRANSACTION_RETRIES_)l=!0,c=\"maxretry\",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var p=this.getLatestState_(s.path,o);s.currentInputSnapshot=p;var f=t[a].update(p.val());if(void 0!==f){rt(\"transaction failed: Data returned \",f,s.path);var d=zt(f);\"object\"==typeof f&&null!=f&&u.contains(f,\".priority\")||(d=d.updatePriority(p.getPriority()));var v=s.currentWriteId,g=this.generateServerValues(),y=oe(d,p,g);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(v),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(v,!0))}else l=!0,c=\"nodata\",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[a].status=sn.COMPLETED,n=t[a].unwatcher,setTimeout(n,Math.floor(0)),t[a].onComplete))if(\"nodata\"===c){var _=new an(this,t[a].path),m=t[a].currentInputSnapshot,b=new Bt(m,_,Rt);i.push(t[a].onComplete.bind(null,null,!1,b))}else i.push(t[a].onComplete.bind(null,new Error(c),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<i.length;a++)V(i[a]);this.sendReadyTransactions_()}},en.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},en.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},en.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,i=t.getValue();if(null!==i)for(var r=0;r<i.length;r++)e.push(i[r]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},en.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var i=0,r=0;r<n.length;r++)n[r].status!==sn.COMPLETED&&(n[i]=n[r],i++);n.length=i,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},en.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(i),i.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},en.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],i=[],r=-1,o=0;o<e.length;o++)if(e[o].status===sn.SENT_NEEDS_ABORT);else if(e[o].status===sn.SENT)u.assert(r===o-1,\"All SENT items should be at beginning of queue.\"),r=o,e[o].status=sn.SENT_NEEDS_ABORT,e[o].abortReason=\"set\";else if(u.assert(e[o].status===sn.RUN,\"Unexpected transaction status in abort\"),e[o].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error(\"set\"),!1,null))}-1===r?t.setValue(null):e.length=r+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i);for(o=0;o<n.length;o++)V(n[o])}};\n/**\n * @license\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ln,cn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return ln||(ln=new t),ln},t.prototype.interrupt=function(){var t,e,n,i;try{for(var r=s.__values(Object.keys(this.repos_)),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(Object.keys(this.repos_[a]))),h=u.next();!h.done;h=u.next()){var l=h.value;this.repos_[a][l].interrupt()}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,i;try{for(var r=s.__values(Object.keys(this.repos_)),o=r.next();!o.done;o=r.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(Object.keys(this.repos_[a]))),h=u.next();!h.done;h=u.next()){var l=h.value;this.repos_[a][l].resume()}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var r=n||t.options.databaseURL;void 0===r&&I(\"Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().\");var o=Q(r),a=o.repoInfo,s=void 0;return void 0!==i&&(s=i.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r=\"http://\"+s+\"?ns=\"+a.namespace,a=(o=Q(r)).repoInfo),pt(\"Invalid Firebase Database URL\",1,o),o.path.isEmpty()||I(\"Database URL must point to the root of a Firebase Database (not including a child path).\"),this.createRepo(a,t,e).database},t.prototype.deleteRepo=function(t){var e=u.safeGet(this.repos_,t.app.name);e&&u.safeGet(e,t.repoInfo_.toURLString())===t||I(\"Database \"+t.app.name+\"(\"+t.repoInfo_+\") has already been deleted.\"),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var i=u.safeGet(this.repos_,e.name);i||(i={},this.repos_[e.name]=i);var r=u.safeGet(i,t.toURLString());return r&&I(\"Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.\"),r=new en(t,this.useRestClient_,e,n),i[t.toURLString()]=r,r},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),pn=function(){function t(t){this.repo_=t,t instanceof en||I(\"Don't call new Database() directly - please use firebase.database().\"),this.root_=new an(t,q.Empty),this.INTERNAL=new fn(this)}return Object.defineProperty(t.prototype,\"app\",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_(\"ref\"),u.validateArgCount(\"database.ref\",0,1,arguments.length),t instanceof an?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e=\"database.refFromURL\";this.checkDeleted_(e),u.validateArgCount(e,1,1,arguments.length);var n=Q(t);pt(e,1,n);var i=n.repoInfo;return i.host!==this.repo_.repoInfo_.host&&I(e+\": Host name does not match the current database: (found \"+i.host+\" but expected \"+this.repo_.repoInfo_.host+\")\"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&I(\"Cannot call \"+t+\" on a deleted database.\")},t.prototype.goOffline=function(){u.validateArgCount(\"database.goOffline\",0,0,arguments.length),this.checkDeleted_(\"goOffline\"),this.repo_.interrupt()},t.prototype.goOnline=function(){u.validateArgCount(\"database.goOnline\",0,0,arguments.length),this.checkDeleted_(\"goOnline\"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{\".sv\":\"timestamp\"},_increment:function(t){return{\".sv\":{increment:t}}}},t}(),fn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){return this.database.checkDeleted_(\"delete\"),cn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),dn=Object.freeze({__proto__:null,forceLongPolling:function(){Ye.forceDisallow(),He.forceAllow()},forceWebSockets:function(){He.forceDisallow()},isWebSocketsAvailable:function(){return Ye.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),vn=Je;Je.prototype.simpleListen=function(t,e){this.sendRequest(\"q\",{p:t},e)},Je.prototype.echo=function(t,e){this.sendRequest(\"echo\",{d:t},e)};var gn=Ze,yn=K,_n=Object.freeze({__proto__:null,DataConnection:vn,RealTimeConnection:gn,hijackHash:function(t){var e=Je.prototype.put;return Je.prototype.put=function(n,i,r,o){void 0!==o&&(o=t()),e.call(this,n,i,r,o)},function(){Je.prototype.put=e}},ConnectionTarget:yn,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){cn.getInstance().forceRestClient(t)}}),mn=pn.ServerValue;function bn(e){!function(t){Be=t}(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new l.Component(\"database\",(function(t,e){var n=t.getProvider(\"app\").getImmediate(),i=t.getProvider(\"auth-internal\");return cn.getInstance().databaseFromApp(n,i,e)}),\"PUBLIC\").setServiceProps({Reference:an,Query:$t,Database:pn,DataSnapshot:Bt,enableLogging:E,INTERNAL:dn,ServerValue:mn,TEST_ACCESS:_n}).setMultipleInstances(!0));e.registerVersion(\"@firebase/database\",\"0.5.25\"),u.isNodeSdk()&&(t.exports=n)}bn(a),e.DataSnapshot=Bt,e.Database=pn,e.OnDisconnect=dt,e.Query=$t,e.Reference=an,e.ServerValue=mn,e.enableLogging=E,e.registerDatabase=bn}).call(this,n(23))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function a(){throw new Error(\"clearTimeout has not been defined\")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n=\"function\"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i=\"function\"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var u,h=[],l=!1,c=-1;function p(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&f())}function f(){if(!l){var t=s(p);l=!0;for(var e=h.length;e;){for(u=h,h=[];++c<e;)u&&u[c].run();c=-1,e=h.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new d(t,e)),1!==h.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title=\"browser\",r.browser=!0,r.env={},r.argv=[],r.version=\"\",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error(\"process.binding is not supported\")},r.cwd=function(){return\"/\"},r.chdir=function(t){throw new Error(\"process.chdir is not supported\")},r.umask=function(){return 0}},function(t,e,n){var i=n(25),r=n(26);\"string\"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,\"\"]]);var o={insert:\"head\",singleton:!1},a=(i(r,o),r.locals?r.locals:{});t.exports=a},function(t,e,n){\"use strict\";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),a=[];function s(t){for(var e=-1,n=0;n<a.length;n++)if(a[n].identifier===t){e=n;break}return e}function u(t,e){for(var n={},i=[],r=0;r<t.length;r++){var o=t[r],u=e.base?o[0]+e.base:o[0],h=n[u]||0,l=\"\".concat(u,\" \").concat(h);n[u]=h+1;var c=s(l),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==c?(a[c].references++,a[c].updater(p)):a.push({identifier:l,updater:g(p,e),references:1}),i.push(l)}return i}function h(t){var e=document.createElement(\"style\"),i=t.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),\"function\"==typeof t.insert)t.insert(e);else{var a=o(t.insert||\"head\");if(!a)throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join(\"\\n\")});function p(t,e,n,i){var r=n?\"\":i.media?\"@media \".concat(i.media,\" {\").concat(i.css,\"}\"):i.css;if(t.styleSheet)t.styleSheet.cssText=c(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function f(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute(\"media\",r):t.removeAttribute(\"media\"),o&&btoa&&(i+=\"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o)))),\" */\")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var d=null,v=0;function g(t,e){var n,i,r;if(e.singleton){var o=v++;n=d||(d=h(e)),i=p.bind(null,n,o,!1),r=p.bind(null,n,o,!0)}else n=h(e),i=f.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||\"boolean\"==typeof e.singleton||(e.singleton=r());var n=u(t=t||[],e);return function(t){if(t=t||[],\"[object Array]\"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=s(n[i]);a[r].references--}for(var o=u(t,e),h=0;h<n.length;h++){var l=s(n[h]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(t,e,n){(e=n(27)(!1)).push([t.i,'.ol-box {\\n  box-sizing: border-box;\\n  border-radius: 2px;\\n  border: 2px solid blue;\\n}\\n\\n.ol-mouse-position {\\n  top: 8px;\\n  right: 8px;\\n  position: absolute;\\n}\\n\\n.ol-scale-line {\\n  background: rgba(0,60,136,0.3);\\n  border-radius: 4px;\\n  bottom: 8px;\\n  left: 8px;\\n  padding: 2px;\\n  position: absolute;\\n}\\n.ol-scale-line-inner {\\n  border: 1px solid #eee;\\n  border-top: none;\\n  color: #eee;\\n  font-size: 10px;\\n  text-align: center;\\n  margin: 1px;\\n  will-change: contents, width;\\n  transition: all 0.25s;\\n}\\n.ol-scale-bar {\\n  position: absolute;\\n  bottom: 8px;\\n  left: 8px;\\n}\\n.ol-scale-step-marker {\\n  width: 1px;\\n  height: 15px;\\n  background-color: #000000;\\n  float: right;\\n  z-Index: 10;\\n}\\n.ol-scale-step-text {\\n  position: absolute;\\n  bottom: -5px;\\n  font-size: 12px;\\n  z-Index: 11;\\n  color: #000000;\\n  text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\\n}\\n.ol-scale-text {\\n  position: absolute;\\n  font-size: 14px;\\n  text-align: center;\\n  bottom: 25px;\\n  color: #000000;\\n  text-shadow: -2px 0 #FFFFFF, 0 2px #FFFFFF, 2px 0 #FFFFFF, 0 -2px #FFFFFF;\\n}\\n.ol-scale-singlebar {\\n  position: relative;\\n  height: 10px;\\n  z-Index: 9;\\n  border: 1px solid black;\\n}\\n\\n.ol-unsupported {\\n  display: none;\\n}\\n.ol-viewport, .ol-unselectable {\\n  -webkit-touch-callout: none;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none;\\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\\n}\\n.ol-overlaycontainer, .ol-overlaycontainer-stopevent {\\n  pointer-events: none;\\n}\\n.ol-overlaycontainer > *, .ol-overlaycontainer-stopevent > * {\\n  pointer-events: auto;\\n}\\n.ol-selectable {\\n  -webkit-touch-callout: default;\\n  -webkit-user-select: text;\\n  -moz-user-select: text;\\n  -ms-user-select: text;\\n  user-select: text;\\n}\\n.ol-grabbing {\\n  cursor: -webkit-grabbing;\\n  cursor: -moz-grabbing;\\n  cursor: grabbing;\\n}\\n.ol-grab {\\n  cursor: move;\\n  cursor: -webkit-grab;\\n  cursor: -moz-grab;\\n  cursor: grab;\\n}\\n.ol-control {\\n  position: absolute;\\n  background-color: rgba(255,255,255,0.4);\\n  border-radius: 4px;\\n  padding: 2px;\\n}\\n.ol-control:hover {\\n  background-color: rgba(255,255,255,0.6);\\n}\\n.ol-zoom {\\n  top: .5em;\\n  left: .5em;\\n}\\n.ol-rotate {\\n  top: .5em;\\n  right: .5em;\\n  transition: opacity .25s linear, visibility 0s linear;\\n}\\n.ol-rotate.ol-hidden {\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .25s linear, visibility 0s linear .25s;\\n}\\n.ol-zoom-extent {\\n  top: 4.643em;\\n  left: .5em;\\n}\\n.ol-full-screen {\\n  right: .5em;\\n  top: .5em;\\n}\\n\\n.ol-control button {\\n  display: block;\\n  margin: 1px;\\n  padding: 0;\\n  color: white;\\n  font-size: 1.14em;\\n  font-weight: bold;\\n  text-decoration: none;\\n  text-align: center;\\n  height: 1.375em;\\n  width: 1.375em;\\n  line-height: .4em;\\n  background-color: rgba(0,60,136,0.5);\\n  border: none;\\n  border-radius: 2px;\\n}\\n.ol-control button::-moz-focus-inner {\\n  border: none;\\n  padding: 0;\\n}\\n.ol-control button span {\\n  pointer-events: none;\\n}\\n.ol-zoom-extent button {\\n  line-height: 1.4em;\\n}\\n.ol-compass {\\n  display: block;\\n  font-weight: normal;\\n  font-size: 1.2em;\\n  will-change: transform;\\n}\\n.ol-touch .ol-control button {\\n  font-size: 1.5em;\\n}\\n.ol-touch .ol-zoom-extent {\\n  top: 5.5em;\\n}\\n.ol-control button:hover,\\n.ol-control button:focus {\\n  text-decoration: none;\\n  background-color: rgba(0,60,136,0.7);\\n}\\n.ol-zoom .ol-zoom-in {\\n  border-radius: 2px 2px 0 0;\\n}\\n.ol-zoom .ol-zoom-out {\\n  border-radius: 0 0 2px 2px;\\n}\\n\\n\\n.ol-attribution {\\n  text-align: right;\\n  bottom: .5em;\\n  right: .5em;\\n  max-width: calc(100% - 1.3em);\\n}\\n\\n.ol-attribution ul {\\n  margin: 0;\\n  padding: 0 .5em;\\n  color: #000;\\n  text-shadow: 0 0 2px #fff;\\n}\\n.ol-attribution li {\\n  display: inline;\\n  list-style: none;\\n}\\n.ol-attribution li:not(:last-child):after {\\n  content: \" \";\\n}\\n.ol-attribution img {\\n  max-height: 2em;\\n  max-width: inherit;\\n  vertical-align: middle;\\n}\\n.ol-attribution ul, .ol-attribution button {\\n  display: inline-block;\\n}\\n.ol-attribution.ol-collapsed ul {\\n  display: none;\\n}\\n.ol-attribution:not(.ol-collapsed) {\\n  background: rgba(255,255,255,0.8);\\n}\\n.ol-attribution.ol-uncollapsible {\\n  bottom: 0;\\n  right: 0;\\n  border-radius: 4px 0 0;\\n}\\n.ol-attribution.ol-uncollapsible img {\\n  margin-top: -.2em;\\n  max-height: 1.6em;\\n}\\n.ol-attribution.ol-uncollapsible button {\\n  display: none;\\n}\\n\\n.ol-zoomslider {\\n  top: 4.5em;\\n  left: .5em;\\n  height: 200px;\\n}\\n.ol-zoomslider button {\\n  position: relative;\\n  height: 10px;\\n}\\n\\n.ol-touch .ol-zoomslider {\\n  top: 5.5em;\\n}\\n\\n.ol-overviewmap {\\n  left: 0.5em;\\n  bottom: 0.5em;\\n}\\n.ol-overviewmap.ol-uncollapsible {\\n  bottom: 0;\\n  left: 0;\\n  border-radius: 0 4px 0 0;\\n}\\n.ol-overviewmap .ol-overviewmap-map,\\n.ol-overviewmap button {\\n  display: inline-block;\\n}\\n.ol-overviewmap .ol-overviewmap-map {\\n  border: 1px solid #7b98bc;\\n  height: 150px;\\n  margin: 2px;\\n  width: 150px;\\n}\\n.ol-overviewmap:not(.ol-collapsed) button{\\n  bottom: 1px;\\n  left: 2px;\\n  position: absolute;\\n}\\n.ol-overviewmap.ol-collapsed .ol-overviewmap-map,\\n.ol-overviewmap.ol-uncollapsible button {\\n  display: none;\\n}\\n.ol-overviewmap:not(.ol-collapsed) {\\n  background: rgba(255,255,255,0.8);\\n}\\n.ol-overviewmap-box {\\n  border: 2px dotted rgba(0,60,136,0.7);\\n}\\n\\n.ol-overviewmap .ol-overviewmap-box:hover {\\n  cursor: move;\\n}\\n',\"\"]),t.exports=e},function(t,e,n){\"use strict\";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||\"\",i=t[3];if(!i)return n;if(e&&\"function\"==typeof btoa){var r=(a=i,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),u=\"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(s),\"/*# \".concat(u,\" */\")),o=i.sources.map((function(t){return\"/*# sourceURL=\".concat(i.sourceRoot||\"\").concat(t,\" */\")}));return[n].concat(o).concat([r]).join(\"\\n\")}var a,s,u;return[n].join(\"\\n\")}(e,t);return e[2]?\"@media \".concat(e[2],\" {\").concat(n,\"}\"):n})).join(\"\")},e.i=function(t,n,i){\"string\"==typeof t&&(t=[[null,t,\"\"]]);var r={};if(i)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(r[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);i&&r[u[0]]||(n&&(u[2]?u[2]=\"\".concat(n,\" and \").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e){var n=null,i=null;function r(t,e,n){t.addEventListener(e,(function(t){var r=new MouseEvent(n,t);r.pointerId=1,r.isPrimary=!0,r.pointerType=\"mouse\",r.width=1,r.height=1,r.tiltX=0,r.tiltY=0,\"buttons\"in t&&0!==t.buttons?r.pressure=.5:r.pressure=0;var o=t.target;null!==i&&(o=i,\"mouseup\"===e&&(i=null)),o.dispatchEvent(r),r.defaultPrevented&&t.preventDefault()}))}function o(t,e,i){t.addEventListener(e,(function(t){for(var r=t.changedTouches,o=r.length,a=0;a<o;a++){var s=new CustomEvent(i,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var u=r.item(a);s.clientX=u.clientX,s.clientY=u.clientY,s.screenX=u.screenX,s.screenY=u.screenY,s.pageX=u.pageX,s.pageY=u.pageY;var h=u.target.getBoundingClientRect();s.offsetX=u.clientX-h.left,s.offsetY=u.clientY-h.top,s.pointerId=1+u.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType=\"touch\",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,\"touchstart\"===e&&null===n&&(n=u.identifier),s.isPrimary=u.identifier===n,\"touchend\"===e&&s.isPrimary&&(n=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}\"PointerEvent\"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,\"TouchEvent\"in window||(r(document,\"mousedown\",\"pointerdown\"),r(document,\"mousemove\",\"pointermove\"),r(document,\"mouseup\",\"pointerup\")),o(document,\"touchstart\",\"pointerdown\"),o(document,\"touchmove\",\"pointermove\"),o(document,\"touchend\",\"pointerup\"))},function(t,e,n){\"use strict\";n.r(e);var i=n(3),r=n.n(i);n(21),n(22);var o=class{constructor(){r.a.initializeApp({apiKey:\"AIzaSyBxAY8l3CubPoeLoRNaNnYC5zYfgX2aDp0\",authDomain:\"inf551-d972f.firebaseapp.com\",databaseURL:\"https://inf551-d972f.firebaseio.com\",projectId:\"inf551-d972f\",storageBucket:\"inf551-d972f.appspot.com\",messagingSenderId:\"1023654183370\",appId:\"1:1023654183370:web:df412475f62dce4e560f33\"}),this.currDB=\"world\"}getData(t,e=null,n=100){let i=r.a.database().ref();if(null==e){let e=i.child(t).limitToFirst(n);return new Promise((t,n)=>{e.on(\"value\",(function(e){t(Object.values(e.val()))}))})}if(\"world\"==t){let t=i.child(\"world_index\").orderByKey().equalTo(e.keyword).limitToFirst(n);return new Promise((function(e,n){t.on(\"value\",(function(t){console.log(t.val());let n=Object.values(t.val())[0],i={country2:[],city:[],countrylanguage:[]};for(let t=0;t<n.length;t++){i[n[t][0]].push(n[t][2])}e(i)}))}))}if(\"us_restaurant\"==t){let t=i.child(\"yelp_index\").orderByKey().equalTo(e.keyword).limitToFirst(n);return new Promise((function(e,n){t.on(\"value\",(function(t){let n=Object.values(t.val())[0],i={yelp_business:[],yelp_user:[]};for(let t=0;t<n.length;t++){i[n[t][0]].push(n[t][2])}e(i)}))}))}}getDataByKey(t,e){}};n(24);function a(){return function(){throw new Error(\"Unimplemented abstract method.\")}()}var s=0;function u(t){return t.ol_uid||(t.ol_uid=String(++s))}var h,l=(h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(e){var n=this,i=\"Assertion failed. See https://openlayers.org/en/\"+(\"v\"+\"6.3.1\".split(\"-\")[0])+\"/doc/errors/#\"+e+\" for details.\";return(n=t.call(this,i)||this).code=e,n.name=\"AssertionError\",n.message=i,n}return l(e,t),e}(Error),p=\"add\",f=\"remove\",d=\"propertychange\",v=\"function\"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError(\"Cannot convert undefined or null to object\");for(var n=Object(t),i=1,r=arguments.length;i<r;++i){var o=arguments[i];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])}return n};function g(t){for(var e in t)delete t[e]}var y=\"function\"==typeof Object.values?Object.values:function(t){var e=[];for(var n in t)e.push(t[n]);return e};function _(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){var o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}var a={target:t,type:e,listener:n};return t.addEventListener(e,n),a}function m(t,e,n,i){return _(t,e,n,i,!0)}function b(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),g(t))}var w=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function E(t,e){return t>e?1:t<e?-1:0}function C(t,e,n){var i=t.length;if(t[0]<=e)return 0;if(e<=t[i-1])return i-1;var r=void 0;if(n>0){for(r=1;r<i;++r)if(t[r]<e)return r-1}else if(n<0){for(r=1;r<i;++r)if(t[r]<=e)return r}else for(r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function T(t,e){for(var n=Array.isArray(e)?e:[e],i=n.length,r=0;r<i;r++)t[t.length]=n[r]}function S(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function I(){return!0}function x(){return!1}function P(){}var R=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),O=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),A=function(t){function e(e){var n=t.call(this)||this;return n.eventTarget_=e,n.pendingRemovals_={},n.dispatching_={},n.listeners_={},n}return O(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var n=this.listeners_[t];n||(n=[],this.listeners_[t]=n),-1===n.indexOf(e)&&n.push(e)}},e.prototype.dispatchEvent=function(t){var e=\"string\"==typeof t?new R(t):t,n=e.type;e.target||(e.target=this.eventTarget_||this);var i,r=this.listeners_[n];if(r){n in this.dispatching_||(this.dispatching_[n]=0,this.pendingRemovals_[n]=0),++this.dispatching_[n];for(var o=0,a=r.length;o<a;++o)if(!1===(i=\"handleEvent\"in r[o]?r[o].handleEvent(e):r[o].call(this,e))||e.propagationStopped){i=!1;break}if(--this.dispatching_[n],0===this.dispatching_[n]){var s=this.pendingRemovals_[n];for(delete this.pendingRemovals_[n];s--;)this.removeEventListener(n,P);delete this.dispatching_[n]}return i}},e.prototype.disposeInternal=function(){g(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var n=this.listeners_[t];if(n){var i=n.indexOf(e);-1!==i&&(t in this.pendingRemovals_?(n[i]=P,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}},e}(w),N=\"change\",k=\"error\",D=\"contextmenu\",L=\"click\",F=\"dblclick\",M=\"keydown\",j=\"keypress\",U=\"load\",V=\"resize\",W=\"touchmove\",q=\"wheel\",z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var K=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return z(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(N)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=_(this,t[r],e);return i}return _(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=m(this,t[r],e);return i}return m(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)},e}(A),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),G=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.key=n,r.oldValue=i,r}return H(e,t),e}(R),B=function(t){function e(e){var n=t.call(this)||this;return u(n),n.values_={},void 0!==e&&n.setProperties(e),n}return H(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return v({},this.values_)},e.prototype.notify=function(t,e){var n;n=Y(t),this.dispatchEvent(new G(n,t,e)),n=d,this.dispatchEvent(new G(n,t,e))},e.prototype.set=function(t,e,n){if(n)this.values_[t]=e;else{var i=this.values_[t];this.values_[t]=e,i!==e&&this.notify(t,i)}},e.prototype.setProperties=function(t,e){for(var n in t)this.set(n,t[n],e)},e.prototype.unset=function(t,e){if(t in this.values_){var n=this.values_[t];delete this.values_[t],e||this.notify(t,n)}},e}(K),X={};function Y(t){return X.hasOwnProperty(t)?X[t]:X[t]=\"change:\"+t}var Q=B,Z=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),J=\"length\",tt=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.element=n,r.index=i,r}return Z(e,t),e}(R),et=function(t){function e(e,n){var i=t.call(this)||this,r=n||{};if(i.unique_=!!r.unique,i.array_=e||[],i.unique_)for(var o=0,a=i.array_.length;o<a;++o)i.assertUnique_(i.array_[o],o);return i.updateLength_(),i}return Z(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,n=t.length;e<n;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)t(e[n],n,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get(J)},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new tt(p,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new tt(f,e,t)),e},e.prototype.setAt=function(t,e){var n=this.getLength();if(t<n){this.unique_&&this.assertUnique_(e,t);var i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new tt(f,i,t)),this.dispatchEvent(new tt(p,e,t))}else{for(var r=n;r<t;++r)this.insertAt(r,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set(J,this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new c(58)},e}(Q),nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),it=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.map=n,r.frameState=void 0!==i?i:null,r}return nt(e,t),e}(R),rt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ot=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,o)||this;return a.originalEvent=i,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==r&&r,a}return rt(e,t),Object.defineProperty(e.prototype,\"pixel\",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"coordinate\",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(it),at=(n(28),\"undefined\"!=typeof navigator?navigator.userAgent.toLowerCase():\"\"),st=-1!==at.indexOf(\"firefox\"),ut=(-1!==at.indexOf(\"safari\")&&at.indexOf(\"chrom\"),-1!==at.indexOf(\"webkit\")&&-1==at.indexOf(\"edge\")),ht=-1!==at.indexOf(\"macintosh\"),lt=\"undefined\"!=typeof devicePixelRatio?devicePixelRatio:1,ct=\"undefined\"!=typeof WorkerGlobalScope&&\"undefined\"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,pt=\"undefined\"!=typeof Image&&Image.prototype.decode,ft=function(){var t=!1;try{var e=Object.defineProperty({},\"passive\",{get:function(){t=!0}});window.addEventListener(\"_\",null,e),window.removeEventListener(\"_\",null,e)}catch(t){}return t}(),dt={SINGLECLICK:\"singleclick\",CLICK:L,DBLCLICK:F,POINTERDRAG:\"pointerdrag\",POINTERMOVE:\"pointermove\",POINTERDOWN:\"pointerdown\",POINTERUP:\"pointerup\",POINTEROVER:\"pointerover\",POINTEROUT:\"pointerout\",POINTERENTER:\"pointerenter\",POINTERLEAVE:\"pointerleave\",POINTERCANCEL:\"pointercancel\"},vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gt=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i,r,o)||this;return a.pointerEvent=i,a}return vt(e,t),e}(ot),yt=\"pointermove\",_t=\"pointerdown\",mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),bt=function(t){function e(e,n){var i=t.call(this,e)||this;i.map_=e,i.clickTimeoutId_,i.dragging_=!1,i.dragListenerKeys_=[],i.moveTolerance_=n?n*lt:lt,i.down_=null;var r=i.map_.getViewport();return i.activePointers_=0,i.trackedTouches_={},i.element_=r,i.pointerdownListenerKey_=_(r,_t,i.handlePointerDown_,i),i.originalPointerMoveEvent_,i.relayedListenerKey_=_(r,yt,i.relayEvent_,i),i.boundHandleTouchMove_=i.handleTouchMove_.bind(i),i.element_.addEventListener(W,i.boundHandleTouchMove_,!!ft&&{passive:!1}),i}return mt(e,t),e.prototype.emulateClick_=function(t){var e=new gt(dt.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new gt(dt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new gt(dt.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==dt.POINTERUP||e.type==dt.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==dt.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new gt(dt.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(b),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new gt(dt.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(_(document,dt.POINTERMOVE,this.handlePointerMove_,this),_(document,dt.POINTERUP,this.handlePointerUp_,this),_(this.element_,dt.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new gt(dt.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new gt(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(b(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(W,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(b(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(b),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(A),wt=\"postrender\",Et=\"movestart\",Ct=\"moveend\",Tt=\"layergroup\",St=\"size\",It=\"target\",xt=\"view\",Pt=\"prerender\",Rt=\"postrender\",Ot=\"precompose\",At=\"postcompose\",Nt=\"rendercomplete\",kt=0,Dt=1,Lt=2,Ft=3,Mt=4;function jt(t,e){if(!t)throw new c(e)}var Ut=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,g(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var i=this.keyFunction_(n);return delete this.queuedElements_[i],n},t.prototype.enqueue=function(t){jt(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,n=this.priorities_,i=e.length,r=e[t],o=n[t],a=t;t<i>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),h=u<i&&n[u]<n[s]?u:s;e[t]=e[h],n[t]=n[h],t=h}e[t]=r,n[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var n=this.elements_,i=this.priorities_,r=n[e],o=i[e];e>t;){var a=this.getParentIndex_(e);if(!(i[a]>o))break;n[e]=n[a],i[e]=i[a],e=a}n[e]=r,i[e]=o},t.prototype.reprioritize=function(){var t,e,n,i=this.priorityFunction_,r=this.elements_,o=this.priorities_,a=0,s=r.length;for(e=0;e<s;++e)(n=i(t=r[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=n,r[a++]=t);r.length=a,o.length=a,this.heapify_()},t}(),Vt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Wt=function(t){function e(e,n){var i=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return Vt(e,t),e.prototype.enqueue=function(e){var n=t.prototype.enqueue.call(this,e);n&&e[0].addEventListener(N,this.boundHandleTileChange_);return n},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,n=e.getState();if(e.hifi&&n===Lt||n===Ft||n===Mt){e.removeEventListener(N,this.boundHandleTileChange_);var i=e.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var n,i,r=0;this.tilesLoading_<t&&r<e&&this.getCount()>0;)i=(n=this.dequeue()[0]).getKey(),n.getState()!==kt||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++r,n.load())},e}(Ut);function qt(t,e,n){return Math.min(Math.max(t,e),n)}var zt=\"cosh\"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function Kt(t,e,n,i,r,o){var a=r-n,s=o-i;if(0!==a||0!==s){var u=((t-n)*a+(e-i)*s)/(a*a+s*s);u>1?(n=r,i=o):u>0&&(n+=a*u,i+=s*u)}return Ht(t,e,n,i)}function Ht(t,e,n,i){var r=n-t,o=i-e;return r*r+o*o}function Gt(t){return t*Math.PI/180}function Bt(t,e){var n=t%e;return n*e<0?n+e:n}function Xt(t,e,n){return t+n*(e-t)}function Yt(t,e,n){return function(i,r,o,a){if(i){var s=e?0:o[0]*r,u=e?0:o[1]*r,h=t[0]+s/2,l=t[2]-s/2,c=t[1]+u/2,p=t[3]-u/2;h>l&&(l=h=(l+h)/2),c>p&&(p=c=(p+c)/2);var f=qt(i[0],h,l),d=qt(i[1],c,p),v=30*r;return a&&n&&(f+=-v*Math.log(1+Math.max(0,h-i[0])/v)+v*Math.log(1+Math.max(0,i[0]-l)/v),d+=-v*Math.log(1+Math.max(0,c-i[1])/v)+v*Math.log(1+Math.max(0,i[1]-p)/v)),[f,d]}}}function Qt(t){return t}var Zt=\"bottom-left\",$t=\"bottom-right\",Jt=\"top-left\",te=\"top-right\",ee=0,ne=1,ie=2,re=4,oe=8,ae=16;function se(t){for(var e=pe(),n=0,i=t.length;n<i;++n)ge(e,t[n]);return e}function ue(t,e,n){var i,r;return(i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*i+(r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0)*r}function he(t,e){return le(t,e[0],e[1])}function le(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function ce(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],a=e[0],s=e[1],u=ee;return a<n?u|=ae:a>r&&(u|=re),s<i?u|=oe:s>o&&(u|=ie),u===ee&&(u=ne),u}function pe(){return[1/0,1/0,-1/0,-1/0]}function fe(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function de(t){return fe(1/0,1/0,-1/0,-1/0,t)}function ve(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function ge(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ye(t,e){for(var n=0,i=e.length;n<i;++n)ge(t,e[n]);return t}function _e(t,e,n,i,r){for(;n<i;n+=r)me(t,e[n],e[n+1]);return t}function me(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function be(t){var e=0;return Ne(t)||(e=Oe(t)*Ie(t)),e}function we(t){return[t[0],t[1]]}function Ee(t){return[t[2],t[1]]}function Ce(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Te(t,e){var n;return e===Zt?n=we(t):e===$t?n=Ee(t):e===Jt?n=Pe(t):e===te?n=Re(t):jt(!1,13),n}function Se(t,e,n,i,r){var o=e*i[0]/2,a=e*i[1]/2,s=Math.cos(n),u=Math.sin(n),h=o*s,l=o*u,c=a*s,p=a*u,f=t[0],d=t[1],v=f-h+p,g=f-h-p,y=f+h-p,_=f+h+p,m=d-l-c,b=d-l+c,w=d+l+c,E=d+l-c;return fe(Math.min(v,g,y,_),Math.min(m,b,w,E),Math.max(v,g,y,_),Math.max(m,b,w,E),r)}function Ie(t){return t[3]-t[1]}function xe(t,e,n){var i=n||[1/0,1/0,-1/0,-1/0];return Ae(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):de(i),i}function Pe(t){return[t[0],t[3]]}function Re(t){return[t[2],t[3]]}function Oe(t){return t[2]-t[0]}function Ae(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ne(t){return t[2]<t[0]||t[3]<t[1]}function ke(t,e,n,i){var r=[];if(i>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<i;++s)r.push(t[0]+o*s/i,t[1],t[2],t[1]+a*s/i,t[2]-o*s/i,t[3],t[0],t[3]-a*s/i);else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);for(var u=[],h=[],l=(s=0,r.length);s<l;s+=2)u.push(r[s]),h.push(r[s+1]);return function(t,e,n){return fe(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(u,h,n)}function De(t,e,n,i){var r=Oe(e)/n[0],o=Ie(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function Le(t,e,n){var i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),qt(i,n/2,2*e)}function Fe(t,e,n,i,r){return function(o,a,s,u){if(void 0!==o){var h=i?De(t,i,s,r):t;return(void 0===n||n)&&u?Le(o,h,e):qt(o,e,h)}}}function Me(t){return void 0!==t?0:void 0}function je(t){return void 0!==t?t:void 0}var Ue=0,Ve=1,We=\"center\",qe=\"resolution\",ze=\"rotation\";function Ke(t,e){for(var n=!0,i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function He(t,e){var n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function Ge(t){return Math.pow(t,3)}function Be(t){return 1-Ge(1-t)}function Xe(t){return 3*t*t-2*t*t*t}function Ye(t){return t}var Qe=\"Point\",Ze=\"LineString\",$e=\"LinearRing\",Je=\"Polygon\",tn=\"MultiPoint\",en=\"MultiLineString\",nn=\"MultiPolygon\",rn=\"GeometryCollection\",on=\"Circle\",an=\"XY\",sn=\"XYZ\",un=\"XYM\",hn=\"XYZM\";function ln(t,e,n,i,r,o){for(var a=o||[],s=0,u=e;u<n;u+=i){var h=t[u],l=t[u+1];a[s++]=r[0]*h+r[2]*l+r[4],a[s++]=r[1]*h+r[3]*l+r[5]}return o&&a.length!=s&&(a.length=s),a}function cn(t,e,n){var i=n||6371008.8,r=Gt(t[1]),o=Gt(e[1]),a=(o-r)/2,s=Gt(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(r)*Math.cos(o);return 2*i*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}var pn={DEGREES:\"degrees\",FEET:\"ft\",METERS:\"m\",PIXELS:\"pixels\",TILE_PIXELS:\"tile-pixels\",USFEET:\"us-ft\"},fn={};fn[pn.DEGREES]=2*Math.PI*6370997/360,fn[pn.FEET]=.3048,fn[pn.METERS]=1,fn[pn.USFEET]=1200/3937;var dn=pn,vn=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:\"enu\",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||fn[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),gn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),yn=6378137*Math.PI,_n=[-yn,-yn,yn,yn],mn=[-180,-85,180,85],bn=function(t){function e(e){return t.call(this,{code:e,units:dn.METERS,extent:_n,global:!0,worldExtent:mn,getPointResolution:function(t,e){return t/zt(e[1]/6378137)}})||this}return gn(e,t),e}(vn),wn=[new bn(\"EPSG:3857\"),new bn(\"EPSG:102100\"),new bn(\"EPSG:102113\"),new bn(\"EPSG:900913\"),new bn(\"urn:ogc:def:crs:EPSG:6.18:3:3857\"),new bn(\"urn:ogc:def:crs:EPSG::3857\"),new bn(\"http://www.opengis.net/gml/srs/epsg.xml#3857\")];function En(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var a=yn,s=0;s<i;s+=r){o[s]=a*t[s]/180;var u=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o}function Cn(t,e,n){var i=t.length,r=n>1?n:2,o=e;void 0===o&&(o=r>2?t.slice():new Array(i));for(var a=0;a<i;a+=r)o[a]=180*t[a]/yn,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o}var Tn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sn=[-180,-90,180,90],In=6378137*Math.PI/180,xn=function(t){function e(e,n){return t.call(this,{code:e,units:dn.DEGREES,extent:Sn,axisOrientation:n,global:!0,metersPerUnit:In,worldExtent:Sn})||this}return Tn(e,t),e}(vn),Pn=[new xn(\"CRS:84\"),new xn(\"EPSG:4326\",\"neu\"),new xn(\"urn:ogc:def:crs:EPSG::4326\",\"neu\"),new xn(\"urn:ogc:def:crs:EPSG:6.6:4326\",\"neu\"),new xn(\"urn:ogc:def:crs:OGC:1.3:CRS84\"),new xn(\"urn:ogc:def:crs:OGC:2:84\"),new xn(\"http://www.opengis.net/gml/srs/epsg.xml#4326\",\"neu\"),new xn(\"urn:x-ogc:def:crs:EPSG:4326\",\"neu\")],Rn={};function On(t,e,n){var i=t.getCode(),r=e.getCode();i in Rn||(Rn[i]={}),Rn[i][r]=n}var An={};function Nn(t,e,n){var i;if(void 0!==e){for(var r=0,o=t.length;r<o;++r)e[r]=t[r];i=e}else i=t.slice();return i}function kn(t,e,n){if(void 0!==e&&t!==e){for(var i=0,r=t.length;i<r;++i)e[i]=t[i];t=e}return t}function Dn(t){!function(t,e){An[t]=e}(t.getCode(),t),On(t,t,Nn)}function Ln(t){return\"string\"==typeof t?An[t]||null:t||null}function Fn(t,e,n,i){var r,o=(t=Ln(t)).getPointResolutionFunc();if(o)r=o(e,n),i&&i!==t.getUnits()&&(a=t.getMetersPerUnit())&&(r=r*a/fn[i]);else if(t.getUnits()==dn.DEGREES&&!i||i==dn.DEGREES)r=e;else{var a,s=Vn(t,Ln(\"EPSG:4326\")),u=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];r=(cn((u=s(u,u,2)).slice(0,2),u.slice(2,4))+cn(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=i?fn[i]:t.getMetersPerUnit())&&(r/=a)}return r}function Mn(t){!function(t){t.forEach(Dn)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&On(e,t,Nn)}))}))}function jn(t,e){return t?\"string\"==typeof t?Ln(t):t:Ln(e)}function Un(t,e){if(t===e)return!0;var n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Vn(t,e)===Nn)&&n}function Vn(t,e){var n=function(t,e){var n;return t in Rn&&e in Rn[t]&&(n=Rn[t][e]),n}(t.getCode(),e.getCode());return n||(n=kn),n}function Wn(t,e){return Vn(Ln(t),Ln(e))}function qn(t,e,n){return Wn(e,n)(t,void 0,t.length)}function zn(t,e,n,i){return ke(t,Wn(e,n),void 0,i)}var Kn,Hn,Gn,Bn=null;function Xn(){return Bn}function Yn(t,e){return Bn?qn(t,e,Bn):t}function Qn(t,e){return Bn?qn(t,Bn,e):t}function Zn(t,e){return Bn?zn(t,Bn,e):t}Mn(wn),Mn(Pn),Kn=wn,Hn=En,Gn=Cn,Pn.forEach((function(t){Kn.forEach((function(e){On(t,e,Hn),On(e,t,Gn)}))}));new Array(6);function $n(t,e){var n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Jn(t,e,n,i,r,o,a,s){var u=Math.sin(o),h=Math.cos(o);return t[0]=i*h,t[1]=r*u,t[2]=-i*u,t[3]=r*h,t[4]=a*i*h-s*i*u+e,t[5]=a*r*u+s*r*h+n,t}function ti(t,e){var n,i=(n=e)[0]*n[3]-n[1]*n[2];jt(0!==i,32);var r=e[0],o=e[1],a=e[2],s=e[3],u=e[4],h=e[5];return t[0]=s/i,t[1]=-o/i,t[2]=-a/i,t[3]=r/i,t[4]=(a*h-s*u)/i,t[5]=-(r*h-o*u)/i,t}function ei(t){return\"matrix(\"+t.join(\", \")+\")\"}var ni=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ii=[1,0,0,1,0,0],ri=function(t){function e(){var e,n,i,r,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,n){if(!n)return this.getSimplifiedGeometry(e);var i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===r&&S(t,i)||(o=!0,r=this,i=t,n=e.apply(this,arguments)),n}),a}return ni(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return a()},e.prototype.closestPointXY=function(t,e,n,i){return a()},e.prototype.containsXY=function(t,e){var n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e},e.prototype.getClosestPoint=function(t,e){var n=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],n,1/0),n},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return a()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){a()},e.prototype.scale=function(t,e,n){a()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return a()},e.prototype.getType=function(){return a()},e.prototype.applyTransform=function(t){a()},e.prototype.intersectsExtent=function(t){return a()},e.prototype.translate=function(t,e){a()},e.prototype.transform=function(t,e){var n=Ln(t),i=n.getUnits()==dn.TILE_PIXELS?function(t,i,r){var o=n.getExtent(),a=n.getWorldExtent(),s=Ie(a)/Ie(o);return Jn(ii,a[0],a[3],s,-s,0,0,0),ln(t,0,t.length,r,ii,i),Wn(n,e)(t,i,r)}:Wn(n,e);return this.applyTransform(i),this},e}(Q),oi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function ai(t){var e;return t==an?e=2:t==sn||t==un?e=3:t==hn&&(e=4),e}var si=function(t){function e(){var e=t.call(this)||this;return e.layout=an,e.stride=2,e.flatCoordinates=null,e}return oi(e,t),e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=0,i=this.flatCoordinates.length,r=this.stride,_e(de(t),e,n,i,r);var e,n,i,r},e.prototype.getCoordinates=function(){return a()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=ai(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){a()},e.prototype.setLayout=function(t,e,n){var i;if(t)i=ai(t);else{for(var r=0;r<n;++r){if(0===e.length)return this.layout=an,void(this.stride=2);e=e[0]}t=function(t){var e;2==t?e=an:3==t?e=sn:4==t&&(e=hn);return e}(i=e.length)}this.layout=t,this.stride=i},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,o,a){for(var s=a||[],u=Math.cos(r),h=Math.sin(r),l=o[0],c=o[1],p=0,f=e;f<n;f+=i){var d=t[f]-l,v=t[f+1]-c;s[p++]=l+d*u-v*h,s[p++]=c+d*h+v*u;for(var g=f+2;g<f+i;++g)s[p++]=t[g]}a&&s.length!=p&&(s.length=p)}(n,0,n.length,i,t,e,n),this.changed()}},e.prototype.scale=function(t,e,n){var i=e;void 0===i&&(i=t);var r=n;r||(r=Ce(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,n,i,r,o,a,s){for(var u=s||[],h=a[0],l=a[1],c=0,p=e;p<n;p+=i){var f=t[p]-h,d=t[p+1]-l;u[c++]=h+r*f,u[c++]=l+o*d;for(var v=p+2;v<p+i;++v)u[c++]=t[v]}s&&u.length!=c&&(u.length=c)}(o,0,o.length,a,t,i,r,o),this.changed()}},e.prototype.translate=function(t,e){var n=this.getFlatCoordinates();if(n){var i=this.getStride();!function(t,e,n,i,r,o,a){for(var s=a||[],u=0,h=e;h<n;h+=i){s[u++]=t[h]+r,s[u++]=t[h+1]+o;for(var l=h+2;l<h+i;++l)s[u++]=t[l]}a&&s.length!=u&&(s.length=u)}(n,0,n.length,i,t,e,n),this.changed()}},e}(ri);function ui(t,e,n,i){for(var r=0,o=t[n-i],a=t[n-i+1];e<n;e+=i){var s=t[e],u=t[e+1];r+=a*s-o*u,o=s,a=u}return r/2}function hi(t,e,n,i){for(var r=0,o=0,a=n.length;o<a;++o){var s=n[o];r+=ui(t,e,s,i),e=s}return r}function li(t,e,n,i,r,o,a){var s,u=t[e],h=t[e+1],l=t[n]-u,c=t[n+1]-h;if(0===l&&0===c)s=e;else{var p=((r-u)*l+(o-h)*c)/(l*l+c*c);if(p>1)s=n;else{if(p>0){for(var f=0;f<i;++f)a[f]=Xt(t[e+f],t[n+f],p);return void(a.length=i)}s=e}}for(f=0;f<i;++f)a[f]=t[s+f];a.length=i}function ci(t,e,n,i,r){var o=t[e],a=t[e+1];for(e+=i;e<n;e+=i){var s=t[e],u=t[e+1],h=Ht(o,a,s,u);h>r&&(r=h),o=s,a=u}return r}function pi(t,e,n,i,r){for(var o=0,a=n.length;o<a;++o){var s=n[o];r=ci(t,e,s,i,r),e=s}return r}function fi(t,e,n,i,r,o,a,s,u,h,l){if(e==n)return h;var c,p;if(0===r){if((p=Ht(a,s,t[e],t[e+1]))<h){for(c=0;c<i;++c)u[c]=t[e+c];return u.length=i,p}return h}for(var f=l||[NaN,NaN],d=e+i;d<n;)if(li(t,d-i,d,i,a,s,f),(p=Ht(a,s,f[0],f[1]))<h){for(h=p,c=0;c<i;++c)u[c]=f[c];u.length=i,d+=i}else d+=i*Math.max((Math.sqrt(p)-Math.sqrt(h))/r|0,1);if(o&&(li(t,n-i,e,i,a,s,f),(p=Ht(a,s,f[0],f[1]))<h)){for(h=p,c=0;c<i;++c)u[c]=f[c];u.length=i}return h}function di(t,e,n,i,r,o,a,s,u,h,l){for(var c=l||[NaN,NaN],p=0,f=n.length;p<f;++p){var d=n[p];h=fi(t,e,d,i,r,o,a,s,u,h,c),e=d}return h}function vi(t,e,n,i){for(var r=0,o=n.length;r<o;++r)for(var a=n[r],s=0;s<i;++s)t[e++]=a[s];return e}function gi(t,e,n,i,r){for(var o=r||[],a=0,s=0,u=n.length;s<u;++s){var h=vi(t,e,n[s],i);o[a++]=h,e=h}return o.length=a,o}function yi(t,e,n,i,r){for(var o=void 0!==r?r:[],a=0,s=e;s<n;s+=i)o[a++]=t.slice(s,s+i);return o.length=a,o}function _i(t,e,n,i,r){for(var o=void 0!==r?r:[],a=0,s=0,u=n.length;s<u;++s){var h=n[s];o[a++]=yi(t,e,h,i,o[a]),e=h}return o.length=a,o}function mi(t,e,n,i,r,o,a){var s=(n-e)/i;if(s<3){for(;e<n;e+=i)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var h=[e,n-i],l=0;h.length>0;){for(var c=h.pop(),p=h.pop(),f=0,d=t[p],v=t[p+1],g=t[c],y=t[c+1],_=p+i;_<c;_+=i){var m=Kt(t[_],t[_+1],d,v,g,y);m>f&&(l=_,f=m)}f>r&&(u[(l-e)/i]=1,p+i<l&&h.push(p,l),l+i<c&&h.push(l,c))}for(_=0;_<s;++_)u[_]&&(o[a++]=t[e+_*i],o[a++]=t[e+_*i+1]);return a}function bi(t,e){return e*Math.round(t/e)}function wi(t,e,n,i,r,o,a){if(e==n)return a;var s,u,h=bi(t[e],r),l=bi(t[e+1],r);e+=i,o[a++]=h,o[a++]=l;do{if(s=bi(t[e],r),u=bi(t[e+1],r),(e+=i)==n)return o[a++]=s,o[a++]=u,a}while(s==h&&u==l);for(;e<n;){var c=bi(t[e],r),p=bi(t[e+1],r);if(e+=i,c!=s||p!=u){var f=s-h,d=u-l,v=c-h,g=p-l;f*g==d*v&&(f<0&&v<f||f==v||f>0&&v>f)&&(d<0&&g<d||d==g||d>0&&g>d)?(s=c,u=p):(o[a++]=s,o[a++]=u,h=s,l=u,s=c,u=p)}}return o[a++]=s,o[a++]=u,a}function Ei(t,e,n,i,r,o,a,s){for(var u=0,h=n.length;u<h;++u){var l=n[u];a=wi(t,e,l,i,r,o,a),s.push(a),e=l}return a}var Ci=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ti=function(t){function e(e,n){var i=t.call(this)||this;return i.maxDelta_=-1,i.maxDeltaRevision_=-1,void 0===n||Array.isArray(e[0])?i.setCoordinates(e,n):i.setFlatCoordinates(n,e),i}return Ci(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){return i<ue(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),fi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.getArea=function(){return ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return yi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[];return n.length=mi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,n,0),new e(n,an)},e.prototype.getType=function(){return $e},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=vi(this.flatCoordinates,0,t,this.stride),this.changed()},e}(si),Si=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ii=function(t){function e(e,n){var i=t.call(this)||this;return i.setCoordinates(e,n),i}return Si(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,n,i){var r=this.flatCoordinates,o=Ht(t,e,r[0],r[1]);if(o<i){for(var a=this.stride,s=0;s<a;++s)n[s]=r[s];return n.length=a,o}return i},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return e=this.flatCoordinates,n=t,i=e[0],r=e[1],fe(i,r,i,r,n);var e,n,i,r},e.prototype.getType=function(){return Qe},e.prototype.intersectsExtent=function(t){return le(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}(this.flatCoordinates,0,t,this.stride),this.changed()},e}(si);function xi(t,e,n,i,r){return!function(t,e){var n;return(n=e(we(t)))||(n=e(Ee(t)))||(n=e(Re(t)))?n:(n=e(Pe(t)))||!1}(r,(function(r){return!Pi(t,e,n,i,r[0],r[1])}))}function Pi(t,e,n,i,r,o){for(var a=0,s=t[n-i],u=t[n-i+1];e<n;e+=i){var h=t[e],l=t[e+1];u<=o?l>o&&(h-s)*(o-u)-(r-s)*(l-u)>0&&a++:l<=o&&(h-s)*(o-u)-(r-s)*(l-u)<0&&a--,s=h,u=l}return 0!==a}function Ri(t,e,n,i,r,o){if(0===n.length)return!1;if(!Pi(t,e,n[0],i,r,o))return!1;for(var a=1,s=n.length;a<s;++a)if(Pi(t,n[a-1],n[a],i,r,o))return!1;return!0}function Oi(t,e,n,i,r,o,a){for(var s,u,h,l,c,p,f,d=r[o+1],v=[],g=0,y=n.length;g<y;++g){var _=n[g];for(l=t[_-i],p=t[_-i+1],s=e;s<_;s+=i)c=t[s],f=t[s+1],(d<=p&&f<=d||p<=d&&d<=f)&&(h=(d-p)/(f-p)*(c-l)+l,v.push(h)),l=c,p=f}var m=NaN,b=-1/0;for(v.sort(E),l=v[0],s=1,u=v.length;s<u;++s){c=v[s];var w=Math.abs(c-l);w>b&&Ri(t,e,n,i,h=(l+c)/2,d)&&(m=h,b=w),l=c}return isNaN(m)&&(m=r[o]),a?(a.push(m,d,b),a):[m,d,b]}function Ai(t,e,n,i,r){var o,a,s=_e([1/0,1/0,-1/0,-1/0],t,e,n,i);return!!Ae(r,s)&&(a=s,(o=r)[0]<=a[0]&&a[2]<=o[2]&&o[1]<=a[1]&&a[3]<=o[3]||(s[0]>=r[0]&&s[2]<=r[2]||(s[1]>=r[1]&&s[3]<=r[3]||function(t,e,n,i,r){for(var o,a=[t[e],t[e+1]],s=[];e+i<n;e+=i){if(s[0]=t[e+i],s[1]=t[e+i+1],o=r(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}(t,e,n,i,(function(t,e){return function(t,e,n){var i=!1,r=ce(t,e),o=ce(t,n);if(r===ne||o===ne)i=!0;else{var a=t[0],s=t[1],u=t[2],h=t[3],l=e[0],c=e[1],p=n[0],f=n[1],d=(f-c)/(p-l),v=void 0,g=void 0;o&ie&&!(r&ie)&&(i=(v=p-(f-h)/d)>=a&&v<=u),i||!(o&re)||r&re||(i=(g=f-(p-u)*d)>=s&&g<=h),i||!(o&oe)||r&oe||(i=(v=p-(f-s)/d)>=a&&v<=u),i||!(o&ae)||r&ae||(i=(g=f-(p-a)*d)>=s&&g<=h)}return i}(r,t,e)})))))}function Ni(t,e,n,i,r){if(!function(t,e,n,i,r){return!!Ai(t,e,n,i,r)||(!!Pi(t,e,n,i,r[0],r[1])||(!!Pi(t,e,n,i,r[0],r[3])||(!!Pi(t,e,n,i,r[2],r[1])||!!Pi(t,e,n,i,r[2],r[3]))))}(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(var o=1,a=n.length;o<a;++o)if(xi(t,n[o-1],n[o],i,r)&&!Ai(t,n[o-1],n[o],i,r))return!1;return!0}function ki(t,e,n,i){for(;e<n-i;){for(var r=0;r<i;++r){var o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function Di(t,e,n,i){for(var r=0,o=t[n-i],a=t[n-i+1];e<n;e+=i){var s=t[e],u=t[e+1];r+=(s-o)*(u+a),o=s,a=u}return r>0}function Li(t,e,n,i,r){for(var o=void 0!==r&&r,a=0,s=n.length;a<s;++a){var u=n[a],h=Di(t,e,u,i);if(0===a){if(o&&h||!o&&!h)return!1}else if(o&&!h||!o&&h)return!1;e=u}return!0}function Fi(t,e,n,i,r){for(var o=void 0!==r&&r,a=0,s=n.length;a<s;++a){var u=n[a],h=Di(t,e,u,i);(0===a?o&&h||!o&&!h:o&&!h||!o&&h)&&ki(t,e,u,i),e=u}return e}var Mi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ji=function(t){function e(e,n,i){var r=t.call(this)||this;return r.ends_=[],r.flatInteriorPointRevision_=-1,r.flatInteriorPoint_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,void 0!==n&&i?(r.setFlatCoordinates(n,e),r.ends_=i):r.setCoordinates(e,n),r}return Mi(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?T(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,n,i){return i<ue(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pi(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),di(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))},e.prototype.containsXY=function(t,e){return Ri(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return hi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?Fi(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,_i(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Ce(this.getExtent());this.flatInteriorPoint_=Oi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Ii(this.getFlatInteriorPoint(),un)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Ti(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[],r=0,o=0,a=n.length;o<a;++o){var s=n[o],u=new Ti(e.slice(r,s),t);i.push(u),r=s}return i},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Li(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Fi(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var n=[],i=[];return n.length=Ei(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),n,0,i),new e(n,an,i)},e.prototype.getType=function(){return Je},e.prototype.intersectsExtent=function(t){return Ni(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var n=gi(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()},e}(si),Ui=ji;function Vi(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new ji(o,an,[o.length])}var Wi=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function qi(t,e){setTimeout((function(){t(e)}),0)}function zi(t){return!(t.sourceCenter&&t.targetCenter&&!Ke(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}var Ki=function(t){function e(e){var n=t.call(this)||this,i=v({},e);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=jn(i.projection,\"EPSG:3857\"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.cancelAnchor_=void 0,i.center&&(i.center=Qn(i.center,n.projection_)),i.extent&&(i.extent=Zn(i.extent,n.projection_)),n.applyOptions_(i),n}return Wi(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,n,i,r=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,l=jn(t.projection,\"EPSG:3857\"),c=l.getExtent(),p=t.constrainOnlyCenter,f=t.extent;s||f||!l.isGlobal()||(p=!1,f=c);if(void 0!==t.resolutions){var d=t.resolutions;n=d[r],i=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,n,i){return function(r,o,a,s){if(void 0!==r){var u=t[0],h=t[t.length-1],l=n?De(u,n,a,i):u;if(s)return void 0===e||e?Le(r,l,h):qt(r,h,l);var c=Math.min(l,r),p=Math.floor(C(t,c,o));return t[p]>l&&p<t.length-1?t[p+1]:t[p]}}}(d,u,!p&&f,h):Fe(n,i,u,!p&&f,h)}else{var v=(c?Math.max(Oe(c),Ie(c)):360*fn[dn.DEGREES]/l.getMetersPerUnit())/256/Math.pow(2,0),g=v/Math.pow(2,28);void 0!==(n=t.maxResolution)?r=0:n=v/Math.pow(a,r),void 0===(i=t.minResolution)&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(a,o):v/Math.pow(a,o):g),o=r+Math.floor(Math.log(n/i)/Math.log(a)),i=n/Math.pow(a,o-r),e=t.constrainResolution?function(t,e,n,i,r,o){return function(a,s,u,h){if(void 0!==a){var l=r?De(e,r,u,o):e,c=void 0!==n?n:0;if(h)return void 0===i||i?Le(a,l,c):qt(a,c,l);var p=Math.ceil(Math.log(e/l)/Math.log(t)-1e-9),f=-s*(.5-1e-9)+.5,d=Math.min(l,a),v=Math.floor(Math.log(e/d)/Math.log(t)+f),g=Math.max(p,v);return qt(e/Math.pow(t,g),c,l)}}}(a,n,i,u,!p&&f,h):Fe(n,i,u,!p&&f,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:r,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var n=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return Yt(t.extent,t.constrainOnlyCenter,e)}var n=jn(t.projection,\"EPSG:3857\");if(!0!==t.multiWorld&&n.isGlobal()){var i=n.getExtent().slice();return i[0]=-1/0,i[2]=1/0,Yt(i,!1,!1)}return Qt}(t),i=e.constraint,r=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(o=r||Gt(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=o?0:t:void 0}):!1===e?je:\"number\"==typeof e?(n=e,i=2*Math.PI/n,function(t,e){return e?t:void 0!==t?t=Math.floor(t/i+.5)*i:void 0}):je}return Me;var n,i;var r,o}(t);this.constraints_={center:n,resolution:i,rotation:r},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=v({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),v({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),n=0;n<e.length;++n){var i=arguments[n];i.center&&((i=v({},i)).center=Qn(i.center,this.getProjection())),i.anchor&&((i=v({},i)).anchor=Qn(i.anchor,this.getProjection())),e[n]=i}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,n=arguments.length;if(n>1&&\"function\"==typeof arguments[n-1]&&(e=arguments[n-1],--n),!this.isDef()){var i=arguments[n-1];return i.center&&this.setCenterInternal(i.center),void 0!==i.zoom&&this.setZoom(i.zoom),void 0!==i.rotation&&this.setRotation(i.rotation),void(e&&qi(e,!0))}for(var r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],h=0;h<n;++h){var l=arguments[h],c={start:r,complete:!1,anchor:l.anchor,duration:void 0!==l.duration?l.duration:1e3,easing:l.easing||Xe,callback:e};if(l.center&&(c.sourceCenter=o,c.targetCenter=l.center.slice(),o=c.targetCenter),void 0!==l.zoom?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(l.zoom),a=c.targetResolution):l.resolution&&(c.sourceResolution=a,c.targetResolution=l.resolution,a=c.targetResolution),void 0!==l.rotation){c.sourceRotation=s;var p=Bt(l.rotation-s+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=s+p,s=c.targetRotation}zi(c)?c.complete=!0:r+=c.duration,u.push(c)}this.animations_.push(u),this.setHint(Ue,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[Ue]>0},e.prototype.getInteracting=function(){return this.hints_[Ve]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(Ue,-this.hints_[Ue]);for(var e=0,n=this.animations_.length;e<n;++e){var i=this.animations_[e];if(i[0].callback&&qi(i[0].callback,!1),!t)for(var r=0,o=i.length;r<o;++r){var a=i[r];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,n=this.animations_.length-1;n>=0;--n){for(var i=this.animations_[n],r=!0,o=0,a=i.length;o<a;++o){var s=i[o];if(!s.complete){var u=t-s.start,h=s.duration>0?u/s.duration:1;h>=1?(s.complete=!0,h=1):r=!1;var l=s.easing(h);if(s.sourceCenter){var c=s.sourceCenter[0],p=s.sourceCenter[1],f=c+l*(s.targetCenter[0]-c),d=p+l*(s.targetCenter[1]-p);this.targetCenter_=[f,d]}if(s.sourceResolution&&s.targetResolution){var v=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){var g=this.getViewportSize_(this.getRotation()),y=this.constraints_.resolution(v,0,g,!0);this.targetCenter_=this.calculateCenterZoom(y,s.anchor)}this.targetResolution_=v,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var _=1===l?Bt(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){var m=this.constraints_.rotation(_,!0);this.targetCenter_=this.calculateCenterRotate(m,s.anchor)}this.targetRotation_=_}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(r){this.animations_[n]=null,this.setHint(Ue,-1);var b=i[0].callback;b&&qi(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var n,i,r,o=this.getCenterInternal();return void 0!==o&&(He(n=[o[0]-e[0],o[1]-e[1]],t-this.getRotation()),r=e,(i=n)[0]+=+r[0],i[1]+=+r[1]),n},e.prototype.calculateCenterZoom=function(t,e){var n,i=this.getCenterInternal(),r=this.getResolution();void 0!==i&&void 0!==r&&(n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]);return n},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?Yn(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(We)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return function(t,e){return Bn?zn(t,e,Bn):t}(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),n=this.getCenterInternal();jt(n,1);var i=this.getResolution();jt(void 0!==i,2);var r=this.getRotation();return jt(void 0!==r,3),Se(n,i,r,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(qe)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(Zn(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var n=e||this.getViewportSize_(),i=Oe(t)/n[0],r=Ie(t)/n[1];return Math.max(i,r)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(t){return n/Math.pow(e,t*r)}},e.prototype.getRotation=function(){return this.get(ze)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),n=this.getResolution(),i=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:n,rotation:i,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,n,i=this.minZoom_||0;if(this.resolutions_){var r=C(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=qt(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,qt(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var n,i=v({size:this.getViewportSize_()},e||{});if(jt(Array.isArray(t)||\"function\"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))jt(!Ne(t),25),n=Vi(r=Zn(t,this.getProjection()));else if(t.getType()===on){var r;(n=Vi(r=Zn(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Ce(r))}else{var o=Xn();n=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(n,i)},e.prototype.fitInternal=function(t,e){var n=e||{},i=n.size;i||(i=this.getViewportSize_());var r,o=void 0!==n.padding?n.padding:[0,0,0,0],a=void 0!==n.nearest&&n.nearest;r=void 0!==n.minResolution?n.minResolution:void 0!==n.maxZoom?this.getResolutionForZoom(n.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),h=Math.cos(-u),l=Math.sin(-u),c=1/0,p=1/0,f=-1/0,d=-1/0,v=t.getStride(),g=0,y=s.length;g<y;g+=v){var _=s[g]*h-s[g+1]*l,m=s[g]*l+s[g+1]*h;c=Math.min(c,_),p=Math.min(p,m),f=Math.max(f,_),d=Math.max(d,m)}var b=this.getResolutionForExtentInternal([c,p,f,d],[i[0]-o[1]-o[3],i[1]-o[0]-o[2]]);b=isNaN(b)?r:Math.max(b,r),b=this.getConstrainedResolution(b,a?0:1),l=-l;var w=(c+f)/2,E=(p+d)/2,C=[(w+=(o[1]-o[3])/2*b)*h-(E+=(o[0]-o[2])/2*b)*l,E*h+w*l],T=n.callback?n.callback:P;void 0!==n.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(C,b),duration:n.duration,easing:n.easing},T):(this.targetResolution_=b,this.targetCenter_=C,this.applyTargetState_(!1,!0),qi(T,!0))},e.prototype.centerOn=function(t,e,n){this.centerOnInternal(Qn(t,this.getProjection()),e,n)},e.prototype.centerOnInternal=function(t,e,n){var i=this.getRotation(),r=Math.cos(-i),o=Math.sin(-i),a=t[0]*r-t[1]*o,s=t[1]*r+t[0]*o,u=this.getResolution(),h=(a+=(e[0]/2-n[0])*u)*r-(s+=(n[1]-e[1]/2)*u)*(o=-o),l=s*r+a*o;this.setCenterInternal([h,l])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=Yn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var n=e&&Qn(e,this.getProjection());this.adjustResolutionInternal(t,n)},e.prototype.adjustResolutionInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=Qn(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(Qn(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n);this.get(ze)!==i&&this.set(ze,i),this.get(qe)!==o&&this.set(qe,o),this.get(We)&&Ke(this.get(We),a)||this.set(We,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,n){var i=void 0!==t?t:200,r=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,r,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===i&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();var h=n||(0===i?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Ke(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:i,easing:Be,anchor:h}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Ve,1)},e.prototype.endInteraction=function(t,e,n){var i=n&&Qn(n,this.getProjection());this.endInteractionInternal(t,e,i)},e.prototype.endInteractionInternal=function(t,e,n){this.setHint(Ve,-1),this.resolveConstraints(t,e,n)},e.prototype.getConstrainedCenter=function(t,e){var n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)},e.prototype.getConstrainedZoom=function(t,e){var n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))},e.prototype.getConstrainedResolution=function(t,e){var n=e||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,n,i)},e}(Q);function Hi(t,e,n){var i=n&&n.length?n.shift():ct?new OffscreenCanvas(t||300,e||300):document.createElement(\"canvas\");return t&&(i.width=t),e&&(i.height=e),i.getContext(\"2d\")}function Gi(t,e){var n=e.parentNode;n&&n.replaceChild(t,e)}function Bi(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}var Xi=\"opacity\",Yi=\"visible\",Qi=\"extent\",Zi=\"zIndex\",$i=\"maxResolution\",Ji=\"minResolution\",tr=\"maxZoom\",er=\"minZoom\",nr=\"source\",ir=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rr=function(t){function e(e){var n=t.call(this)||this,i=v({},e);return i[Xi]=void 0!==e.opacity?e.opacity:1,jt(\"number\"==typeof i[Xi],64),i[Yi]=void 0===e.visible||e.visible,i[Zi]=e.zIndex,i[$i]=void 0!==e.maxResolution?e.maxResolution:1/0,i[Ji]=void 0!==e.minResolution?e.minResolution:0,i[er]=void 0!==e.minZoom?e.minZoom:-1/0,i[tr]=void 0!==e.maxZoom?e.maxZoom:1/0,n.className_=void 0!==i.className?e.className:\"ol-layer\",delete i.className,n.setProperties(i),n.state_=null,n}return ir(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=qt(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n?n:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return a()},e.prototype.getLayerStatesArray=function(t){return a()},e.prototype.getExtent=function(){return this.get(Qi)},e.prototype.getMaxResolution=function(){return this.get($i)},e.prototype.getMinResolution=function(){return this.get(Ji)},e.prototype.getMinZoom=function(){return this.get(er)},e.prototype.getMaxZoom=function(){return this.get(tr)},e.prototype.getOpacity=function(){return this.get(Xi)},e.prototype.getSourceState=function(){return a()},e.prototype.getVisible=function(){return this.get(Yi)},e.prototype.getZIndex=function(){return this.get(Zi)},e.prototype.setExtent=function(t){this.set(Qi,t)},e.prototype.setMaxResolution=function(t){this.set($i,t)},e.prototype.setMinResolution=function(t){this.set(Ji,t)},e.prototype.setMaxZoom=function(t){this.set(tr,t)},e.prototype.setMinZoom=function(t){this.set(er,t)},e.prototype.setOpacity=function(t){jt(\"number\"==typeof t,64),this.set(Xi,t)},e.prototype.setVisible=function(t){this.set(Yi,t)},e.prototype.setZIndex=function(t){this.set(Zi,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(Q),or=\"undefined\",ar=\"ready\",sr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ur=\"layers\",hr=function(t){function e(e){var n=this,i=e||{},r=v({},i);delete r.layers;var o=i.layers;return(n=t.call(this,r)||this).layersListenerKeys_=[],n.listenerKeys_={},n.addEventListener(Y(ur),n.handleLayersChanged_),o?Array.isArray(o)?o=new et(o.slice(),{unique:!0}):jt(\"function\"==typeof o.getArray,43):o=new et(void 0,{unique:!0}),n.setLayers(o),n}return sr(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(b),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(_(t,p,this.handleLayersAdd_,this),_(t,f,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(b);g(this.listenerKeys_);for(var n=t.getArray(),i=0,r=n.length;i<r;i++){var o=n[i];this.listenerKeys_[u(o)]=[_(o,d,this.handleLayerChange_,this),_(o,N,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[u(e)]=[_(e,d,this.handleLayerChange_,this),_(e,N,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=u(t.element);this.listenerKeys_[e].forEach(b),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(ur)},e.prototype.setLayers=function(t){this.set(ur,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var i=this.getLayerState(),r=n,o=e.length;r<o;r++){var a=e[r];a.opacity*=i.opacity,a.visible=a.visible&&i.visible,a.maxResolution=Math.min(a.maxResolution,i.maxResolution),a.minResolution=Math.max(a.minResolution,i.minResolution),a.minZoom=Math.max(a.minZoom,i.minZoom),a.maxZoom=Math.min(a.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==a.extent?a.extent=xe(a.extent,i.extent):a.extent=i.extent)}return e},e.prototype.getSourceState=function(){return ar},e}(rr);function lr(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var cr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var pr=function(t){function e(e){var n=t.call(this)||this,i=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e=\"string\"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var n,i,r,o={},a=t.layers&&\"function\"==typeof t.layers.getLayers?t.layers:new hr({layers:t.layers});o[Tt]=a,o[It]=t.target,o[xt]=void 0!==t.view?t.view:new Ki,void 0!==t.controls&&(Array.isArray(t.controls)?n=new et(t.controls.slice()):(jt(\"function\"==typeof t.controls.getArray,47),n=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?i=new et(t.interactions.slice()):(jt(\"function\"==typeof t.interactions.getArray,48),i=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?r=new et(t.overlays.slice()):(jt(\"function\"==typeof t.overlays.getArray,49),r=t.overlays):r=new et;return{controls:n,interactions:i,keyboardEventTarget:e,overlays:r,values:o}}(e);n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,n.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:lt,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=[1,0,0,1,0,0],n.pixelToCoordinateTransform_=[1,0,0,1,0,0],n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement(\"div\"),n.viewport_.className=\"ol-viewport\"+(\"ontouchstart\"in window?\" ol-touch\":\"\"),n.viewport_.style.position=\"relative\",n.viewport_.style.overflow=\"hidden\",n.viewport_.style.width=\"100%\",n.viewport_.style.height=\"100%\",n.overlayContainer_=document.createElement(\"div\"),n.overlayContainer_.style.position=\"absolute\",n.overlayContainer_.style.zIndex=\"0\",n.overlayContainer_.style.width=\"100%\",n.overlayContainer_.style.height=\"100%\",n.overlayContainer_.className=\"ol-overlaycontainer\",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement(\"div\"),n.overlayContainerStopEvent_.style.position=\"absolute\",n.overlayContainerStopEvent_.style.zIndex=\"0\",n.overlayContainerStopEvent_.style.width=\"100%\",n.overlayContainerStopEvent_.style.height=\"100%\",n.overlayContainerStopEvent_.className=\"ol-overlaycontainer-stopevent\",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=new bt(n,e.moveTolerance);var r=n.handleMapBrowserEvent.bind(n);for(var o in dt)n.mapBrowserEventHandler_.addEventListener(dt[o],r);n.keyboardEventTarget_=i.keyboardEventTarget,n.keyHandlerKeys_=null;var a=n.handleBrowserEvent.bind(n);return n.viewport_.addEventListener(D,a,!1),n.viewport_.addEventListener(q,a,!!ft&&{passive:!1}),n.controls=i.controls||new et,n.interactions=i.interactions||new et,n.overlays_=i.overlays,n.overlayIdIndex_={},n.renderer_=null,n.handleResize_,n.postRenderFunctions_=[],n.tileQueue_=new Wt(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addEventListener(Y(Tt),n.handleLayerGroupChanged_),n.addEventListener(Y(xt),n.handleViewChanged_),n.addEventListener(Y(St),n.handleSizeChanged_),n.addEventListener(Y(It),n.handleTargetChanged_),n.setProperties(i.values),n.controls.forEach(function(t){t.setMap(this)}.bind(n)),n.controls.addEventListener(p,function(t){t.element.setMap(this)}.bind(n)),n.controls.addEventListener(f,function(t){t.element.setMap(null)}.bind(n)),n.interactions.forEach(function(t){t.setMap(this)}.bind(n)),n.interactions.addEventListener(p,function(t){t.element.setMap(this)}.bind(n)),n.interactions.addEventListener(f,function(t){t.element.setMap(null)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n.overlays_.addEventListener(p,function(t){this.addOverlayInternal_(t.element)}.bind(n)),n.overlays_.addEventListener(f,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(n)),n}return cr(e,t),e.prototype.createRenderer=function(){throw new Error(\"Use a map type that has a createRenderer method\")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(D,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(q,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(V,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,n){if(this.frameState_){var i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==n.layerFilter?n.layerFilter:I,a=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n},e.prototype.forEachLayerAtPixel=function(t,e,n){if(this.frameState_){var i=n||{},r=void 0!==i.hitTolerance?i.hitTolerance*this.frameState_.pixelRatio:0,o=i.layerFilter||I;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,r,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:I,r=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,o,i,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),n=\"changedTouches\"in t?t.changedTouches[0]:t;return[n.clientX-e.left,n.clientY-e.top]},e.prototype.getTarget=function(){return this.get(It)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?\"string\"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return Yn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?$n(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Tt)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer.getSource();if(i&&i.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=Qn(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?$n(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get(St)},e.prototype.getView=function(){return this.get(xt)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,n,i){return function(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return 1/0;if(!t.wantedTiles[n][e.getKey()])return 1/0;var o=t.viewState.center,a=i[0]-o[0],s=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(a*a+s*s)/r}(this.frameState_,t,e,n,i)},e.prototype.handleBrowserEvent=function(t,e){var n=e||t.type,i=new ot(n,this,t);this.handleMapBrowserEvent(i)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var n=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var i=n.length-1;i>=0;i--){var r=n[i];if(r.getActive())if(!r.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var n=this.maxTilesLoading_,i=n;if(t){var r=t.viewHints;if(r[Ue]||r[Ve]){var o=!pt&&Date.now()-t.time>8;n=o?0:8,i=o?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}!t||!this.hasListener(Nt)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(Nt,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,n=this.keyHandlerKeys_.length;e<n;++e)b(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var i=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[_(i,M,this.handleBrowserEvent,this),_(i,j,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(V,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),Bi(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(V,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(b(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(b(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=_(t,d,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=_(t,N,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(b),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[_(t,d,this.render,this),_(t,N,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,n=t.length;e<n;++e){var i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e,n,i=this.getSize(),r=this.getView(),o=this.frameState_,a=null;if(void 0!==i&&function(t){return t[0]>0&&t[1]>0}(i)&&r&&r.isDef()){var s=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),u=r.getState();a={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:o?o.declutterItems:[],extent:Se(u.center,u.resolution,u.rotation,i),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:i,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:u,viewHints:s,wantedTiles:{}}}if(this.frameState_=a,this.renderer_.renderFrame(a),a){if(a.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,a.postRenderFunctions),o)(!this.previousExtent_||!Ne(this.previousExtent_)&&!ve(a.extent,this.previousExtent_))&&(this.dispatchEvent(new it(Et,this,o)),this.previousExtent_=de(this.previousExtent_));this.previousExtent_&&!a.viewHints[Ue]&&!a.viewHints[Ve]&&!ve(a.extent,this.previousExtent_)&&(this.dispatchEvent(new it(Ct,this,a)),e=a.extent,(n=this.previousExtent_)?(n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[3]):e.slice())}this.dispatchEvent(new it(wt,this,a)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Tt,t)},e.prototype.setSize=function(t){this.set(St,t)},e.prototype.setTarget=function(t){this.set(It,t)},e.prototype.setView=function(t){this.set(xt,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,n=getComputedStyle(this.viewport_);n.width&&n.height&&(e=[parseInt(n.width,10),parseInt(n.height,10)]),t.setViewportSize(e)}},e}(Q),fr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),dr=function(t){function e(e){var n=t.call(this)||this;return n.element=e.element?e.element:null,n.target_=null,n.map_=null,n.listenerKeys=[],n.render_=e.render?e.render:P,e.target&&n.setTarget(e.target),n}return fr(e,t),e.prototype.disposeInternal=function(){Bi(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Bi(this.element);for(var e=0,n=this.listenerKeys.length;e<n;++e)b(this.listenerKeys[e]);(this.listenerKeys.length=0,this.map_=t,this.map_)&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==P&&this.listenerKeys.push(_(t,wt,this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_=\"string\"==typeof t?document.getElementById(t):t},e}(Q),vr=new RegExp([\"^\\\\s*(?=(?:(?:[-a-z]+\\\\s*){0,2}(italic|oblique))?)\",\"(?=(?:(?:[-a-z]+\\\\s*){0,2}(small-caps))?)\",\"(?=(?:(?:[-a-z]+\\\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)\",\"(?:(?:normal|\\\\1|\\\\2|\\\\3)\\\\s*){0,3}((?:xx?-)?\",\"(?:small|large)|medium|smaller|larger|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx]))\",\"(?:\\\\s*\\\\/\\\\s*(normal|[\\\\.\\\\d]+(?:\\\\%|in|[cem]m|ex|p[ctx])?))\",\"?\\\\s*([-,\\\\\\\"\\\\'\\\\sa-z]+?)\\\\s*$\"].join(\"\"),\"i\"),gr=[\"style\",\"variant\",\"weight\",\"size\",\"lineHeight\",\"family\"],yr=function(t){var e=t.match(vr);if(!e)return null;for(var n={lineHeight:\"normal\",size:\"1.2em\",style:\"normal\",weight:\"normal\",variant:\"normal\"},i=0,r=gr.length;i<r;++i){var o=e[i+1];void 0!==o&&(n[gr[i]]=o)}return n.families=n.family.split(/,\\s?/),n},_r=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function mr(t,e){if(!t.visible)return!1;var n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;var i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}var br=function(t){function e(e){var n=this,i=v({},e);delete i.source,(n=t.call(this,i)||this).mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,e.render&&(n.render=e.render),e.map&&n.setMap(e.map),n.addEventListener(Y(nr),n.handleSourcePropertyChange_);var r=e.source?e.source:null;return n.setSource(r),n}return _r(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(nr)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():or},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(b(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=_(t,N,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var n=this.getRenderer();if(n.prepareFrame(t))return n.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(b(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(b(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=_(t,Ot,(function(t){var e=t.frameState.layerStatesArray,n=this.getLayerState(!1);jt(!e.some((function(t){return t.layer===n.layer})),67),e.push(n)}),this),this.mapRenderKey_=_(this,N,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(nr,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(rr),wr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Er(t){this.updateElement_(t.frameState)}var Cr=function(t){function e(e){var n=this,i=e||{};(n=t.call(this,{element:document.createElement(\"div\"),render:i.render||Er,target:i.target})||this).ulElement_=document.createElement(\"ul\"),n.collapsed_=void 0===i.collapsed||i.collapsed,n.overrideCollapsible_=void 0!==i.collapsible,n.collapsible_=void 0===i.collapsible||i.collapsible,n.collapsible_||(n.collapsed_=!1);var r=void 0!==i.className?i.className:\"ol-attribution\",o=void 0!==i.tipLabel?i.tipLabel:\"Attributions\",a=void 0!==i.collapseLabel?i.collapseLabel:\"»\";\"string\"==typeof a?(n.collapseLabel_=document.createElement(\"span\"),n.collapseLabel_.textContent=a):n.collapseLabel_=a;var s=void 0!==i.label?i.label:\"i\";\"string\"==typeof s?(n.label_=document.createElement(\"span\"),n.label_.textContent=s):n.label_=s;var u=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_,h=document.createElement(\"button\");h.setAttribute(\"type\",\"button\"),h.title=o,h.appendChild(u),h.addEventListener(L,n.handleClick_.bind(n),!1);var l=r+\" ol-unselectable ol-control\"+(n.collapsed_&&n.collapsible_?\" ol-collapsed\":\"\")+(n.collapsible_?\"\":\" ol-uncollapsible\"),c=n.element;return c.className=l,c.appendChild(n.ulElement_),c.appendChild(h),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return wr(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},n=[],i=t.layerStatesArray,r=0,o=i.length;r<o;++r){var a=i[r];if(mr(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var h=u(t);if(h)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(h))for(var l=0,c=h.length;l<c;++l)h[l]in e||(n.push(h[l]),e[h[l]]=!0);else h in e||(n.push(h),e[h]=!0)}}}}return n},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?\"\":\"none\",this.renderedVisible_=n),!S(e,this.renderedAttributions_)){!function(t){for(;t.lastChild;)t.removeChild(t.lastChild)}(this.ulElement_);for(var i=0,r=e.length;i<r;++i){var o=document.createElement(\"li\");o.innerHTML=e[i],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display=\"none\",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(\"ol-collapsed\"),this.collapsed_?Gi(this.collapseLabel_,this.label_):Gi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle(\"ol-uncollapsible\"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(dr),Tr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Sr(t){var e=t.frameState;if(e){var n=e.viewState.rotation;if(n!=this.rotation_){var i=\"rotate(\"+n+\"rad)\";if(this.autoHide_){var r=this.element.classList.contains(\"ol-hidden\");r||0!==n?r&&0!==n&&this.element.classList.remove(\"ol-hidden\"):this.element.classList.add(\"ol-hidden\")}this.label_.style.transform=i}this.rotation_=n}}var Ir=function(t){function e(e){var n=this,i=e||{};n=t.call(this,{element:document.createElement(\"div\"),render:i.render||Sr,target:i.target})||this;var r=void 0!==i.className?i.className:\"ol-rotate\",o=void 0!==i.label?i.label:\"⇧\";n.label_=null,\"string\"==typeof o?(n.label_=document.createElement(\"span\"),n.label_.className=\"ol-compass\",n.label_.textContent=o):(n.label_=o,n.label_.classList.add(\"ol-compass\"));var a=i.tipLabel?i.tipLabel:\"Reset rotation\",s=document.createElement(\"button\");s.className=r+\"-reset\",s.setAttribute(\"type\",\"button\"),s.title=a,s.appendChild(n.label_),s.addEventListener(L,n.handleClick_.bind(n),!1);var u=r+\" ol-unselectable ol-control\",h=n.element;return h.className=u,h.appendChild(s),n.callResetNorth_=i.resetNorth?i.resetNorth:void 0,n.duration_=void 0!==i.duration?i.duration:250,n.autoHide_=void 0===i.autoHide||i.autoHide,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(\"ol-hidden\"),n}return Tr(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Be}):t.setRotation(0))}},e}(dr),xr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Pr=function(t){function e(e){var n=this,i=e||{};n=t.call(this,{element:document.createElement(\"div\"),target:i.target})||this;var r=void 0!==i.className?i.className:\"ol-zoom\",o=void 0!==i.delta?i.delta:1,a=void 0!==i.zoomInLabel?i.zoomInLabel:\"+\",s=void 0!==i.zoomOutLabel?i.zoomOutLabel:\"−\",u=void 0!==i.zoomInTipLabel?i.zoomInTipLabel:\"Zoom in\",h=void 0!==i.zoomOutTipLabel?i.zoomOutTipLabel:\"Zoom out\",l=document.createElement(\"button\");l.className=r+\"-in\",l.setAttribute(\"type\",\"button\"),l.title=u,l.appendChild(\"string\"==typeof a?document.createTextNode(a):a),l.addEventListener(L,n.handleClick_.bind(n,o),!1);var c=document.createElement(\"button\");c.className=r+\"-out\",c.setAttribute(\"type\",\"button\"),c.title=h,c.appendChild(\"string\"==typeof s?document.createTextNode(s):s),c.addEventListener(L,n.handleClick_.bind(n,-o),!1);var p=r+\" ol-unselectable ol-control\",f=n.element;return f.className=p,f.appendChild(l),f.appendChild(c),n.duration_=void 0!==i.duration?i.duration:250,n}return xr(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var n=e.getZoom();if(void 0!==n){var i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:Be})):e.setZoom(i)}}},e}(dr);var Rr=function(){function t(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var n=e-3;n>0&&this.points_[n+2]>t;)n-=3;var i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;var r=this.points_[e]-this.points_[n],o=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/i,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Or=\"active\",Ar=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Nr(t,e,n,i){var r=t.getZoom();if(void 0!==r){var o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:Be})}}var kr=function(t){function e(e){var n=t.call(this)||this;return e.handleEvent&&(n.handleEvent=e.handleEvent),n.map_=null,n.setActive(!0),n}return Ar(e,t),e.prototype.getActive=function(){return this.get(Or)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Or,t)},e.prototype.setMap=function(t){this.map_=t},e}(Q),Dr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Lr(t){var e=!1;if(t.type==dt.DBLCLICK){var n=t.originalEvent,i=t.map,r=t.coordinate,o=n.shiftKey?-this.delta_:this.delta_;Nr(i.getView(),o,r,this.duration_),t.preventDefault(),e=!0}return!e}var Fr=function(t){function e(e){var n=t.call(this,{handleEvent:Lr})||this,i=e||{};return n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:250,n}return Dr(e,t),e}(kr),Mr=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},jr=function(t){return t.target.getTargetElement()===document.activeElement},Ur=I,Vr=function(t){var e=t.originalEvent;return 0==e.button&&!(ut&&ht&&e.ctrlKey)},Wr=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},qr=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},zr=function(t){var e=t.originalEvent.target.tagName;return\"INPUT\"!==e&&\"SELECT\"!==e&&\"TEXTAREA\"!==e},Kr=function(t){var e=t.pointerEvent;return jt(void 0!==e,56),\"mouse\"==e.pointerType},Hr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Gr(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return[n/e,i/e]}var Br=function(t){function e(e){var n=this,i=e||{};return n=t.call(this,i)||this,i.handleDownEvent&&(n.handleDownEvent=i.handleDownEvent),i.handleDragEvent&&(n.handleDragEvent=i.handleDragEvent),i.handleMoveEvent&&(n.handleMoveEvent=i.handleMoveEvent),i.handleUpEvent&&(n.handleUpEvent=i.handleUpEvent),i.stopDown&&(n.stopDown=i.stopDown),n.handlingDownUpSequence=!1,n.trackedPointers_={},n.targetPointers=[],n}return Hr(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==dt.POINTERDRAG)this.handleDragEvent(t);else if(t.type==dt.POINTERUP){var n=this.handleUpEvent(t);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(t.type==dt.POINTERDOWN){var i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==dt.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===dt.POINTERDOWN||e===dt.POINTERDRAG||e===dt.POINTERUP}(t)){var e=t.pointerEvent,n=e.pointerId.toString();t.type==dt.POINTERUP?delete this.trackedPointers_[n]:(t.type==dt.POINTERDOWN||n in this.trackedPointers_)&&(this.trackedPointers_[n]=e),this.targetPointers=y(this.trackedPointers_)}},e}(kr),Xr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function Yr(t){return Wr(t)&&function(t){var e=t.pointerEvent;return jt(void 0!==e,56),e.isPrimary&&0===e.button}(t)}var Qr=function(t){function e(e){var n=t.call(this,{stopDown:x})||this,i=e||{};return n.kinetic_=i.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1,n.condition_=i.condition?i.condition:Yr,n.noKinetic_=!1,n}return Xr(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute(\"tabindex\")&&(e=jr(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e,n,i=this.targetPointers,r=Gr(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=t.map.getView();e=o,n=a.getResolution(),e[0]*=n,e[1]*=n,He(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-i*Math.cos(r),a[1]-i*Math.sin(r)]);n.animateInternal({center:n.getConstrainedCenter(s),duration:500,easing:Be})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(Br),Zr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),$r=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,{stopDown:x})||this).condition_=i.condition?i.condition:Mr,n.lastAngle_=void 0,n.duration_=void 0!==i.duration?i.duration:250,n}return Zr(e,t),e.prototype.handleDragEvent=function(t){if(Kr(t)){var e=t.map,n=e.getView();if(n.getConstraints().rotation!==Me){var i=e.getSize(),r=t.pixel,o=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!Kr(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!Kr(t)&&(!(!Vr(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))},e}(Br),Jr=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),to=function(t){function e(e){var n=t.call(this)||this;return n.geometry_=null,n.element_=document.createElement(\"div\"),n.element_.style.position=\"absolute\",n.element_.className=\"ol-box \"+e,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return Jr(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,n=this.element_.style;n.left=Math.min(t[0],e[0])+\"px\",n.top=Math.min(t[1],e[1])+\"px\",n.width=Math.abs(e[0]-t[0])+\"px\",n.height=Math.abs(e[1]-t[1])+\"px\"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left=\"inherit\",e.top=\"inherit\",e.width=\"inherit\",e.height=\"inherit\"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new Ui([n])},e.prototype.getGeometry=function(){return this.geometry_},e}(w),eo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),no=\"boxstart\",io=\"boxdrag\",ro=\"boxend\",oo=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.coordinate=n,r.mapBrowserEvent=i,r}return eo(e,t),e}(R),ao=function(t){function e(e){var n=t.call(this)||this,i=e||{};return n.box_=new to(i.className||\"ol-dragbox\"),n.minArea_=void 0!==i.minArea?i.minArea:64,n.onBoxEnd_=i.onBoxEnd?i.onBoxEnd:P,n.startPixel_=null,n.condition_=i.condition?i.condition:Vr,n.boxEndCondition_=i.boxEndCondition?i.boxEndCondition:n.defaultBoxEndCondition,n}return eo(e,t),e.prototype.defaultBoxEndCondition=function(t,e,n){var i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new oo(io,t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new oo(ro,t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new oo(no,t.coordinate,t)),!0)},e}(Br),so=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function uo(){var t,e,n=this.getMap(),i=n.getView(),r=n.getSize(),o=this.getGeometry().getExtent();if(this.out_){var a=i.calculateExtentInternal(r),s=(t=[n.getPixelFromCoordinateInternal(we(o)),n.getPixelFromCoordinateInternal(Re(o))],ye(de(e),t));!function(t,e){var n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}(a,1/i.getResolutionForExtentInternal(s,r)),o=a}var u=i.getConstrainedResolution(i.getResolutionForExtentInternal(o,r)),h=i.getConstrainedCenter(Ce(o),u);i.animateInternal({resolution:u,center:h,duration:this.duration_,easing:Be})}var ho=function(t){function e(e){var n=this,i=e||{},r=i.condition?i.condition:qr;return(n=t.call(this,{condition:r,className:i.className||\"ol-dragzoom\",minArea:i.minArea,onBoxEnd:uo})||this).duration_=void 0!==i.duration?i.duration:200,n.out_=void 0!==i.out&&i.out,n}return so(e,t),e}(ao),lo=37,co=38,po=39,fo=40,vo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function go(t){var e=!1;if(t.type==M){var n=t.originalEvent.keyCode;if(this.condition_(t)&&(n==fo||n==lo||n==po||n==co)){var i=t.map.getView(),r=i.getResolution()*this.pixelDelta_,o=0,a=0;n==fo?a=-r:n==lo?o=-r:n==po?o=r:a=r;var s=[o,a];He(s,i.getRotation()),function(t,e,n){var i=t.getCenterInternal();if(i){var r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:Ye,center:t.getConstrainedCenter(r)})}}(i,s,this.duration_),t.preventDefault(),e=!0}}return!e}var yo=function(t){function e(e){var n=t.call(this,{handleEvent:go})||this,i=e||{};return n.defaultCondition_=function(t){return Wr(t)&&zr(t)},n.condition_=void 0!==i.condition?i.condition:n.defaultCondition_,n.duration_=void 0!==i.duration?i.duration:100,n.pixelDelta_=void 0!==i.pixelDelta?i.pixelDelta:128,n}return vo(e,t),e}(kr),_o=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function mo(t){var e=!1;if(t.type==M||t.type==j){var n=t.originalEvent.charCode;if(this.condition_(t)&&(n==\"+\".charCodeAt(0)||n==\"-\".charCodeAt(0))){var i=t.map,r=n==\"+\".charCodeAt(0)?this.delta_:-this.delta_;Nr(i.getView(),r,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var bo=function(t){function e(e){var n=t.call(this,{handleEvent:mo})||this,i=e||{};return n.condition_=i.condition?i.condition:zr,n.delta_=i.delta?i.delta:1,n.duration_=void 0!==i.duration?i.duration:100,n}return _o(e,t),e}(kr),wo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Eo=\"trackpad\",Co=\"wheel\",To=function(t){function e(e){var n=this,i=e||{};return(n=t.call(this,i)||this).totalDelta_=0,n.lastDelta_=0,n.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,n.duration_=void 0!==i.duration?i.duration:250,n.timeout_=void 0!==i.timeout?i.timeout:80,n.useAnchor_=void 0===i.useAnchor||i.useAnchor,n.condition_=i.condition?i.condition:Ur,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return wo(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute(\"tabindex\")&&(e=jr(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==q)return!0;t.preventDefault();var e,n=t.map,i=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==q&&(e=i.deltaY,st&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=lt),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Eo:Co);var o=n.getView();if(this.mode_===Eo&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var n=-qt(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(n=n?n>0?1:-1:0),Nr(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(kr),So=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Io=function(t){function e(e){var n=this,i=e||{},r=i;return r.stopDown||(r.stopDown=x),(n=t.call(this,r)||this).anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=void 0!==i.threshold?i.threshold:.3,n.duration_=void 0!==i.duration?i.duration:250,n}return So(e,t),e.prototype.handleDragEvent=function(t){var e=0,n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){var o=r-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==Me){var u=a.getViewport().getBoundingClientRect(),h=Gr(this.targetPointers);h[0]-=u.left,h[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(h),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Br),xo=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Po=function(t){function e(e){var n=this,i=e||{},r=i;return r.stopDown||(r.stopDown=x),(n=t.call(this,r)||this).anchor_=null,n.duration_=void 0!==i.duration?i.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return xo(e,t),e.prototype.handleDragEvent=function(t){var e=1,n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,o=n.clientY-i.clientY,a=Math.sqrt(r*r+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var h=s.getViewport().getBoundingClientRect(),l=Gr(this.targetPointers);l[0]-=h.left,l[1]-=h.top,this.anchor_=s.getCoordinateFromPixelInternal(l),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(Br);var Ro=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Oo=function(t){function e(e,n,i,r){var o=t.call(this,e)||this;return o.inversePixelTransform=n,o.frameState=i,o.context=r,o}return Ro(e,t),e}(R),Ao=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,No=/^([a-z]*)$|^hsla?\\(.*\\)$/i;function ko(t){var e=document.createElement(\"div\");if(e.style.color=t,\"\"!==e.style.color){document.body.appendChild(e);var n=getComputedStyle(e).color;return document.body.removeChild(e),n}return\"\"}var Do,Lo;Do={},Lo=0;function Fo(t){return t[0]=qt(t[0]+.5|0,0,255),t[1]=qt(t[1]+.5|0,0,255),t[2]=qt(t[2]+.5|0,0,255),t[3]=qt(t[3],0,1),t}function Mo(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var n=t[1];n!=(0|n)&&(n=n+.5|0);var i=t[2];return i!=(0|i)&&(i=i+.5|0),\"rgba(\"+e+\",\"+n+\",\"+i+\",\"+(void 0===t[3]?1:t[3])+\")\"}var jo=function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var n=this.cache_[e];0!=(3&t++)||n.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,n){var i=Uo(t,e,n);return i in this.cache_?this.cache_[i]:null},t.prototype.set=function(t,e,n,i){var r=Uo(t,e,n);this.cache_[r]=i,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}();function Uo(t,e,n){return e+\":\"+t+\":\"+(n?function(t){return\"string\"==typeof t?t:Mo(t)}(n):\"null\")}var Vo=new jo;function Wo(t){return Array.isArray(t)?Mo(t):t}var qo=function(){function t(){}return t.prototype.drawCustom=function(t,e,n){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),zo=[],Ko=new Q;(new A).setSize=function(){console.warn(\"labelCache is deprecated.\")};var Ho,Go,Bo,Xo=null,Yo={};(function(){var t,e,n=[\"monospace\",\"serif\"],i=n.length,r=\"wmytzilWMYTZIL@#/&?$%10\";function o(t,o,a){for(var s=!0,u=0;u<i;++u){var h=n[u];if(e=Zo(t+\" \"+o+\" 32px \"+h,r),a!=h){var l=Zo(t+\" \"+o+\" 32px \"+a+\",\"+h,r);s=s&&l!=e}}return!!s}function a(){for(var e=!0,n=Ko.getKeys(),i=0,r=n.length;i<r;++i){var a=n[i];Ko.get(a)<100&&(o.apply(this,a.split(\"\\n\"))?(g(Yo),Xo=null,Ho=void 0,Ko.set(a,100)):(Ko.set(a,Ko.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}})(),Bo=Yo;function Qo(t,e){return Xo||(Xo=Hi(1,1)),t!=Ho&&(Xo.font=t,Ho=Xo.font),Xo.measureText(e)}function Zo(t,e){return Qo(t,e).width}function $o(t,e,n,i){0!==e&&(t.translate(n,i),t.rotate(e),t.translate(-n,-i))}var Jo=null;var ta=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ea=(function(t){function e(e,n,i,r,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=n,u.extent_=i,u.transform_=r,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_=\"\",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}ta(e,t),e.prototype.drawImages_=function(t,e,n,i){if(this.image_){var r=ln(t,e,n,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var h=0,l=r.length;h<l;h+=2){var c=r[h]-this.imageAnchorX_,p=r[h+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var f=c+this.imageAnchorX_,d=p+this.imageAnchorY_;Jn(a,f,d,this.imageScale_,this.imageScale_,u,-f,-d),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,c,p,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,n,i){if(this.textState_&&\"\"!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var r=ln(t,e,n,i,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<n;e+=i){var s=r[e]+this.textOffsetX_,u=r[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var h=Jn(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,h)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,n,i,r){var o=this.context_,a=ln(t,e,n,i,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;r&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return r&&o.closePath(),n},e.prototype.drawRings_=function(t,e,n,i){for(var r=0,o=n.length;r<o;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e},e.prototype.drawCircle=function(t){if(Ae(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,n){var i=t.getFlatCoordinates();if(i){var r=t.getStride();return ln(i,0,i.length,r,e,n)}return null}(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),o=this.context_;o.beginPath(),o.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}\"\"!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Qe:this.drawPoint(t);break;case Ze:this.drawLineString(t);break;case Je:this.drawPolygon(t);break;case tn:this.drawMultiPoint(t);break;case en:this.drawMultiLineString(t);break;case nn:this.drawMultiPolygon(t);break;case rn:this.drawGeometryCollection(t);break;case on:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var n=e.getGeometryFunction()(t);n&&Ae(this.extent_,n.getExtent())&&(this.setStyle(e),this.drawGeometry(n))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),\"\"!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),\"\"!==this.text_&&this.drawText_(e,0,e.length,n)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ae(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(\"\"!==this.text_){var i=t.getFlatMidpoint();this.drawText_(i,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Ae(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var n=this.context_,i=t.getFlatCoordinates(),r=0,o=t.getEnds(),a=t.getStride();n.beginPath();for(var s=0,u=o.length;s<u;++s)r=this.moveToLineTo_(i,r,o[s],a,!1);n.stroke()}if(\"\"!==this.text_){var h=t.getFlatMidpoints();this.drawText_(h,0,h.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ae(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(\"\"!==this.text_){var n=t.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Ae(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,n=t.getOrientedFlatCoordinates(),i=0,r=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=r.length;a<s;++a){var u=r[a];i=this.drawRings_(n,i,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(\"\"!==this.text_){var h=t.getFlatInteriorPoints();this.drawText_(h,0,h.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(S(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:\"center\";n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var n=t.getColor();this.fillState_={fillStyle:Wo(n||\"#000\")}}else this.fillState_=null;if(e){var i=e.getColor(),r=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),h=e.getMiterLimit();this.strokeState_={lineCap:void 0!==r?r:\"round\",lineDash:o||zo,lineDashOffset:a||0,lineJoin:void 0!==s?s:\"round\",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==h?h:10,strokeStyle:Wo(i||\"#000\")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),n=t.getImage(1),i=t.getOrigin(),r=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=r[1],this.image_=n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=i[0],this.imageOriginY_=i[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=r[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var n=e.getColor();this.textFillState_={fillStyle:Wo(n||\"#000\")}}else this.textFillState_=null;var i=t.getStroke();if(i){var r=i.getColor(),o=i.getLineCap(),a=i.getLineDash(),s=i.getLineDashOffset(),u=i.getLineJoin(),h=i.getWidth(),l=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:\"round\",lineDash:a||zo,lineDashOffset:s||0,lineJoin:void 0!==u?u:\"round\",lineWidth:void 0!==h?h:1,miterLimit:void 0!==l?l:10,strokeStyle:Wo(r||\"#000\")}}else this.textStrokeState_=null;var c=t.getFont(),p=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),v=t.getRotation(),g=t.getScale(),y=t.getText(),_=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==c?c:\"10px sans-serif\",textAlign:void 0!==_?_:\"center\",textBaseline:void 0!==m?m:\"middle\"},this.text_=void 0!==y?y:\"\",this.textOffsetX_=void 0!==p?this.pixelRatio_*p:0,this.textOffsetY_=void 0!==f?this.pixelRatio_*f:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==v?v:0,this.textScale_=this.pixelRatio_*(void 0!==g?g:1)}else this.text_=\"\"}}(qo),0),na=1,ia=2,ra=3;var oa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function aa(t,e){Vo.expire()}var sa=function(t){function e(e){var n=t.call(this)||this;return n.map_=e,n.declutterTree_=null,n}return oa(e,t),e.prototype.dispatchRenderEvent=function(t,e){a()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;Jn(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),ti(i,n)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r,o,a,s){var u,h=e.viewState;function l(t,e,n){return r.call(o,e,t?n:null)}var c=h.projection,p=function(t,e){var n=e.getExtent();if(e.canWrapX()&&(t[0]<n[0]||t[0]>=n[2])){var i=Oe(n),r=Math.floor((t[0]-n[0])/i);t[0]-=r*i}return t}(t.slice(),c),f=[[0,0]];if(c.canWrapX()&&i){var d=Oe(c.getExtent());f.push([-d,0],[d,0])}var v,g=e.layerStatesArray,y=g.length;this.declutterTree_&&(v=this.declutterTree_.all().map((function(t){return t.value})));for(var _=[],m=0;m<f.length;m++)for(var b=y-1;b>=0;--b){var w=g[b],E=w.layer;if(E.hasRenderer()&&mr(w,h)&&a.call(s,E)){var C=E.getRenderer(),T=E.getSource();if(C&&T){var S=T.getWrapX()?p:t,I=l.bind(null,w.managed);_[0]=S[0]+f[m][0],_[1]=S[1]+f[m][1],u=C.forEachFeatureAtCoordinate(_,e,n,I,v)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r){return a()},e.prototype.hasFeatureAtCoordinate=function(t,e,n,i,r,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,I,this,r,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=function(t,e){e&&e.clear();for(var n=t.declutterItems,i=n.length-1;i>=0;--i)for(var r=n[i],o=r.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],r.opacity,e);return n.length=0,e}(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){Vo.canExpireCache()&&t.postRenderFunctions.push(aa)},e}(w),ua=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ha=function(t){function e(e){var n=t.call(this,e)||this;n.fontChangeListenerKey_=_(Ko,d,e.redrawText.bind(e)),n.element_=document.createElement(\"div\");var i=n.element_.style;i.position=\"absolute\",i.width=\"100%\",i.height=\"100%\",i.zIndex=\"0\",n.element_.className=\"ol-unselectable ol-layers\";var r=e.getViewport();return r.insertBefore(n.element_,r.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return ua(e,t),e.prototype.dispatchRenderEvent=function(t,e){var n=this.getMap();if(n.hasListener(t)){var i=new Oo(t,void 0,e);n.dispatchEvent(i)}},e.prototype.disposeInternal=function(){b(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(Ot,e);var n=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=e.viewState;this.children_.length=0;for(var r=null,o=0,a=n.length;o<a;++o){var s=n[o];if(e.layerIndex=o,mr(s,i)&&(s.sourceState==ar||s.sourceState==or)){var u=s.layer.render(e,r);u&&u!==r&&(this.children_.push(u),r=u)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var n=t.childNodes,i=0;;++i){var r=n[i],o=e[i];if(!r&&!o)break;r!==o&&(r?o?t.insertBefore(o,r):(t.removeChild(r),--i):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent(At,e),this.renderedVisible_||(this.element_.style.display=\"\",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display=\"none\",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,n,i,r){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],h=u.layer;if(h.hasRenderer()&&mr(u,o)&&r(h)){var l=h.getRenderer().getDataAtPixel(t,e,n);if(l){var c=i(h,l);if(c)return c}}}},e}(sa),la=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ca=function(t){function e(e){return(e=v({},e)).controls||(e.controls=function(t){var e=t||{},n=new et;return(void 0===e.zoom||e.zoom)&&n.push(new Pr(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&n.push(new Ir(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&n.push(new Cr(e.attributionOptions)),n}()),e.interactions||(e.interactions=function(t){var e=t||{},n=new et,i=new Rr(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&n.push(new $r),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&n.push(new Fr({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&n.push(new Qr({condition:e.onFocusOnly?jr:void 0,kinetic:i})),(void 0===e.pinchRotate||e.pinchRotate)&&n.push(new Io),(void 0===e.pinchZoom||e.pinchZoom)&&n.push(new Po({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(n.push(new yo),n.push(new bo({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&n.push(new To({condition:e.onFocusOnly?jr:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&n.push(new ho({duration:e.zoomDuration})),n}()),t.call(this,e)||this}return la(e,t),e.prototype.createRenderer=function(){return new ha(this)},e}(pr),pa=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),fa=function(t){function e(e,n,i){var r=t.call(this)||this,o=i||{};return r.tileCoord=e,r.state=n,r.interimTile=null,r.hifi=!0,r.key=\"\",r.transition_=void 0===o.transition?250:o.transition,r.transitionStarts_={},r}return pa(e,t),e.prototype.changed=function(){this.dispatchEvent(N)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+\"/\"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(t.getState()==Lt)return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(t.getState()==Lt){t.interimTile=null;break}t.getState()==Dt?e=t:t.getState()==kt?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(this.state!==Ft&&this.state>t)throw new Error(\"Tile load sequence violation\");this.state=t,this.changed()},e.prototype.load=function(){a()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;var i=e-n+1e3/60;return i>=this.transition_?1:Ge(i/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(A),da=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),va=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=i,o.resolution=n,o.state=r,o}return da(e,t),e.prototype.changed=function(){this.dispatchEvent(N)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return a()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){a()},e}(A),ga=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function ya(t,e,n){var i=t;if(i.src&&pt){var r=i.decode(),o=!0;return r.then((function(){o&&e()})).catch((function(t){o&&(\"EncodingError\"===t.name&&\"Invalid image type.\"===t.message?e():n())})),function(){o=!1}}var a=[m(i,U,e),m(i,k,n)];return function(){a.forEach(b)}}!function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,n,i,ea)||this;return s.src_=r,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=ea,s.imageLoadFunction_=a,s}ga(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=ra,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Ie(this.extent)/this.image_.height),this.state=ia,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state!=ea&&this.state!=ra||(this.state=na,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=ya(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}(va);var _a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();var ma=function(t){function e(e,n,i,r,o,a){var s=t.call(this,e,n,a)||this;return s.crossOrigin_=r,s.src_=i,s.image_=new Image,null!==r&&(s.image_.crossOrigin=r),s.unlisten_=null,s.tileLoadFunction_=o,s}return _a(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=Ft,this.unlistenImage_(),this.image_=((t=Hi(1,1)).fillStyle=\"rgba(0,0,0,0)\",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=Lt:this.state=Mt,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==Ft&&(this.state=kt,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==kt&&(this.state=Dt,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ya(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(fa),ba=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var n=this.entries_[t];return jt(void 0!==n,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},t.prototype.remove=function(t){var e=this.entries_[t];return jt(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),n=0;for(t=this.newest_;t;t=t.older)e[n++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){jt(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}();function wa(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function Ea(t,e,n){return t+\"/\"+e+\"/\"+n}function Ca(t){return Ea(t[0],t[1],t[2])}var Ta=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ta(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=function(t){return t.split(\"/\").map(Number)}(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(Ca(e.tileCoord)),e.release())}.bind(this))}},e}(ba);function Ia(t,e,n,i){var r=n-t,o=i-e,a=Math.sqrt(r*r+o*o);return[Math.round(n+r/a),Math.round(i+o/a)]}function xa(t,e,n,i,r,o,a,s,u,h,l){var c=Hi(Math.round(n*t),Math.round(n*e));if(0===u.length)return c.canvas;c.scale(n,n);var p=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,n){var i,r;i=p,(r=t.extent)[0]<i[0]&&(i[0]=r[0]),r[2]>i[2]&&(i[2]=r[2]),r[1]<i[1]&&(i[1]=r[1]),r[3]>i[3]&&(i[3]=r[3])}));var f=Oe(p),d=Ie(p),v=Hi(Math.round(n*f/i),Math.round(n*d/i)),g=n/i;u.forEach((function(t,e,n){var i=t.extent[0]-p[0],r=-(t.extent[3]-p[3]),o=Oe(t.extent),a=Ie(t.extent);v.drawImage(t.image,h,h,t.image.width-2*h,t.image.height-2*h,i*g,r*g,o*g,a*g)}));var y=Pe(a);return s.getTriangles().forEach((function(t,e,r){var a=t.source,s=t.target,u=a[0][0],h=a[0][1],l=a[1][0],f=a[1][1],d=a[2][0],g=a[2][1],_=(s[0][0]-y[0])/o,m=-(s[0][1]-y[1])/o,b=(s[1][0]-y[0])/o,w=-(s[1][1]-y[1])/o,E=(s[2][0]-y[0])/o,C=-(s[2][1]-y[1])/o,T=u,S=h;u=0,h=0;var I=function(t){for(var e=t.length,n=0;n<e;n++){for(var i=n,r=Math.abs(t[n][n]),o=n+1;o<e;o++){var a=Math.abs(t[o][n]);a>r&&(r=a,i=o)}if(0===r)return null;var s=t[i];t[i]=t[n],t[n]=s;for(var u=n+1;u<e;u++)for(var h=-t[u][n]/t[n][n],l=n;l<e+1;l++)n==l?t[u][l]=0:t[u][l]+=h*t[n][l]}for(var c=new Array(e),p=e-1;p>=0;p--){c[p]=t[p][e]/t[p][p];for(var f=p-1;f>=0;f--)t[f][e]-=t[f][p]*c[p]}return c}([[l-=T,f-=S,0,0,b-_],[d-=T,g-=S,0,0,E-_],[0,0,l,f,w-m],[0,0,d,g,C-m]]);if(I){c.save(),c.beginPath();var x=(_+b+E)/3,P=(m+w+C)/3,R=Ia(x,P,_,m),O=Ia(x,P,b,w),A=Ia(x,P,E,C);c.moveTo(O[0],O[1]),c.lineTo(R[0],R[1]),c.lineTo(A[0],A[1]),c.clip(),c.transform(I[0],I[2],I[1],I[3],_,m),c.translate(p[0]-T,p[3]-S),c.scale(i/n,-i/n),c.drawImage(v.canvas,0,0),c.restore()}})),l&&(c.save(),c.strokeStyle=\"black\",c.lineWidth=1,s.getTriangles().forEach((function(t,e,n){var i=t.target,r=(i[0][0]-y[0])/o,a=-(i[0][1]-y[1])/o,s=(i[1][0]-y[0])/o,u=-(i[1][1]-y[1])/o,h=(i[2][0]-y[0])/o,l=-(i[2][1]-y[1])/o;c.beginPath(),c.moveTo(s,u),c.lineTo(r,a),c.lineTo(h,l),c.closePath(),c.stroke()})),c.restore()),c.canvas}var Pa=function(){function t(t,e,n,i,r,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=Wn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+\"/\"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Oe(i)==Oe(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Oe(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Oe(this.targetProj_.getExtent()):null;var u=Pe(n),h=Re(n),l=Ee(n),c=we(n),p=this.transformInv_(u),f=this.transformInv_(h),d=this.transformInv_(l),v=this.transformInv_(c),g=10+(o?Math.max(0,Math.ceil(Math.log2(be(n)/(o*o*256*256)))):0);if(this.addQuad_(u,h,l,c,p,f,d,v,g),this.wrapsXInSource_){var y=1/0;this.triangles_.forEach((function(t,e,n){y=Math.min(y,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-y>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-y>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-y>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-y>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var n=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-n<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,n,i,r,o){this.triangles_.push({source:[i,r,o],target:[t,e,n]})},t.prototype.addQuad_=function(t,e,n,i,r,o,a,s,u){var h=se([r,o,a,s]),l=this.sourceWorldWidth_?Oe(h)/this.sourceWorldWidth_:null,c=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&l>.5&&l<1,f=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_)f=Oe(se([t,e,n,i]))/this.targetWorldWidth_>.25||f;!p&&this.sourceProj_.isGlobal()&&l&&(f=l>.25||f)}if(f||!this.maxSourceExtent_||Ae(h,this.maxSourceExtent_)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;f=!0}if(u>0){if(!f){var d=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(d),g=void 0;if(p)g=(Bt(r[0],c)+Bt(a[0],c))/2-Bt(v[0],c);else g=(r[0]+a[0])/2-v[0];var y=(r[1]+a[1])/2-v[1];f=g*g+y*y>this.errorThresholdSquared_}if(f){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var _=[(e[0]+n[0])/2,(e[1]+n[1])/2],m=this.transformInv_(_),b=[(i[0]+t[0])/2,(i[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,_,b,r,o,m,w,u-1),this.addQuad_(b,_,n,i,w,m,a,s,u-1)}else{var E=[(t[0]+e[0])/2,(t[1]+e[1])/2],C=this.transformInv_(E),T=[(n[0]+i[0])/2,(n[1]+i[1])/2],S=this.transformInv_(T);this.addQuad_(t,E,T,i,r,C,S,s,u-1),this.addQuad_(E,e,n,T,C,o,a,S,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,n,i,r,a,s),this.addTriangle_(t,e,n,r,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,n,i){var r=e.source;ge(t,r[0]),ge(t,r[1]),ge(t,r[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Ra=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Oa=function(t){function e(e,n,i,r,o,a,s,u,h,l,c){var p=t.call(this,o,kt)||this;p.renderEdges_=void 0!==c&&c,p.pixelRatio_=s,p.gutter_=u,p.canvas_=null,p.sourceTileGrid_=n,p.targetTileGrid_=r,p.wrappedTileCoord_=a||o,p.sourceTiles_=[],p.sourcesListenerKeys_=null,p.sourceZ_=0;var f=r.getTileCoordExtent(p.wrappedTileCoord_),d=p.targetTileGrid_.getExtent(),v=p.sourceTileGrid_.getExtent(),g=d?xe(f,d):f;if(0===be(g))return p.state=Mt,p;var y=e.getExtent();y&&(v=v?xe(v,y):y);var _=r.getResolution(p.wrappedTileCoord_[0]),m=function(t,e,n,i){var r=qn(n,e,t),o=Fn(e,i,n),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||he(u,r)){var h=Fn(t,o,r)/o;isFinite(h)&&h>0&&(o/=h)}return o}(e,i,Ce(g),_);if(!isFinite(m)||m<=0)return p.state=Mt,p;var b=void 0!==l?l:.5;if(p.triangulation_=new Pa(e,i,g,v,m*b,_),0===p.triangulation_.getTriangles().length)return p.state=Mt,p;p.sourceZ_=n.getZForResolution(m);var w=p.triangulation_.calculateSourceExtent();if(v&&(e.canWrapX()?(w[1]=qt(w[1],v[1],v[3]),w[3]=qt(w[3],v[1],v[3])):w=xe(w,v)),be(w)){for(var E=n.getTileRangeForExtentAndZ(w,p.sourceZ_),C=E.minX;C<=E.maxX;C++)for(var T=E.minY;T<=E.maxY;T++){var S=h(p.sourceZ_,C,T,s);S&&p.sourceTiles_.push(S)}0===p.sourceTiles_.length&&(p.state=Mt)}else p.state=Mt;return p}return Ra(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,n,i){e&&e.getState()==Lt&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=Ft;else{var e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i=\"number\"==typeof n?n:n[0],r=\"number\"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=xa(i,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=Lt}this.changed()},e.prototype.load=function(){if(this.state==kt){this.state=Dt,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,n,i){var r=e.getState();if(r==kt||r==Dt){t++;var o=_(e,N,(function(n){var i=e.getState();i!=Lt&&i!=Ft&&i!=Mt||(b(o),0===--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,n){t.getState()==kt&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(b),this.sourcesListenerKeys_=null},e}(fa);function Aa(t,e){var n=/\\{z\\}/g,i=/\\{x\\}/g,r=/\\{y\\}/g,o=/\\{-y\\}/g;return function(a,s,u){return a?t.replace(n,a[0].toString()).replace(i,a[1].toString()).replace(r,a[2].toString()).replace(o,(function(){var t=a[0],n=e.getFullTileRange(t);return jt(n,55),(n.getHeight()-a[2]-1).toString()})):void 0}}function Na(t,e){for(var n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=Aa(t[r],e);return function(t){if(1===t.length)return t[0];return function(e,n,i){if(e){var r=Bt(function(t){return(t[1]<<t[0])+t[2]}(e),t.length);return t[r](e,n,i)}}}(i)}function ka(t,e,n){}var Da=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function La(t){return t?Array.isArray(t)?function(e){return t}:\"function\"==typeof t?t:function(e){return[t]}:null}var Fa=function(t){function e(e){var n=t.call(this)||this;return n.projection_=Ln(e.projection),n.attributions_=La(e.attributions),n.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,n.loading=!1,n.state_=void 0!==e.state?e.state:ar,n.wrapX_=void 0!==e.wrapX&&e.wrapX,n}return Da(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return a()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=La(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(Q),Ma=function(){function t(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function ja(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new Ma(t,e,n,i)}var Ua=Ma,Va=[0,0,0],Wa=function(){function t(t){var e,n,i,r;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,jt((e=this.resolutions_,n=!0,i=function(t,e){return e-t}||E,e.every((function(t,r){if(0===r)return!0;var o=i(e[r-1],t);return!(o>0||n&&0===o)}))),17),!t.origins)for(var o=0,a=this.resolutions_.length-1;o<a;++o)if(r){if(this.resolutions_[o]/this.resolutions_[o+1]!==r){r=void 0;break}}else r=this.resolutions_[o]/this.resolutions_[o+1];this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,jt(this.origins_.length==this.resolutions_.length,20));var s=t.extent;void 0===s||this.origin_||this.origins_||(this.origin_=Pe(s)),jt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,jt(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,jt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==s?s:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new Ua(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):s&&this.calculateTileRanges_(s)}return t.prototype.forEachTileCoord=function(t,e,n){for(var i=this.getTileRangeForExtentAndZ(t,e),r=i.minX,o=i.maxX;r<=o;++r)for(var a=i.minY,s=i.maxY;a<=s;++a)n([e,r,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,n,i){var r,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(r=t[1],o=t[2]):a=this.getTileCoordExtent(t,i);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?ja(r=Math.floor(r/2),r,o=Math.floor(o/2),o,n):this.getTileRangeForExtentAndZ(a,s,n)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var i=2*t[1],r=2*t[2];return ja(i,i+1,r,r+1,e)}var o=this.getTileCoordExtent(t,n);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,n){var i=this.getOrigin(t),r=this.getResolution(t),o=lr(this.getTileSize(t),this.tmpSize_),a=i[0]+e.minX*o[0]*r,s=i[0]+(e.maxX+1)*o[0]*r;return fe(a,i[1]+e.minY*o[1]*r,s,i[1]+(e.maxY+1)*o[1]*r,n)},t.prototype.getTileRangeForExtentAndZ=function(t,e,n){var i=Va;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,i);var r=i[1],o=i[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,i),ja(r,i[1],o,i[2],n)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=lr(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]},t.prototype.getTileCoordExtent=function(t,e){var n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=lr(this.getTileSize(t[0]),this.tmpSize_),o=n[0]+t[1]*r[0]*i,a=n[1]-(t[2]+1)*r[1]*i;return fe(o,a,o+r[0]*i,a+r[1]*i,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,n,i,r){var o=this.getZForResolution(n),a=n/this.getResolution(o),s=this.getOrigin(o),u=lr(this.getTileSize(o),this.tmpSize_),h=i?.5:0,l=i?.5:0,c=Math.floor((t-s[0])/n+h),p=Math.floor((s[1]-e)/n+l),f=a*c/u[0],d=a*p/u[1];return i?(f=Math.ceil(f)-1,d=Math.ceil(d)-1):(f=Math.floor(f),d=Math.floor(d)),wa(o,f,d,r)},t.prototype.getTileCoordForXYAndZ_=function(t,e,n,i,r){var o=this.getOrigin(n),a=this.getResolution(n),s=lr(this.getTileSize(n),this.tmpSize_),u=i?.5:0,h=i?.5:0,l=Math.floor((t-o[0])/a+u),c=Math.floor((o[1]-e)/a+h),p=l/s[0],f=c/s[1];return i?(p=Math.ceil(p)-1,f=Math.ceil(f)-1):(p=Math.floor(p),f=Math.floor(f)),wa(n,p,f,r)},t.prototype.getTileCoordForCoordAndZ=function(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return qt(C(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,n=new Array(e),i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n},t}();function qa(t){var e=t.getDefaultTileGrid();return e||(e=function(t,e,n,i){return function(t,e,n,i){var r=void 0!==i?i:Jt,o=za(t,e,n);return new Wa({extent:t,origin:Te(t,r),resolutions:o,tileSize:n})}(Ka(t),e,n,i)}(t),t.setDefaultTileGrid(e)),e}function za(t,e,n,i){for(var r=void 0!==e?e:42,o=Ie(t),a=Oe(t),s=lr(void 0!==n?n:256),u=i>0?i:Math.max(a/s[0],o/s[1]),h=r+1,l=new Array(h),c=0;c<h;++c)l[c]=u/Math.pow(2,c);return l}function Ka(t){var e=(t=Ln(t)).getExtent();if(!e){var n=180*fn[dn.DEGREES]/t.getMetersPerUnit();e=fe(-n,-n,n,n)}return e}var Ha=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ga=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;n.opaque_=void 0!==e.opaque&&e.opaque,n.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,n.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var i=[256,256],r=e.tileGrid;r&&lr(r.getTileSize(r.getMinZoom()),i);var o=\"undefined\"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,u=4*Math.ceil(a/i[0])*Math.ceil(s/i[1]);return n.tileCache=new Sa(Math.max(u,e.cacheSize||0)),n.tmpSize=[0,0],n.key_=e.key||\"\",n.tileOptions={transition:e.transition},n.zDirection=e.zDirection?e.zDirection:0,n}return Ha(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);n&&n.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,n,i){var r=this.getTileCacheForProjection(t);if(!r)return!1;for(var o,a,s,u=!0,h=n.minX;h<=n.maxX;++h)for(var l=n.minY;l<=n.maxY;++l)a=Ea(e,h,l),s=!1,r.containsKey(a)&&(s=(o=r.get(a)).getState()===Lt)&&(s=!1!==i(o)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,n,i,r){return a()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:qa(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Un(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,n){var i,r,o,a=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),u=lr(a.getTileSize(t),this.tmpSize);return 1==s?u:(i=u,r=s,void 0===(o=this.tmpSize)&&(o=[0,0]),o[0]=i[0]*r+.5|0,o[1]=i[1]*r+.5|0,o)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var n=void 0!==e?e:this.getProjection(),i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=function(t,e,n){var i=e[0],r=t.getTileCoordCenter(e),o=Ka(n);if(he(o,r))return e;var a=Oe(o),s=Math.ceil((o[0]-r[0])/a);return r[0]+=a*s,t.getTileCoordForCoordAndZ(r,i)}(i,t,n)),function(t,e){var n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,n):e.getFullTileRange(n))||o.containsXY(i,r)}(t,i)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,n,i){},e}(Fa),Ba=function(t){function e(e,n){var i=t.call(this,e)||this;return i.tile=n,i}return Ha(e,t),e}(R),Xa=Ga,Ya=\"tileloadstart\",Qa=\"tileloadend\",Za=\"tileloaderror\",$a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Ja=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.generateTileUrlFunction_=!e.tileUrlFunction,n.tileLoadFunction=e.tileLoadFunction,n.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(n):ka,n.urls=null,e.urls?n.setUrls(e.urls):e.url&&n.setUrl(e.url),n.tileLoadingKeys_={},n}return $a(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,n=t.target,i=u(n),r=n.getState();r==Dt?(this.tileLoadingKeys_[i]=!0,e=Ya):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],e=r==Ft?Za:r==Lt?Qa:void 0),null!=e&&this.dispatchEvent(new Ba(e,n))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=function(t){var e=[],n=/\\{([a-z])-([a-z])\\}/.exec(t);if(n){var i=n[1].charCodeAt(0),r=n[2].charCodeAt(0),o=void 0;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\\{(\\d+)-(\\d+)\\}/.exec(t)){for(var a=parseInt(n[2],10),s=parseInt(n[1],10);s<=a;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join(\"\\n\");this.generateTileUrlFunction_?this.setTileUrlFunction(Na(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,n){var i=Ea(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)},e}(Xa),ts=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();function es(t,e){t.getImage().src=e}var ns=function(t){function e(e){var n=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:es,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return n.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,n.tileClass=void 0!==e.tileClass?e.tileClass:ma,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return ts(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var n=this.getTileCacheForProjection(t);for(var i in this.tileCache.expireCache(this.tileCache==n?e:{}),this.tileCacheForProjection){var r=this.tileCacheForProjection[i];r.expireCache(r==n?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Un(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Un(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Un(e,t)){var n=u(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=qa(t)),this.tileGridForProjection[n]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Un(e,t))return this.tileCache;var n=u(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Sa(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]},e.prototype.createTile_=function(t,e,n,i,r,o){var a=[t,e,n],s=this.getTileCoordForTileUrlFunction(a,r),u=s?this.tileUrlFunction(s,i,r):void 0,h=new this.tileClass(a,void 0!==u?kt:Mt,void 0!==u?u:\"\",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return h.key=o,h.addEventListener(N,this.handleTileChange.bind(this)),h},e.prototype.getTile=function(t,e,n,i,r){var o=this.getProjection();if(o&&r&&!Un(o,r)){var a=this.getTileCacheForProjection(r),s=[t,e,n],u=void 0,h=Ca(s);a.containsKey(h)&&(u=a.get(h));var l=this.getKey();if(u&&u.key==l)return u;var c=this.getTileGridForProjection(o),p=this.getTileGridForProjection(r),f=this.getTileCoordForTileUrlFunction(s,r),d=new Oa(o,c,r,p,s,f,this.getTilePixelRatio(i),this.getGutter(),function(t,e,n,i){return this.getTileInternal(t,e,n,i,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=l,u?(d.interimTile=u,d.refreshInterimChain(),a.replace(h,d)):a.set(h,d),d}return this.getTileInternal(t,e,n,i,o||r)},e.prototype.getTileInternal=function(t,e,n,i,r){var o=null,a=Ea(t,e,n),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,n,i,r,s),u.getState()==kt?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,n,i,r,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var n=Ln(t);if(n){var i=u(n);i in this.tileGridForProjection||(this.tileGridForProjection[i]=e)}},e}(Ja),is=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),rs=function(t){function e(e){var n=e||{},i=void 0!==n.projection?n.projection:\"EPSG:3857\",r=void 0!==n.tileGrid?n.tileGrid:function(t){var e=t||{},n=e.extent||Ln(\"EPSG:3857\").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:za(n,e.maxZoom,e.tileSize,e.maxResolution)};return new Wa(i)}({extent:Ka(i),maxResolution:n.maxResolution,maxZoom:n.maxZoom,minZoom:n.minZoom,tileSize:n.tileSize});return t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:n.opaque,projection:i,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:r,tileLoadFunction:n.tileLoadFunction,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:n.tileUrlFunction,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition,attributionsCollapsible:n.attributionsCollapsible,zDirection:n.zDirection})||this}return is(e,t),e}(ns),os=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),as=function(t){function e(e){var n,i=e||{};n=void 0!==i.attributions?i.attributions:['&#169; <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">OpenStreetMap</a> contributors.'];var r=void 0!==i.crossOrigin?i.crossOrigin:\"anonymous\",o=void 0!==i.url?i.url:\"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png\";return t.call(this,{attributions:n,cacheSize:i.cacheSize,crossOrigin:r,opaque:void 0===i.opaque||i.opaque,maxZoom:void 0!==i.maxZoom?i.maxZoom:19,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileLoadFunction:i.tileLoadFunction,url:o,wrapX:i.wrapX,attributionsCollapsible:!1})||this}return os(e,t),e}(rs),ss=\"preload\",us=\"useInterimTilesOnError\",hs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ls=function(t){function e(e){var n=this,i=e||{},r=v({},i);return delete r.preload,delete r.useInterimTilesOnError,(n=t.call(this,r)||this).setPreload(void 0!==i.preload?i.preload:0),n.setUseInterimTilesOnError(void 0===i.useInterimTilesOnError||i.useInterimTilesOnError),n}return hs(e,t),e.prototype.getPreload=function(){return this.get(ss)},e.prototype.setPreload=function(t){this.set(ss,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(us)},e.prototype.setUseInterimTilesOnError=function(t){this.set(us,t)},e}(br),cs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ps=function(t){function e(e){var n=t.call(this)||this;return n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=e,n}return cs(e,t),e.prototype.getFeatures=function(t){return a()},e.prototype.prepareFrame=function(t){return a()},e.prototype.renderFrame=function(t,e){return a()},e.prototype.loadedTileCallback=function(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n},e.prototype.createLoadedTileFinder=function(t,e,n){return function(i,r){var o=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,n,i,r){},e.prototype.getDataAtPixel=function(t,e,n){return a()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){t.target.getState()===ia&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return e!=ia&&e!=ra&&t.addEventListener(N,this.boundHandleImageChange_),e==ea&&(t.load(),e=t.getState()),e==ia},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==ar&&t.changed()},e}(K),fs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ds=function(t){function e(e){var n=t.call(this,e)||this;return n.container=null,n.renderedResolution,n.tempTransform_=[1,0,0,1,0,0],n.pixelTransform=[1,0,0,1,0,0],n.inversePixelTransform=[1,0,0,1,0,0],n.context=null,n.containerReused=!1,n}return fs(e,t),e.prototype.useContainer=function(t,e,n){var i,r,o=this.getLayer().getClassName();t&&\"\"===t.style.opacity&&t.className===o&&((s=t.firstElementChild)instanceof HTMLCanvasElement&&(r=s.getContext(\"2d\")));if(r&&r.canvas.style.transform===e?(this.container=t,this.context=r,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(i=document.createElement(\"div\")).className=o;var a=i.style;a.position=\"absolute\",a.width=\"100%\",a.height=\"100%\";var s=(r=Hi()).canvas;i.appendChild(s),(a=s.style).position=\"absolute\",a.left=\"0\",a.transformOrigin=\"top left\",this.container=i,this.context=r}},e.prototype.clip=function(t,e,n){var i=e.pixelRatio,r=e.size[0]*i/2,o=e.size[1]*i/2,a=e.viewState.rotation,s=Pe(n),u=Re(n),h=Ee(n),l=we(n);$n(e.coordinateToPixelTransform,s),$n(e.coordinateToPixelTransform,u),$n(e.coordinateToPixelTransform,h),$n(e.coordinateToPixelTransform,l),t.save(),$o(t,-a,r,o),t.beginPath(),t.moveTo(s[0]*i,s[1]*i),t.lineTo(u[0]*i,u[1]*i),t.lineTo(h[0]*i,h[1]*i),t.lineTo(l[0]*i,l[1]*i),t.clip(),$o(t,a,r,o)},e.prototype.clipUnrotated=function(t,e,n){var i=Pe(n),r=Re(n),o=Ee(n),a=we(n);$n(e.coordinateToPixelTransform,i),$n(e.coordinateToPixelTransform,r),$n(e.coordinateToPixelTransform,o),$n(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;$n(s,i),$n(s,r),$n(s,o),$n(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,n){var i=this.getLayer();if(i.hasListener(t)){var r=new Oo(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_(Pt,t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(Rt,t,e)},e.prototype.getRenderTransform=function(t,e,n,i,r,o,a){var s=r/2,u=o/2,h=i/e,l=-h,c=-t[0]+a,p=-t[1];return Jn(this.tempTransform_,s,u,h,l,-n,c,p)},e.prototype.getDataAtPixel=function(t,e,n){var i,r=$n(this.inversePixelTransform,t.slice()),o=this.context;try{i=o.getImageData(Math.round(r[0]),Math.round(r[1]),1,1).data}catch(t){return\"SecurityError\"===t.name?new Uint8Array:i}return 0===i[3]?null:i},e}(ps),vs=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),gs=function(t){function e(e){var n=t.call(this,e)||this;return n.extentChanged=!0,n.renderedExtent_=null,n.renderedPixelRatio,n.renderedProjection=null,n.renderedRevision,n.renderedTiles=[],n.newTiles_=!1,n.tmpExtent=[1/0,1/0,-1/0,-1/0],n.tmpTileRange_=new Ua(0,0,0,0),n}return vs(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==Lt||n==Mt||n==Ft&&!i},e.prototype.getTile=function(t,e,n,i){var r=i.pixelRatio,o=i.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,n,r,o);return s.getState()==Ft&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(Lt)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,n,i){return!!this.isDrawableTile(i)&&t.prototype.loadedTileCallback.call(this,e,n,i)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,o=i.resolution,a=i.center,s=i.rotation,h=t.pixelRatio,l=this.getLayer(),c=l.getSource(),p=c.getRevision(),f=c.getTileGridForProjection(r),d=f.getZForResolution(o,c.zDirection),v=f.getResolution(d),g=t.extent,y=n.extent&&Zn(n.extent,r);y&&(g=xe(g,Zn(n.extent,r)));var _=c.getTilePixelRatio(h),m=Math.round(t.size[0]*_),b=Math.round(t.size[1]*_);if(s){var w=Math.round(Math.sqrt(m*m+b*b));m=w,b=w}var C=v*m/2/_,T=v*b/2/_,S=[a[0]-C,a[1]-T,a[0]+C,a[1]+T],I=f.getTileRangeForExtentAndZ(g,d),x={};x[d]={};var P=this.createLoadedTileFinder(c,r,x),R=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;for(var A=I.minX;A<=I.maxX;++A)for(var N=I.minY;N<=I.maxY;++N){var k=this.getTile(d,A,N,t);if(this.isDrawableTile(k)){var D=u(this);if(k.getState()==Lt){x[d][k.tileCoord.toString()]=k;var L=k.inTransition(D);this.newTiles_||!L&&-1!==this.renderedTiles.indexOf(k)||(this.newTiles_=!0)}if(1===k.getAlpha(D,t.time))continue}var F=f.getTileCoordChildTileRange(k.tileCoord,O,R),M=!1;F&&(M=P(d+1,F)),M||f.forEachTileCoordParentTileRange(k.tileCoord,P,O,R)}var j=v/o;Jn(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/_,1/_,s,-m/2,-b/2);var U,V=(U=this.pixelTransform,ct?ei(U):(Jo||(Jo=Hi(1,1).canvas),Jo.style.transform=ei(U),Jo.style.transform));this.useContainer(e,V,n.opacity);var W=this.context,q=W.canvas;ti(this.inversePixelTransform,this.pixelTransform),Jn(this.tempTransform_,m/2,b/2,j,j,0,-m/2,-b/2),q.width!=m||q.height!=b?(q.width=m,q.height=b):this.containerReused||W.clearRect(0,0,m,b),y&&this.clipUnrotated(W,t,y),this.preRender(W,t),this.renderedTiles.length=0;var z,K,H,G=Object.keys(x).map(Number);G.sort(E),1!==n.opacity||this.containerReused&&!c.getOpaque(t.viewState.projection)?(z=[],K=[]):G=G.reverse();for(var B=G.length-1;B>=0;--B){var X=G[B],Y=c.getTilePixelSize(X,h,r),Q=f.getResolution(X)/v,Z=Y[0]*Q*j,$=Y[1]*Q*j,J=f.getTileCoordForCoordAndZ(Pe(S),X),tt=f.getTileCoordExtent(J),et=$n(this.tempTransform_,[_*(tt[0]-S[0])/v,_*(S[3]-tt[3])/v]),nt=_*c.getGutterForProjection(r),it=x[X];for(var rt in it){var ot=(k=it[rt]).tileCoord,at=et[0]-(J[1]-ot[1])*Z,st=Math.round(at+Z),ut=et[1]-(J[2]-ot[2])*$,ht=Math.round(ut+$),lt=st-(A=Math.round(at)),pt=ht-(N=Math.round(ut)),ft=d===X;if(!(L=ft&&1!==k.getAlpha(u(this),t.time)))if(z){W.save(),H=[A,N,A+lt,N,A+lt,N+pt,A,N+pt];for(var dt=0,vt=z.length;dt<vt;++dt)if(d!==X&&X<K[dt]){var gt=z[dt];W.beginPath(),W.moveTo(H[0],H[1]),W.lineTo(H[2],H[3]),W.lineTo(H[4],H[5]),W.lineTo(H[6],H[7]),W.moveTo(gt[6],gt[7]),W.lineTo(gt[4],gt[5]),W.lineTo(gt[2],gt[3]),W.lineTo(gt[0],gt[1]),W.clip()}z.push(H),K.push(X)}else W.clearRect(A,N,lt,pt);this.drawTileImage(k,t,A,N,lt,pt,nt,ft,n.opacity),z&&!L&&W.restore(),this.renderedTiles.push(k),this.updateUsedTiles(t.usedTiles,c,k)}}return this.renderedRevision=p,this.renderedResolution=v,this.extentChanged=!this.renderedExtent_||!ve(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=h,this.renderedProjection=r,this.manageTilePyramid(t,c,f,h,r,g,d,l.getPreload()),this.scheduleExpireCache(t,c),this.postRender(W,t),n.extent&&W.restore(),V!==q.style.transform&&(q.style.transform=V),this.container},e.prototype.drawTileImage=function(t,e,n,i,r,o,a,s,h){var l=this.getTileImage(t);if(l){var c=u(this),p=s?t.getAlpha(c,e.time):1,f=h*p,d=f!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=f),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,n,i,r,o),d&&this.context.restore(),1!==p?e.animate=!0:s&&t.endTransition(c)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var n=function(t,e,n){var i=u(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}},e.prototype.updateUsedTiles=function(t,e,n){var i=u(e);i in t||(t[i]={}),t[i][n.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,n,i,r,o,a,s,h){var l=u(e);l in t.wantedTiles||(t.wantedTiles[l]={});var c,p,f,d,v,g,y=t.wantedTiles[l],_=t.tileQueue;for(g=n.getMinZoom();g<=a;++g)for(p=n.getTileRangeForExtentAndZ(o,g,p),f=n.getResolution(g),d=p.minX;d<=p.maxX;++d)for(v=p.minY;v<=p.maxY;++v)a-g<=s?((c=e.getTile(g,d,v,i,r)).getState()==kt&&(y[c.getKey()]=!0,_.isKeyQueued(c.getKey())||_.enqueue([c,l,n.getTileCoordCenter(c.tileCoord),f])),void 0!==h&&h(c)):e.useTile(g,d,v,r)},e}(ds);gs.prototype.getLayer;var ys=gs,_s=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ms=function(t){function e(e){return t.call(this,e)||this}return _s(e,t),e.prototype.createRenderer=function(){return new ys(this)},e}(ls);var bs=class{constructor(t){var e,n;this.domId=\"#\"+t,this.map=new ca({target:t,layers:[new ms({source:as()})],view:new Ki({center:(e=[-118.286324,34.020318],qn(e,\"EPSG:4326\",void 0!==n?n:\"EPSG:3857\")),zoom:8})})}addMarker(t,e,n){}showMap(){$(this.domId).css(\"display\",\"block\")}clearMap(){$(this.domId).css(\"display\",\"none\")}};console.log(bs);let ws=new o,Es=new bs(\"map\"),Cs=\"world\";function Ts(t,e){let n=Object.keys(e[0]);$(t).children(\"#tb_header\").empty();let i=\"<tr>\";for(let t=0;t<n.length;t++)i+=\"<th>\"+n[t]+\"</th>\";i+=\"</tr>\",$(t).children(\"#tb_header\").append(i),$(t).children(\"#tb_body\").empty();for(let n=0;n<e.length;n++){let r=Object.values(e[n]);i=\"<tr>\";for(let t=0;t<r.length;t++)i+=\"<td>\"+r[t]+\"</td>\";i+=\"</tr>\",$(t).children(\"#tb_body\").append(i)}!function(t){$(t).css(\"display\",\"block\")}(t)}$(\"#t1\").children(\"#tb_header\").empty(),$(\"#t1\").children(\"#tb_body\").empty(),$(\"#t2\").children(\"#tb_header\").empty(),$(\"#t2\").children(\"#tb_body\").empty(),$(\"#t3\").children(\"#tb_header\").empty(),$(\"#t3\").children(\"#tb_body\").empty(),$(\"#t1\").css(\"display\",\"None\"),$(\"#t2\").css(\"display\",\"None\"),$(\"#t3\").css(\"display\",\"None\"),$(\"table\").on(\"scroll\",(function(){$(\"#\"+this.id+\" > *\").width($(this).width()+$(this).scrollLeft())})),$(\"#submit\").click((function(){!function(){if(\"world\"==Cs){let t=$(\"#keyword\").val();ws.getData(Cs,{keyword:t}).then(t=>{let e=Object.values(t);for(let t=0;t<3;t++)0!=e[t].length&&Ts(\"#t\"+(t+1),e[t])})}else if(\"us_restaurant\"==Cs){let t=$(\"#keyword\").val();ws.getData(Cs,{keyword:t}).then(t=>{let e=Object.values(t);for(let t=0;t<2;t++){if(0==e[t].length)continue;if(0==t)for(let n=0;n<e[t].length;n++)Es.addMarker(\"\",e[t][n].longitude,e[t][n].latitude);let n=\"#t\"+(t+1);console.log(e[t]),Ts(n,e[t])}})}}()})),$(\"#select_db input\").on(\"change\",(function(){Cs=$(\"input[name=db]:checked\",\"#select_db\").val(),\"world\"==Cs?(Es.clearMap(),$(\"#filter_options\").empty(),$(\"#filter_options\").append(\"<p>Keyword Search: </p>\"),$(\"#filter_options\").append('<input id=\"keyword\" placeholder=\"Enter keywords here\"></input>'),ws.getData(\"country\",null).then(t=>{Ts(\"#t1\",t)})):\"world_restaurant\"==Cs?(Es.clearMap(),$(\"#filter_options\").empty(),$(\"#filter_options\").append(\"<h1>World Restaurant Filters</h1>\"),$(\"#filter_options\").append(\"<h1>World Restaurant Filters</h1>\"),$(\"#filter_options\").append(\"<h1>World Restaurant Filters</h1>\"),$(\"#filter_options\").append(\"<h1>World Restaurant Filters</h1>\")):($(\"#filter_options\").empty(),$(\"#filter_options\").append(\"<p>Keyword Search: </p>\"),$(\"#filter_options\").append('<input id=\"keyword\" placeholder=\"Enter keywords here\"></input>'),Es.showMap(),ws.getData(\"yelp_business\",null).then(t=>{Ts(\"#t1\",t)}))}))}]);","extractedComments":[]}